!function(e){function t(i){if(a[i])return a[i].exports;var n=a[i]={exports:{},id:i,loaded:!1};return e[i].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var a={};return t.m=e,t.c=a,t.p="//s1.url.cn/qqun/pan/clt_filetab/js/",t(0)}([function(e,t,a){"use strict";function i(){var e=location.href;e.indexOf("groupShareClientV2.html")>0&&(G.newUi=!0),navigator.userAgent.indexOf("Mac OS X")>=0?(G.mac=!0,$("#inputSearch").attr("placeholder",""),$("#navTopFolder").attr("data-action","menu.filenum"),$(".refresh-icon").attr("data-action","menu.refresh").click(function(){window.location.reload()})):$("#inputSearch").attr("placeholder","搜索")}function n(){i(),G.info=o.getInfo(),r.init(),d.init(),l.init(),c.init(),f.action(u),"isLocal"===localVersion&&report("offlinePage"),report("expnew")}savePoint("start"),window.G={},G.flagThumb=!0,G.flagUploadTemp=!1,G.flagHeightChrome=/chrome\/([2|3]\d)/gi.test(window.navigator.userAgent),G.canOpenFolder=window.external&&window.external.openFolder,G.ifFileExist=window.external&&window.external.isFileExist,G.flagIsVip=!1,G.handler={},G.cMap={},G.pList=[],G.cList=[],G.compList=[],G.selectRow={},G.previewCache={},G.activeElement,G.oldVersion=!1,G.folderVersion=5461,G.nowFolder="/",G.folderNum=0,G.appid=4,G.canCreateFolder=!0,G.mac=!1,G.tab={};var o=a(14),r=a(15),l=(a(16),a(17)),s=(a(20),a(18)),d=a(19),c=(a(21),a(22),a(23),a(24)),f=(a(25),a(26)),u=(s.getParameter("debug"),decodeURIComponent(s.getParameter("webParams"))),p=window.external&&window.external.CallHummerApi&&window.external.CallHummerApi("IM.GetVersion");if(p)try{p=JSON.parse(p),0===p.errorCode&&(p=p.version)}catch(m){p=!1}G.version=p,G.webParams=u,G.downFast=window.external&&window.external.downloadByXF,G.fileMap=function(){var e=[];return function(){return e[G.module()]=e[G.module()]||{},e[G.module()]}}(),G.folderMap=function(){var e=[];return function(){var t=G.module();return(1===t||2===t||3===t)&&(t=0),e[t]=e[t]||{},e[t]}}(),G.module=function(){var e=0,t={0:"首页",1:"文件夹内",2:"成员文件列表",3:"搜索结果页"};return function(a){return void 0===a?e:t[a]?(3!==a&&$("#inputSearch").val(""),e=a):(console.log("illegal module"),void 0)}}(),G.checkHttps=function(){var e=location.href;return e.indexOf("https://")>=0?!0:!1},G.scrollHandler=function(){var e=[];return function(t){var a=G.module();return t?e[a]=t:(e[a]=e[a]||function(){},e[a](),void 0)}}(),n()},,,,,,,,,,,,,,function(e,t,a){"use strict";function i(){var e=n.getUin(),t=n.getParameter("gid"),a=function(){var a="refresh_"+e+"_"+t;return 1*n.getCookie(a)?(n.getCookie(a),!0):!1}();/^\d+$/.test(t)||(t=parseInt(t,10),isNaN(t)&&(t="0"));var i=n.getParameter("visitor"),r="1"===i,l=o.getVersion().version,s={uin:parseInt(e),gc:parseInt(t),isVisitor:r,nickName:o.getNickName(e),fromRefresh:a,version:l};return s}var n=a(18),o=a(64);e.exports={getInfo:i}},function(e){"use strict";function t(){return f||(f="lp"+G.info.gc+"-"+G.info.uin),p||(p="tips"+G.info.gc+"-"+G.info.uin),u||(u="clist"+G.info.gc+"-"+G.info.uin),f}function a(e){try{v.setItem(p,e)}catch(t){v.clear(),v.setItem(p,e)}}function i(){return v.getItem(p)}function n(e){h[e.filepath]=e.localpath,m.push(e),console.log("set local:",e);try{v.setItem(f,JSON.stringify(h)),v.setItem(u,JSON.stringify(m))}catch(t){v.clear(),v.setItem(f,JSON.stringify(h)),v.setItem(u,JSON.stringify(m))}}function o(e){1===e.orcType?delete h[e.filepath]:delete h[e.id];try{v.setItem(f,JSON.stringify(h))}catch(t){v.clear(),v.setItem(f,JSON.stringify(h))}}function r(e){return h[e]||!1}function l(e){var t=arguments.length<=1||void 0===arguments[1]?"push":arguments[1];"push"===t?m.push(e):"delete"===t&&(m=m.filter(function(t){return e.localpath!==t.localpath}));try{v.setItem(u,JSON.stringify(m))}catch(a){v.clear(),v.setItem(u,JSON.stringify(m))}}function s(){var e=v.getItem(u);if(null===e)return!1;try{return JSON.parse(e)}catch(t){return!1}}function d(){v.removeItem(u)}function c(){f=t();var e=v.getItem(f);e&&(h=JSON.parse(e))}var f=void 0,u=void 0,p=void 0,m=[],v=window.localStorage,h={};e.exports={set:n,remove:o,check:r,init:c,setTips:a,getTips:i,clearClist:d,getClist:s,setClist:l}},function(e,t,a){"use strict";a(94)},function(e,t,a){"use strict";function i(){for(var e in o)o.hasOwnProperty(e)&&c.bind("box."+e,o[e])}function n(){var e=d.getTaskListAdv(),t=l.getClist();if(G.pList=s.cleanMap(e.map),G.compList=t,G.compList)for(var a=0,n=G.compList.length;n>a;a++){var o=G.compList[a],c=r.getData(o.filepath);c||(o.id=o.filepath,r.addData(o))}i()}var o=(a(89),a(90),a(86)),r=a(77),l=a(15),s=a(91),d=a(64),c=$(G.handler);window.client=d,e.exports={init:n}},function(e){"use strict";function t(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}e.exports=function(){function e(e,t){for(var a=0,i=0;i<e.length;i++){var n=e.charAt(i);if(a+=encodeURI(n).length>2?1:.5,a>=t){var o=a==t?i+1:i;return e.substr(0,o)}}return e}function a(e){e&&e.length>0&&(e.addClass("remove-ease"),setTimeout(function(){e.remove()},300))}function i(){for(var e={},t=Object.keys(G.folderMap()),a=t.length-1;a>=0;a--){var i=G.folderMap()[t[a]];i&&(e[i.fnameEsc]=i)}for(var n="新建文件夹",o=1;void 0!==e[n];)n="新建文件夹("+o+")",o++;return n}function n(e,t){t.map(function(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")});var a="("+t.join("|")+")",i=e.split(new RegExp(a,"i"));return i}function o(e,t){for(var a=t.length-1;a>=0;a--)t[a]=(""+t[a]).toUpperCase();for(var i=[],a=e.length-1;a>=0;a--)i[a]=-1!==t.indexOf(e[a].toUpperCase())?'<span class="match-word">'+e[a]+"</span>":e[a];return i.join("")}function r(e,t){var a=n(e,t);return o(a,t)}var l=function(e){var t=new RegExp("(?:^|;+|\\s+)"+e+"=([^;]*)"),a=document.cookie.match(t);return a?a[1]:""},s=function(){var e=l("uin");return e?(e+="",e.replace(/^[\D0]+/g,"")):0},d=function(e,t){t=t||location.href;var a=new RegExp("(\\?|#|&)"+e+"=([^&^#]*)(&|#|$)"),i=t.match(a);return decodeURIComponent(i?i[2]:"")},c=function(e){return e+="",e.replace(/^[ 　]*/gi,"")},f=function(e,t){var a=t||3;e+="",e=c(e);var i=e.match(/[^\x00-\xff]/g)||[],n=e.replace(/[^\x00-\xff]/g,"");return parseInt(i.length*a+n.length)},u=function(e,t,a){var i=f(e,3);return t>i||i>a?!1:!0},p=function(e,t){var t=t||10,a=f(e),i=t-a;return i>=0?i:0},m=function(){};window.onerror=function(){};var v=function(e,t){return function(a){var i=arguments.length;if(t&&(a=Object(a)),2>i||null==a)return a;for(var n=1;i>n;n++)for(var o=arguments[n],r=e(o),l=r.length,s=0;l>s;s++){var d=r[s];t&&void 0!==a[d]||(a[d]=o[d])}return a}},h=function(e){var a="undefined"==typeof e?"undefined":t(e);return"function"===a||"object"===a&&!!e},g=function(e){if(!h(e))return[];var t=[];for(var a in e)t.push(a);return t},w=v(g),b=function y(e,t){if(e.length<=1)return e;for(var a=Math.floor(e.length/2),i=e.splice(a,1)[0],n=[],o=[],r=0;r<e.length;r++)e[r]&&(e[r][t]>i[t]?n.push(e[r]):o.push(e[r]));return y(n,t).concat([i],y(o,t))};return{getCookie:l,getUin:s,getParameter:d,getLen:f,changeLen:p,checkLength:u,checkLen:m,extend:w,removeEase:a,subString:e,quickSortByObjectAttr:b,getFolderNameDefault:i,heightLight:r}}()},function(e,t,a){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){var t=$(this).data("keyup");if(t){var a=g[t];"function"==typeof a&&a.call(this,e)}}function o(e){var t=$(this).data("keydown");if(t){var a=g[t];"function"==typeof a&&a.call(this,e)}}function r(e){var t=$(this).data("blur");if(t){var a=g[t];"function"==typeof a&&a.call(this,e)}}function l(){this.inputStart=!0}function s(){var e=this;setTimeout(function(){e.inputStart=!1},200)}function d(e){var t=$(e.target);0===t.parents("#box").length&&"box.toggle"!==t.data("action")&&y.trigger("box.hide")}function c(){var e=$(this).data("focus");if(e){var t=g[e];"function"==typeof t&&t.call(this)}}function f(e){var t=$(this).data("action");if(t){var a=g[t];"function"==typeof a&&a.call(this),"openGroupInfoCard"===t&&e.stopPropagation()}else y.trigger("box.hide")}function u(){var e=$(this).data("dbaction");if(e){var t=g[e];"function"==typeof t&&t.call(this)}else y.trigger("box.hide")}function p(){h.init(),$(document).on("click","[data-action]",f),$(document).on("dblclick","[data-dbaction]",u),$("body").on("click",d),$(document).on("keyup","[data-keyup]",n),$(document).on("keydown","[data-keydown]",o),$(document).on("focus","[data-focus]",c),$(document).on("blur","[data-blur]",r),$(document).on("compositionstart","[data-cstart]",l),$(document).on("compositionend","[data-cend]",s),$("body").on("click",function(e){w["menu.hide"](e.target)}),$(window).on("load",function(){$(".scroll-dom").scroll(function(){var e=document.querySelector(".scroll-dom").scrollHeight,t=$(".scroll-dom").scrollTop(),a=$(".scroll-dom").height(),i=30;i>=e-(t+a)&&G.scrollHandler&&G.scrollHandler()})})}var m=a(78),v=(i(m),a(79)),h=i(v),g=a(80).getHandlerTasks(),w=a(81),b=a(82),y=(a(83),$(G.handler));G.tab=b,e.exports={init:p}},function(e,t,a){"use strict";function i(e,t){var a=arguments.length<=2||void 0===arguments[2]?!0:arguments[2];if(G.mac)"fail"===e&&c.alert(2,"提示",t);else{if(o)r.attr("class","icons-"+f[e]+" toast-icon"),l.text(t);else{var i={cls:f[e],text:t},d=s(i);$("body").append(d),o=$("#toastDom"),r=o.find(".toast-icon"),l=o.find(".toast-message")}o.addClass("open"),a&&setTimeout(function(){n()},1e3)}}function n(){o&&o.removeClass("open")}var o,r,l,s=a(109),d=(a(18),$(G.handler)),c=a(64),f={fail:"fail",wait:"wait",suc:"suc",alert:"new-alert"};d.bind("toast.show",function(e,t){t&&t.type&&t.text&&i(t.type,t.text,t.autoHide)}),d.bind("toast.hide",function(){n()}),e.exports={show:i,hide:n}},function(e,t,a){"use strict";function i(){return report("clkCreateFolder"),"LI"===this.nodeName&&reportNew("blankRightMenuClick",{ver1:G.customMenuLength?1:2,ver2:G.info.isAdmin?1:2,ver3:2}),G.canCreateFolder?(c.show(d,{title:"新建文件夹",tips:"请输入文件夹名称",showValue:g.getFolderNameDefault(),action:"folder.createFolder"}),$(".new-name").focus(),void 0):(b.trigger("toast.show",{type:"new-alert",text:"文件夹个数已达上限"}),void 0)}function n(){if(report("renameFolder"),G.selectRow){var e=G.getReportInfo(G.selectRow);e.ver3=4,reportNew("folderRightMenuClick",e)}c.show(d,{title:"重命名",tips:"请输入文件夹的新名称",action:"folder.renameFolder",showValue:G.selectRow.fnameEsc})}function o(){c.hide(d),G.activeElement&&G.activeElement.focus()}function r(){}function l(){}function l(){d.find(".btn-ok").attr("data-action","folder.createOK")}function s(){if(event&&13!==event.keyCode)return y["input.keyup"].call(this,event),void 0;var e=$('[data-keyup="folderTree.create"]');if(!e.length)return callback&&callback(),void 0;var t=e.val(),a=y.folderName(t);a&&f.createFolder()}var d=$("#folderPanel"),c=a(67),f=a(68),u=a(69),p=a(70),m=a(71),v=a(72),h=a(73),g=(a(74),a(18)),w=a(75),b=$(G.handler),y=a(76);e.exports={"folder.openfolder":w.openByFolder,"folder.property":v.show,"folder.create":i,"folder.panelhide":o,"folder.show":r,"folder.showmove":l,"folder.toDelete":l,"folder.createFolder":f.createFolder,"folder.deleteFolder":u.deleteFolder,"folder.renameFolder":p.renameFolder,"folder.showDeleteFolder":u.showDeleteFolder,"folder.showRenameFolder":n,"folder.open":h.renderFolder,"folder.openroot":h.renderRootFolder,"folder.download":m.download,"folder.downloadByBtn":m.downloadByBtn,"input.createFolder":s}},function(e,t,a){"use strict";function i(){var e=$(this).parents(".list-item"),t=e.data("path"),a=void 0,i=b.getData(t);2===i.orcType?a="fold":1==i.orcType&&(a="file"),G.selectRow=i||{},G.selectRow.path=t,G.selectRow.type=a,G.selectRows=[G.selectRow]}var n=a(95),o=a(75),r=a(96),l=a(97),s=a(98),d=a(99),c=a(100),f=a(101),u=a(102),p=a(103),m=a(104),v=a(105),h=a(106),g=a(107),w=a(108),b=a(77);e.exports={"file.batchDelete":m.remove,"batch.removeAction":m.removeAction,"file.batchMove":m.move,"file.batchDownload":m.down,"file.batchSaveAs":m.save,"file.selectAll":p.selectAll,"file.select":p.select,"file.check":p.check,"file.exitBatch":p.exit,"file.upload":n.upload,"file.batchUpload":n.bupload,"file.openFolder":o.openByPath,"file.openFolderInBox":o.openByMenu,"file.showRename":r.showFileRename,"file.renameFile":r.renameFile,"file.saveAs":v.save,"file.download":l.download,"file.downloadByDom":l.downloadByDom,"file.downloadByMenu":l.downloadByMenu,"file.downloadByBtn":l.downloadByBtn,"file.downloadBatch":l.downloadBatch,"file.preview":c.preview,"file.menupreview":c.menupreview,"file.jubao":u,"file.permanent":g,"file.delete":d.removeOne,"file.deleteBatch":d.removeBatch,"file.forward":s.forward,"file.forwardMobile":s.toMobile,"file.showUpload":n.showUpload,"file.showMove":f.showMove,"file.move":f.move,"upload.noTips":n.noTips,"upload.cUpload":n.cupload,"file.getByUin":h.byUin,"file.getAttr":w,"qq.update":n.update,"file.aria":i}},function(e,t,a){"use strict";function i(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function n(){var e=['<div class="search-empty"><div class="search-icon-dom">','<div class="icons-search-empty"></div>','<span class="empty-desc">很遗憾，','没有找到与"',G.searchKeyword,'"相关的文件</span></div></div>'],t=e.join("");return t}function o(){var e=!0,t=!0;return function(a){var i=G.getDomPanel(),o=a.selfGroupResult,r=a.otherGroupResult,l=a.owner,d=a.total-a.owner,c=!1,f=!1;if(0===l&&0===d){var u=n();return i.html(u),$(".search-empty").css("height","100%"),void 0}console.log(o,r),o.length>0?c=s({data:{self:!0,first:e,list:o,total:l,name:"本群搜索结果",gc:"0000"},renderParams:{actionHide:!1,getByUinHide:!1,searchModule:!0},batchMode:!1}):e&&(c='<div class="search-no-result">本群没有搜索到相关的文件</div>'),r.length>0&&(f=s({data:{self:!1,first:t,list:r,total:d,name:"其他群的搜索结果",gc:"1111"},renderParams:{actionHide:!1,getByUinHide:!1,searchModule:!0},batchMode:!1})),e&&(report("showSearchRes"),i.html(""),e=!1,$("body").trigger("searchResult",!0)),c&&i.append(c),r.length>0&&t&&(t=!1),f&&i.append(f),$("#createFolder").hide()}}function r(){var e=!1,t=void 0;return function(a,r){var s=G.module(),u=G.searchKeyword=$.trim($("#inputSearch").val())||"";(a&&13==a.keyCode||void 0==a)&&""!==u&&(report("doSearch"),G.module(3),G.scrollHandler(function(){var a=G.searchKeyword=$("#inputSearch").val()||"",u={key_word:a};e=s!==G.module()||3!==G.module()||JSON.stringify(t)!=JSON.stringify(u),s=G.module(),t=u;var p=function(t,a){function i(e){function t(e){return e.gc===G.info.gc}function a(e){return e.gc!==G.info.gc}e=e||[];var i={ut:"upload_time",owner_name:"uin_name"},n=function(e){function t(e,t,a){e=e.filter(t);for(var n={},o=e.length-1;o>=0;o--){var r=e[o];n[r.id]=r}for(var l=d.setFileList(e,i),s=l.file,o=s.length-1;o>=0;o--){var f=s[o].fp,r=G.fileMap()["/"+s[o].busid+f],u=n[f].match_word;s[o].name=c.heightLight(r.name,u),s[o].suf=c.heightLight(r.suf,u),a&&(s[o].otherGroupName=n[f].group_name,s[o].gc=n[f].gc)}return s}var a=arguments.length<=1||void 0===arguments[1]?{filters:{selfGroupFilter:function(){},otherGroupFilter:function(){}}}:arguments[1],n={selfGroupResult:t(e,a.filters.selfGroupFilter),otherGroupResult:t(e,a.filters.otherGroupFilter,!0)};return n};return n(e,{filters:{selfGroupFilter:t,otherGroupFilter:a}})}e&&!G.isHistory&&G.setHistory(u),G.isHistory=!1,G.nowFolder=!1,$("body").attr("data-mode","search"),(e||void 0==G.renderListFuncSingtons[a])&&(G.renderListFuncSingtons[a]=o(),G.tab.resetTab());var n=i(t.file_list);n.owner=t.owner_total,n.total=t.total,G.renderListFuncSingtons[a](n),r&&r(),f.showLoad(!0),console.debug("reset history in search!")},m={succ:function(e,t){p(e,t)},fail:function(){if(e){var t="100%",a=G.getDomPanel();a.html(n()),$(".search-empty").css("height",t||"160px")}f.showLoad(!0)},beforeRequest:function(e){return function(){e()}}(f.showLoad),searchParams:u,isNew:e};if("object"===("undefined"==typeof nodeData?"undefined":i(nodeData))){var v={key_word:nodeData.key_word,search_type:0,app_id:4};p(nodeData,v),nodeData=!1}else l.search(m)}),G.scrollHandler())}}var l=a(85),s=(a(92),a(113)),d=a(77),c=a(18),f=a(25);G.renderOtherGroupResultFuncSingtons={},e.exports={search:r()}},function(e,t,a){"use strict";var i=a(92),n=a(93),o=$(G.handler),r=function(){i.checkVip().done(function(e){G.flagIsVip=e&&e.vinfo&&e.vinfo.supervip?!0:!1,n.showQQVip()}).fail(function(){n.showQQVip()})},l=function(){n.show(),o.trigger("menu.hide")},s=function(){report("openVip"),G.activeElement&&G.activeElement.focus(),window.open("http://pay.qq.com/ipay/index.shtml?c=cjclub&aid=vip.gongneng.client.qunwenjian_openvip&ADTAG=CLIENT.QQ.GroupFile_OpenSVIP")};e.exports={init:r,"vip.show":l,"vip.open":s}},function(e,t,a){"use strict";function i(){H(),D.text(G.file.allnum).attr("aria-label","共"+G.file.allnum+"个文件"),$("#macFileNums").text("共"+G.file.allnum+"个文件");var e=parseInt(G.file.cu/G.file.ct*100);j.css("width",e+"%"),G.file.capacityused?R.text(G.file.capacityused+"/"+G.file.capacitytotal):R.text("未知/未知"),"/"===G.nowFolder&&$("#fileNum").removeClass("hide"),G.info.isAdmin?$("#createFolder").show():$("#box").addClass("one")}function n(){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],t=!0;return function(a){y(!0);var n=P();if(!a||0===a.file.length&&0===a.folder.length)return o(),i(),t=!1,void 0;L=!1,G.info.isVisitor&&(e.actionHide=!0);var r=O({list:a.file,renderParams:e}),l=O({list:a.folder,renderParams:e});if(t)i(),t=!1,n.html(l),n.append(r);else{var s=$(".fold").last();s.length>0?s.after(l):n.append(l),n.append(r)}if(n.find(".list-item").each(function(e){this.setAttribute("idx",e)}),G.initInFolder?(B++,$("#fileListDom").hide()):$("body").trigger("newbie"),2===B){B++,G.nowFolder=G.initInFolder;var d=G.nowFolder.replace(/\//i,"-");$("#list"+d).show(),G.initInFolder=!1}if($(".scroll-dom")[0].scrollHeight>$(".scroll-dom").height()?$(".file-header").addClass("padding"):$(".file-header").removeClass("padding"),!window._timePoints.show){savePoint("show");var c={20:window._timePoints.css,21:window._timePoints.zepto,22:window._timePoints.js,23:window._timePoints.start};"isLocal"===localVersion?c[25]=window._timePoints.show:"undefined"!=typeof nodeCost?c[26]=window._timePoints.show:c[24]=window._timePoints.show,QReport.huatuo({appid:10016,flag1:1772,flag2:1,flag3:1,speedTime:c})}}}function o(){var e=G.getDomPanel();if(!e.find(".list-item").length){var t=k();e.html(t)}}function r(e){if("/"===G.nowFolder){var t=O({list:[e]});0===M.find(".icons-empty").length?M.prepend(t):M.html(t)}}function l(e){if(e)if(e.domid){var t=e.domid;$("#"+t).remove()}else if(e.id){var t=e.id;$("[data-path="+t+"]").remove()}setTimeout(o,500)}function s(e){var t=G.getDomPanel(),a=t.find(".fold").last(),i=O({list:[e]});G.info.version<G.folderVersion?"/"===e.parentId&&"/"===G.nowFolder&&(a.length?a.after(i):t.prepend(i)):a.length?a.after(i):"/"!==G.folder&&0===t.find(".icons-empty").length?t.prepend(i):t.html(i),N.renderSpace()}function d(e){var t=e.parentId;if("/"===t){var a="#fileListDom",i=$(a),n=O({list:[e]});$("#"+e.domid).remove(),i.find(".fold").length>0?i.find(".fold").last().after(n):i.prepend(n)}}function c(e){if(e){var t=e.domid;$("#"+t).remove(),C.removeEase($("#"+t))}}function f(e){2===e.orcType?l(e):c(e);var t=G.getDomPanel();0===t.find(".list-item").length&&(console.log("set empty"),o())}function u(e,t){x.setAllSpace(function(t){p(),H(t.all_upload),e&&e(t)},t)}function p(){if("/"===G.nowFolder){R.text(G.file.capacityused+"/"+G.file.capacitytotal),$("#fileNumText").text(G.file.allnum),$("#macFileNums").text("共"+G.file.allnum+"个文件"),G.file.capacitytotal?$("#ariaSpace").attr("aril-label","已用容量"+G.file.capacityused+"共"+G.file.capacitytotal):$("#ariaSpace").attr("aril-label","已用容量未知G,共未知G");var e=parseInt(G.file.cu/G.file.ct*100);j.css("width",e+"%"),$("#fileNum").removeClass("hide")}}function m(e){var t=e||{},a=t.container||"#folderOrSearchResult",i=t.succ,o=t.searchParams||{},r=JSON.stringify(o);void 0==G.searchFuncSingtons[r]&&(G.searchFuncSingtons[r]=F.search(o)),G.searchFuncSingtons[r](function(e){void 0==G.renderListFuncSingtons[folderId]&&(G.renderListFuncSingtons[folderId]=n(a)),G.renderListFuncSingtons[folderId](e),i&&i(e)},function(){})}function v(e){J(e)(),z(),G.file&&G.file.ct||u()}function h(e){var t=function(t){if(0!==t.length)if(t.find(".file-status").length>0)t.find(".width").css("width",e.cPercent+"%"),e.cPercent>=100||"remove"===e.status?(t.find(".item-time .drag-dom").show(),t.find(".item-time .file-status").hide()):(t.find(".item-time .drag-dom").hide(),t.find(".item-time .file-status").show());else{var a="正在打开";G.saveasList[e.filepath]&&(a="正在下载");var i=['<div class="file-download file-status">',""+a,'<div class="file-parents">','<div class="width" style="width:'+e.cPercent+'%"></div>',"</div>",'<div class="miss-close" onclick="G.removeTaskInDownLoad('+e.taskId+",'"+e.filepath+"')\"></div>","</div>"];t.find(".item-time .drag-dom").hide(),t.find(".item-time").append(i.join(""))}};if(1===e.orcType){var a=e.filepath.replace(/\//gi,"-"),i=$("#"+a),n=$("#search"+a);t(i),t(n)}}function g(e){var t=e.domid;t||(t=T.getId(e.oldfilepath));var a=$("#"+t),i=void 0;a.find(".item-time .drag-dom").hide(),i='<div class="file-status">正在更新中</div>',a.find(".item-time").append(i),a.find(".file-icons").addClass("editing")}function w(e){var t=T.getData(e.oldfilepath),a=$("#"+t.domid);a&&(a.attr("id",e.domid),a.attr("data-path",e.filepath),a.find(".item-time .drag-dom").text(e.mtStr).attr("title","更新时间:"+e.mtoStr).show(),a.find(".file-icons").removeClass("editing"),a.find(".item-time .file-status").hide(),e.preview||a.attr("data-dbaction","file.downloadByDom")),delete G.editFileList[t.filepath],T.remove(e.oldfilepath)}function b(e){var t=void 0;if(1===e.orcType)t=$('.list-item[data-path="'+e.filepath+'"]'),t.find(".item-name").attr("title",e.nameEsc+e.suf),t.find(".item-name .name").text(e.nameEsc+e.suf),t.find(".item-time").attr("title","更新时间:"+e.mtoStr),t.find(".item-time span").text(e.mtStr);else{if(t=$("#"+e.domid),e.toFirst)return t.remove(),r(e),void 0;t=$("#"+e.domid),e.filenum&&t.find(".file-size").text(e.filenum+"个文件").attr("title",e.filenum+"个文件"),t.find(".item-name").attr("title",e.fnameEsc),t.find(".item-time").attr("title","更新时间:"+e.mtoStr),t.find(".item-time").text(e.mtStr)}if("downloadcomplete"!==e.status,"uploadcomplete"===e.status||"downloadcomplete"===e.status){t.addClass("succ");var a="打开";G.mac&&(a="")}else e.isDown||e.isDowning?e.isDowning:t.removeClass("succ")}function y(e){E||($("body").append('<div class="loader" id="loaderDom"><div class="loading"></div></div>'),E=$("#loaderDom")),e?E.removeClass("open"):E.addClass("open")}var x=a(84),k=a(111),F=a(85),T=a(77),C=a(18),_=a(86),S=a(87),M=$("#fileListDom"),D=$("#fileNumText"),R=$("#groupSize"),j=$("#groupSizeBar"),N=a(88),I=$(G.handler),O=(location.href,void 0);O=a(112);var L=!0,E=void 0;G.renderListFuncSingtons={},G.getListFuncSingtons={},G.searchFuncSingtons={},I.bind("file.thumbUpdate",function(e,t){var a=$("#"+t.domid);a.length&&t.previewObj&&t.previewObj.url&&!function(){var e=t.previewObj.url+"&pictype=scaled&size=50*50";G.checkHttps()&&(e=e.replace("http://",""),e="https://proxy.qun.qq.com/tx_tls_gate="+e);var i=new Image;i.onload=function(){a.find(".filesmall-pic").css("background-image","url("+e+")").addClass("thumb")},i.onerror=function(){console.log("缩略图加载失败!",e)},i.src=e,report("imgurl")}()}),I.bind("file.dataUpdate",function(e,t){var a=$("#"+t.domid);1===t.remoteType&&(a.removeClass("temp"),a.find(".item-tags").hide(),a.find(".tmp").remove()),t.newFilePath&&a.attr("data-path",t.newFilePath),a.find(".file-info .name").text(t.fnameEsc)});var P=function(){var e=G.module(),t=function(e){return'<section class="file-list" id="'+e+'"></section>'},a=function(){var e=T.getData(G.nowFolder),a=e.domid;if(!e&&G.nowFolder&&(a=G.nowFolder.replace(/\//g,"-")),"-"===a&&(a=!1),a){var i=$("#list"+a);return i.length>0?i:(M.after(t("list"+a)),i=$("#list"+a))}return $("#fileListDom")},i=function(){var e=$("#searchFileDom");return e.length>0?e:(M.after(t("searchFileDom")),e=$("#searchFileDom"))},n=function(){var e=$("#userFileDom");return e.length>0?e:(M.after(t("userFileDom")),e=$("#userFileDom"))};switch($(".file-list").hide(),e){case 0:return 0===e&&M.show(),M;case 1:return a().show();case 3:return i().show();case 2:return n().show()}},A=function(){var e=G.module(),t=function(e){return'<section class="file-list" id="'+e+'"></section>'},a=function(){var e=T.getData(G.nowFolder),a=e.domid;if(!e&&G.nowFolder&&(a=G.nowFolder.replace(/\//g,"-")),"-"===a&&(a=!1),a){var i=$("#list"+a);return i.length>0?i:(M.after(t("list"+a)),i=$("#list"+a))}return $("#fileListDom")},i=function(){var e=$("#searchFileDom");return e.length>0?e:(M.after(t("searchFileDom")),e=$("#searchFileDom"))},n=function(){var e=$("#userFileDom");return e.length>0?e:(M.after(t("userFileDom")),e=$("#userFileDom"))};switch(e){case 0:return M;case 1:return a();case 3:return i();case 2:return n()}};G.onlyGetDom=A,G.getDomPanel=P;var B=0,z=function(){var e={filterUin:G.info.uin,filterCode:4},t=x.getList(e);t(function(){_.firstRender()},function(){})},q=0,U=0,H=function(){var e=arguments.length<=0||void 0===arguments[0]?-1:arguments[0];q++,-1!==e&&(U=e),2>q||(G.info.isAdmin||U?G.info.canCreateFolder=!0:(G.info.canCreateFolder=!1,$("#createFolder").hide()))},J=function(){var e=!1,t=void 0;return function(a){{var i=a||{},o=i.paramsFilter||{},r=i.container||"#fileListDom",l=i.succ;i.fail}e=JSON.stringify(t)!==JSON.stringify(o);var s=t=o;if($("body").attr("data-mode","folder"),G.isHistory){var d=o.folderId,c="#list"+d.replace("/","-");return"/"===d&&(c="#fileListDom"),$(".file-list").hide(),$(c).show(),S.updataFolderHeader(a.paramsFilter.folder),l&&l(),function(){}}return"/"!==G.nowFolder?$("body").addClass("folder-module"):$("body").removeClass("folder-module"),G.scrollHandler(function(){(e||void 0==G.getListFuncSingtons[s])&&(G.getListFuncSingtons[s]=x.getList(o)),G.getListFuncSingtons[s](function(t){if((e||void 0==G.renderListFuncSingtons[s])&&(e=!1,G.renderListFuncSingtons[s]=n(r,i.renderParams)),3===o.filterCode)for(var a=t.file,d=a.length-1;d>=0;d--){var c=a[d];c.parentId&&G.folderMap()[c.parentId]&&(t.file[d].folderName=G.folderMap()[c.parentId].fnameEsc)}G.renderListFuncSingtons[s](t),y(!0),l&&l(t)},function(e){if(y(!0),e&&console.log(e),1e3!==e.ec){var t="拉取文件列表失败";L&&(t+=G.mac?"，请稍后重试":'，请稍后<a onclick="window.location.reload();">重试</a>'),I.trigger("toast.show",{type:"fail",text:t,autoHide:!L})}e&&e.fc&&1===e.fc},function(e){return function(){e()}}(y))})}}(),Q=function(){var e={};x.getList(e)()};e.exports={init:v,appendFold:r,removeFold:l,appendFile:s,appendFileToFolder:d,updateRow:b,search:m,renderSpace:p,removeRow:f,getList:J,getRoot:Q,renderList:n,showLoad:y,updateDownloadRow:h,updateEditFileRow:w,fileInEditRow:g,getDomPanel:P}},function(e,t,a){"use strict";function i(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}var n=a(21),o=a(22),r=a(23),l=a(25);G.initInFolder=!1;{var s=function(e){try{G.setHistory({action:"fileList",params:{folderId:"/",fname:!1}})}catch(t){}if(""===e)l.init();else try{e=JSON.parse(e)}catch(t){return l.init(),void 0}if("fileList"===e.action){var a=e.params;a="object"===("undefined"==typeof a?"undefined":i(a))?a:{};var s=a.folderId;"/"===s?l.init():(G.initInFolder=s,l.getList({})(),n["folder.open"](s,a.fname))}else"search"===e.action&&!function(){var t=e.params;t="object"===("undefined"==typeof t?"undefined":i(t))?t:{};var a=t.keyword;$("#inputSearch").val(a);var n=t.files[0];r.search(void 0,function(e){var t=!0,i=!1;return function(){if(t&&(o["file.getAttr"](e,a),t=!1),!i){{"#"+("/"+e.busId+e.fileId).replace(/\//gi,"-")}i=!0}}}(n))}()};!function(){window.addEventListener("storage",function(e){if("notifyOtherGroup"===e.key){var t={};try{t=JSON.parse(e.newValue)}catch(e){return console.log("decode JSON fail"),void 0}if(t.gc===G.info.gc){var a=t.webParams;s(a)}}})}()}e.exports={action:s}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e){"use strict";function t(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function a(){var e={};if(window.external&&j.getTaskList){var a=j.getTaskList();if("string"!=typeof a&&(a=""),""===a)e.map={},e.status="busy";else if("{}"===a)e.map={},e.status="ok",e.empty=!0;else{try{e.map=JSON.parse(a)}catch(i){console.error("客户端接口getTaskList返回的数据有问题?parse出错["+a+"]")}"object"===t(e.map)&&null!==e.map?e.status="ok":(e.map={},e.status="parseerror")}}else e={map:{},status:"ok",empty:!0};return e}function i(){var e={};if(window.external&&j.getCompleteTaskList){var a=j.getCompleteTaskList();if("string"!=typeof a&&(a=""),""===a)e.map={},e.status="busy";else if("{}"===a)e.map={},e.status="ok",e.empty=!0;else{try{e.map=JSON.parse(a)}catch(i){console.error("客户端接口getCompleteTaskList返回的数据有问题?parse出错["+a+"]")}"object"===t(e.map)&&null!==e.map?e.status="ok":(e.map={},e.status="parseerror")}}else e={map:{},status:"ok",empty:!0};return e}function n(e){if(window.external&&j.getTaskInfo){j.getTaskInfo(e)}return ret}function o(e,t){var a=void 0;return e||(e=1),window.g_flag_upload_temp&&(e=2),"addUploadTask"in j&&(a=j.addUploadTask(e,t)),a}function r(e,t,a,i){var n=arguments.length<=4||void 0===arguments[4]?!1:arguments[4],o=arguments.length<=5||void 0===arguments[5]?!1:arguments[5],r=void 0;return window.external&&j.addDownloadTask?(a+="",r=j.addDownloadTask(e,t,a,i,n||!1,o)):r=-1,r}function l(e,t,a){var i=void 0;return window.external&&j.downloadByXF?(a+="",i=j.downloadByXF(e,t,a),console.debug(i)):i=-1,i}function s(e,t,a){var i=void 0;return i=window.external&&j.forwardFile?j.forwardFile(t,e,a):-1}function d(e,t,a){var i=void 0;return i=window.external&&j.forwardFileToDataLine?j.forwardFileToDataLine(t,e,a):-1}function c(e,t,a,i){var n=void 0;return console.log("client",e,t,a,i),window.external&&j.addContinueUploadTask?(n=j.addContinueUploadTask(e,t,a,i),console.log(n)):n=-1,n}function f(e){var t=void 0;return t=window.external&&j.removeTask?j.removeTask(e):-1}function u(e){var t=void 0;return t=window.external&&j.removeCompleteTask?j.removeCompleteTask(e):-1}function p(e){var t=void 0;return t=window.external&&j.pauseTask?j.pauseTask(e):-1}function m(e){var t=void 0;return t=window.external&&j.resumeTask?j.resumeTask(e):-1}function v(){var e=top.external&&top.external.CallHummerApi;if(e){var t=void 0;try{return t=e.apply(this,arguments),t=JSON.parse(t)}catch(a){return!1}}return!1}function h(){if(!G.mac)return v("IM.GetVersion");try{var e=j.getVersion();return{errorCode:0,version:e}}catch(t){return{errorCode:1,version:0}}}function g(){if(window.G_DEBUG)return!0;var e=v("Contact.IsOnline");return e?v("Contact.IsOnline").online:!1}function w(e,t){return t=t||1,v("Group.OpenGroupInfoCard",'{ "groupId" : "'+e+'", "tabId" : '+t+" }")}function b(e,t){var a=JSON.stringify({gc:""+e,webParams:t});return v("Group.OpenGroupFile",a)}function y(e){if(N)return N;var t={uin:e+""};t=JSON.stringify(t);var a=v("Contact.GetNickName",t);if(a&&0===a.errorCode&&a.nickName&&(N=a.nickName),G.mac)try{N=j.getNickName(e)}catch(i){N=e}return N?N:e}function x(){return v("IM.GetClientKey")}function k(e){e+="&pictype=scaled&size=1024*1024";var t=void 0;return t=G.mac?window.external&&window.external.previewPicture(e):v("Misc.OpenWebPic",'{"url":"'+e+'"}')}function F(e,t){window.external&&window.external.previewFile(e,t)}function T(){var e=i();if(e.map)for(var t in e.map){var a=e.map[t];if(a.id){var n=u(a.id);-1===n&&console.warn("移除完成任务失败！")}}}function $(e,t,a){return G.mac?window.alert(a):v("Window.Alert",'{ "iconType" : '+e+', "title" : "'+t+'", "text" : "'+a+'" }')}function C(e,t,a){if(G.mac){var i=window.confirm(a);return{errorCode:0,ret:i}}return v("Window.Confirm",'{ "iconType" : '+e+', "title" : "'+t+'", "text" : "'+a+'" }')}function _(){var e=void 0;return e=window.external&&j.getUploadFiles?j.getUploadFiles():-1}function S(e,t,a){a||(a=1);var i=void 0;return i=window.external&&j.uploadFiles?j.uploadFiles(e,t,a):-1}function M(e,t,a){console.log(e,t);var i=void 0;return a||(a=1),"onlineEditFile"in j&&(i=j.onlineEditFile(e,t,a)),i}function D(e){var t=void 0;return remotetype||(remotetype=1),t=window.external&&j.setUploadFileRemotePath?j.setUploadFileRemotePath(e):-1
}function R(e){var t=void 0;return t=window.external&&j.addMultiDownloadTasks?j.addMultiDownloadTasks(e):-1}var j=top.external,N=null;e.exports={getVersion:h,getBatchFiles:_,batchUpload:S,setUploadFileRemotePath:D,getTaskListAdv:a,getCompleteTaskListAdv:i,addUploadTask:o,addDownloadTask:r,addDownloadFast:l,addContinueUploadTask:c,removeTask:f,removeCompleteTask:u,pauseTask:p,resumeTask:m,getTaskInfo:n,forwardFile:s,forwardFileToDataLine:d,callHummerApi:v,getNickName:y,isOnline:g,getClientKey:x,preview:k,previewFile:F,clearClist:T,alert:$,confirm:C,openGroupInfoCard:w,openGroupFile:b,addMultiDownloadTasks:R,onlineEditFile:M}},,,function(e,t,a){"use strict";function i(e,t){c.trigger("menu.hide"),e.find(".panel-title span").text(t.title),e.find(".rename-hint").text(t.tips),e.find(".btn-ok").attr("data-action",t.action);var a=e.find(".new-name");t.showValue&&a.val(t.showValue),e.find(".error-message").removeClass("show"),e.addClass("open").focus(),t.showValue&&(a[0].inputStart=!0,a[0].focus(),a[0].select(),setTimeout(function(){a[0].inputStart=!1},200))}function n(e){e.removeClass("open")}function o(e){c.trigger("menu.hide");var t=$("#containerFolderTreePanel");t.html(s.folderTreePanel(e)),d.render(t.find(".folder-tree-box")),t.find("#folderTreePanel").addClass("open")}function r(e,t){c.trigger("menu.hide"),e.addClass("open").focus(),t&&(t.hideAll?e.find(".panel-footer").addClass("hide"):e.find(".panel-footer").removeClass("hide"),t.hideOk?e.find(".btn-ok").addClass("hide"):e.find(".btn-ok").removeClass("hide"),t.closeText?e.find(".btn-no").text("确定").val("确定"):e.find(".btn-no").text("取消").val("取消"),e.find(".panel-title span").text(t.title),e.find(".panel-content").html(t.text),e.find(".btn-ok").attr("data-action",t.action))}function l(){$(".panel-overlay").removeClass("open")}var s={folderTreePanel:a(164)},d=a(137),c=$(G.handler);c.bind("panel.hideAll",l),e.exports={show:i,hide:n,hideAll:l,showFolderTreePanel:o,showBatchPanel:r}},function(e,t,a){"use strict";function i(){var e=$.trim(n.find(".new-name").val()),t={parent_id:"/",name:e};l.createFolder(t).done(function(e){var t=d.filterFolder(e.folder_info);G.folderNum++,report("createFolderSuc"),d.addData(t),o.appendFold(t),s.hideAll(),c.trigger("toast.show",{type:"suc",text:"新建文件夹成功"})}).fail(function(e){405===e.ec&&(G.canCreateFolder=!1),r.showError(e.ec,n),report("newFolderError")})}var n=$("#folderPanel"),o=a(25),r=a(138),l=a(92),s=a(67),d=a(77),c=$(G.handler);e.exports={createFolder:i}},function(e,t,a){"use strict";function i(e){if(0===e.errorCode&&e.ret){var t={id:G.selectRow.id};r.deleteFolder(t).done(function(e){if(e.ec)return client.alert(2,"提示","删除文件夹失败"),void 0;G.canCreateFolder=!0;var t=G.folderMap()[G.selectRow.id];G.folderNum--,G.folderNum<0&&(G.folderNum=0),l.remove(t.id),o.removeRow(t),d.setClist(t,"delete"),s.trigger("toast.show",{type:"suc",text:"删除文件夹成功"}),report("delFolderSuc")}).fail(function(){client.alert(2,"提示","删除文件夹失败"),report("delFolderError")})}}function n(){if(s.trigger("menu.hide"),G.selectRow){var e=G.getReportInfo(G.selectRow);e.ver3=6,reportNew("folderRightMenuClick",e),report("deleteFolder",G.module());var t=client.confirm(2,"提示","你确定要删除"+G.selectRow.fnameEsc+"以及文件夹内的所有文件吗？");t&&i(t)}}var o=a(25),r=a(92),l=a(77),s=$(G.handler),d=a(15);e.exports={showDeleteFolder:n,deleteFolder:i}},function(e,t,a){"use strict";function i(){if(c.trigger("menu.hide"),G.selectRow){var e=$.trim(n.find(".new-name").val()),t=G.selectRow.id,a={folder_id:t,new_name:e};return l.renameFolder(a).done(function(){var a=G.folderMap()[t];a.fname=e,a.fnameEsc=e,a.name=e,a.modify_time=Math.ceil((new Date).getTime()/1e3),a=d.updateFolder(a),$("[data-path='"+t+"']").find(".name").html(e),c.trigger("toast.show",{type:"suc",text:"重命名文件夹成功"}),o.updateRow(a),s.hideAll()}).fail(function(e){r.showError(e.ec,n),report("renameFolderError")}),!0}}var n=$("#folderPanel"),o=a(25),r=a(138),l=a(92),s=a(67),d=a(77),c=(a(139),$(G.handler));e.exports={renameFolder:i}},function(e,t,a){"use strict";function i(){c.getTips()||(report("showOldVersion"),n())}function n(){$("#updateQQ").addClass("open"),$("#updateQQTips").text("当前版本不支持文件夹下载功能，请升级QQ至最新版本后体验"),$("#updateQQ").find("input.btn-notips").attr("data-action","panel.close")}function o(e){var t=document.createElement("div"),a=this.getBoundingClientRect(),i=function(){var e=document.height,t=G.getDomPanel(),a=t[0].scrollHeight;return a+52>e?!0:!1};t.innerHTML='<div class="img"></div>',t.className="file-animate files-"+e.icon;var n=window.innerWidth-a.left-76;G.info.isAdmin&&(n+=47),i()&&(n-=20),G.mac&&(n=177),t.style.right=n+"px",t.style.top=a.top-20+"px",document.body.appendChild(t),setTimeout(function(){document.body.removeChild(t)},1500)}function r(e){if(G.info.version<u)return i(),void 0;if(report("downloadFolder"),e){o.call(this,e);var t=e.id,a=e.fnameEsc;console.log(e,t,a),client.addDownloadTask(t,a,0,!0,!0)}f.trigger("menu.hide")}function l(){r.bind(this)(G.selectRow)}function s(){var e=$(this).closest(".list-item"),t=e.data("path"),a=d.getData(t);r.bind(this)(a)}var d=a(77),c=a(15),f=$(G.handler),u=G.folderVersion;e.exports={download:l,downloadByBtn:s}},function(e,t,a){"use strict";function i(){report("propFolder"),o.render(n,G.selectRow),n.addClass("open"),r.trigger("menu.hide"),n.find(".aria-hide")[0].focus();var e=G.getReportInfo(G.selectRow);e.ver3=5,reportNew("folderRightMenuClick",e)}var n=$("#folderPropertyPanel"),o=a(87),r=$(G.handler);e.exports={show:i}},function(e,t,a){"use strict";function i(e,t){function a(){t&&(n={fnameEsc:t}),l.updataFolderHeader(n);var e=location.hash;e=decodeURIComponent(e);var a={action:"fileList",params:{folderId:G.nowFolder,fname:n.fnameEsc}};location.hash=e.replace(/&webParams={.+}/,"")+"&webParams="+encodeURIComponent(JSON.stringify(a)),G.isHistory||G.setHistory(a),G.isHistory=!1}if(e=e||$(this).data("path"),report("clkFolder",G.module()),G.mac&&$(".mac-file-top").removeClass("user-module"),(0==G.module()||1==G.module())&&e===G.nowFolder)return console.log("open folder return!!!!!",G.module(),G.nowFolder,e),void 0;G.module("/"===e?0:1),G.nowFolder=e;var i=void 0;"/"===e&&(i=Math.random());var n=r.getData(e),s=G.getReportInfo(n);reportNew("doubleClickFolder",s);var d={folderId:e,random:i};t&&(d.folder={fnameEsc:t}),o.getList({paramsFilter:d,succ:a})()}function n(e,t){i.call(this,e,t),reportNew("wayRoot")}var o=a(25),r=a(77),l=a(87);e.exports={renderFolder:i,renderRootFolder:n}},function(e){"use strict";function t(){l.addClass("open")}function a(){l.removeClass("open")}function i(){l.removeClass("open")}function n(){console.log("ok move file")}function o(){console.log("move file create folder")}function r(e){var t=$(e.target).closest(".folder-list-item");$(".folder-list-item").removeClass("active"),t.addClass("active")}var l=$("#move-file-panel");e.exports={oveFileOpen:t,moveFileClose:a,moveFileCancel:i,moveFileOk:n,moveFileCreateFolder:o,fileActive:r}},function(e,t,a){"use strict";function i(e){delete e.status,e.isDown=!1,e.isDowning=!1,e.succ=!1,u.updateRow(e),p.removeOpenFolder(e),m.remove(e)}function n(e){if(v.trigger("menu.hide"),window.external&&window.external.isFileExist){var t=window.external.isFileExist(e);if("false"==t||t===!1){f.alert(2,"提示","此文件夹不存在，可能已被删除或被移动到其他位置");var a=c.getFile(e);return i(a),!1}}if(window.external&&window.external.openFile){var n=window.external.openFile(e);if("success"==n)return!0;if("file cannot open"!==n)return!1}if(window.external&&window.external.openFolder){var n=window.external.openFolder(e);if("success"!=n)return f.alert(2,"提示","此文件夹不存在，可能已被删除或被移动到其他位置"),!1}}function o(){var e=G.selectRow,t=e.localpath;v.trigger("menu.hide"),"string"==typeof t&&t.indexOf("OSRoot")<0&&(t="OSRoot:\\"+t),report("clkOpenFile",G.module());var a=G.getReportInfo(e);if(a.ver3=1,reportNew("folderRightMenuClick",a),window.external&&window.external.isFileExist){var n=window.external.isFileExist(t);if("false"==n||n===!1)return f.alert(2,"提示","此文件夹不存在，可能已被删除或被移动到其他位置"),i(e),!1}if(window.external&&window.external.openFolder){var o=window.external.openFolder(t);if("success"!=o)return f.alert(2,"提示","此文件夹不存在，可能已被删除或被移动到其他位置"),!1}}function r(e){if(!e){var t=$(this).parents(".file"),a=t.data("path");c.getData(a)}var n=e.localpath;if(v.trigger("menu.hide"),"string"==typeof n&&n.indexOf("OSRoot")<0&&(n="OSRoot:\\"+n),report("clkOpenFile",G.module()),window.external&&window.external.isFileExist){var o=window.external.isFileExist(n);if("false"==o||o===!1)return f.alert(2,"提示","此文件不存在，可能已被删除或被移动到其他位置"),i(e),!1}if(window.external&&window.external.openFile){var r=window.external.openFile(n);if(console.log("open file",r),"success"==r)return!0;if("file cannot open"===r){var l=f.confirm(2,"提示","此文件无法识别并打开，是否在文件夹中查看该文件？");if(0!==l.errorCode||!l.ret)return!1}}if(window.external&&window.external.openFolder){var r=window.external.openFolder(n);if("success"!=r)return f.alert(2,"提示","此文件夹不存在，可能已被删除或被移动到其他位置"),i(e),!1}}function l(){var e=this;for(v.trigger("menu.hide"),report("clkShowInFolder",G.module());!e.classList.contains("complete");)e=e.parentNode;var t=$(e),a=t.data("path"),i=c.getData(a),o=i._localpath||i.localpath||i.localname;o&&0!=o.indexOf("OSRoot:\\")&&(o="OSRoot:\\"+o);n(o)}function s(){var e=this;for(v.trigger("menu.hide");!e.classList.contains("complete");)e=e.parentNode;var t=$(e),a=t.data("path"),n=c.getData(a);if($("#boxTitle a").focus(),n){var o=n._localpath||n.localpath||n.localname;if(o){"string"==typeof o&&0!=o.indexOf("OSRoot:\\")&&(o="OSRoot:\\"+o);var r=!1;if(window.external&&window.external.openFolder){var l=window.external.openFolder(o);"success"==l?r=!0:f.alert(2,"提示","此文件夹不存在，可能被删除或被移动到其他位置")}0==r&&i(n)}else i(n)}}function d(){var e=G.selectRow;v.trigger("menu.hide");var t=G.getReportInfo(e);if(t.ver3=3,reportNew("fileRightMenuClick",t),e){report("clkShowInFolder",G.module());var a=e.localpath;if(a){"string"==typeof a&&0!=a.indexOf("OSRoot:\\")&&(a="OSRoot:\\"+a);var n=!1;if(window.external&&window.external.openFolder){var o=window.external.openFolder(a);console.log(o),"success"==o?n=!0:f.alert(2,"提示","此文件夹不存在，可能被删除或被移动到其他位置")}0==n&&i(e)}else i(e)}}var c=a(77),f=a(64),u=a(25),p=a(86),m=a(15),v=$(G.handler);e.exports={openByFolder:o,openByPath:r,openByBox:l,openByMenu:d,openFolderByBoxIco:s,changeOpenFolder2Download:i}},function(e,t,a){"use strict";function i(e){var t=!1,a=new RegExp('^[^/\\\\:?*"<>|]+$');return t=a.test(e),console.log("reg",a.test(e)),t}function n(){var e=$.trim(this.value);e.length>l&&!input&&(this.value=e.substr(0,l))}function o(e){var t=this.inputStart,a=this.value,n=$(this).parents(".panel-overlay"),o=$(this).parent().find(".bubble"),r=$("#folderPanel .btn-ok").data("action");if(""===$.trim(a))return $(this).parent().find(".error-message").removeClass("show"),n.find(".btn-ok").prop("disabled",!0),o.hide(),void 0;if(i(a))$(this).parent().find(".error-message").removeClass("show"),o.hide();else{var s='文件夹名称不能包含 \\ / : * ? " < > |';"file.renameFile"===r&&(s='文件名称不能包含 \\ / : * ? " < > |'),$(this).parent().find(".error-message").text(s).addClass("show"),o.html('<span class="bot"></span><span class="top"></span>'+s).show(),n.find(".btn-ok").prop("disabled",!0)}0===a.length?n.find(".btn-ok").prop("disabled",!0):0!==a.length&&i(a)&&n.find(".btn-ok").prop("disabled",!1),a.length>l&&!t&&(this.value=a.substr(0,l)),$("#folderPanel [data-action]").length&&e&&13==e.keyCode&&!t&&$("#folderPanel [data-action]").click()}function r(){$("#folderPanel .error-message").removeClass("show")}{var l=(a(18),48);a(68)}e.exports={"input.keyup":o,"input.focus":r,"input.blur":n,folderName:i}},function(e,t,a){"use strict";function i(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function n(e){if(1===e.orcType){var t=1===G.module()?1:0,a=$("#"+e.domid),i=a.attr("idx"),n=t;"undefined"!=typeof i&&(n+="_"+i);var o=e.uin===G.info.uin?1:2;return{ver1:e.isDown?1:2,ver2:G.info.isAdmin?1:2,ver3:o,ver4:encodeURIComponent(e.fname),ver5:encodeURIComponent(e.filetype),ver6:n}}if(2===e.orcType){var t=0,a=$("#"+e.domid),i=a.attr("idx"),r=t;"undefined"!=typeof i&&(r+="_"+i);var o=G.info.uin===e.uin?1:2;return{ver1:e.filenum===e.downNum?1:2,ver2:G.info.isAdmin?1:2,ver3:o,ver4:encodeURIComponent(e.name),ver5:r}}return!1}function o(){if("/"===G.nowFolder){x.text(G.file.capacityused+"/"+G.file.capacitytotal),$("#fileNumText").text(G.file.allnum),$("#macFileNums").text("共"+G.file.allnum+"个文件");var e=parseInt(G.file.cu/G.file.ct*100);k.css("width",e+"%"),$("#fileNum").removeClass("hide")}}function r(e){return e+="",e.replace(/\//gi,"-")}function l(e){var t={};for(var a in e)t[a]=e[a];return t}function s(e){return G.info.isAdmin||e===G.info.uin?!0:!1}function d(e){if(!e||"undefined"==typeof e.name)return console.log(!e,!e.name),void 0;if(e.filepath&&(e.filepath=e.filepath.replace(/\\\//g,"/")),!e.remoteType)switch(e.busid){case 102:e.remoteType=F;break;case 104:case 105:e.remoteType=T;break;default:e.remoteType=F}if(e.lp&&(e.localpath=G.mac?u.decode(e.lp):u.decode(e.lp).replace(/\\|\//g,"\\\\")),e.upsize<e.size)e.uin===G.info.uin&&(e.type="continueupload",e.status="continue",e.canContinueUpload=!0,e.taskStarttime=e.ct,e.styles="upload pause",e.csize=e.upsize,e.csizeStr=c.getSize(e.upsize),e.cPercent=0,e.upsize&&e.size&&(e.cPercent=100*e.upsize/e.size),e.notComplete=!0,e.result=1,h.parse(e));else{e.result=2,e.auditflag>0&&console.warn("auditFlag",e);{var t=(e.name,e.size);e.ct}e.down||(e.down=0),"图片"===e.filetype&&(e.result=3,G.info.isVisitor||(e.preview=!0)),e.remoteType===T&&e.isAdmin&&(e.canForever=!0);var a=0;102400>t?a=5:1048576>t?a=4:10485760>t?a=3:52428800>t?a=2:104857600>t&&(a=1);var i=[];e.isAdmin&&(e.canDelete=!0,e.canRename=!0,i.push("can_delete=1 "),i.push("can_rename=1 ")),e.preview&&i.push("can_preview=1 "),e.canForever&&i.push("can_forever=1 "),e.canDo=i.join(""),e.showMore="",""===e.canDo&&(e.showMore="disable_more"),e.sizeType=a,e.styleTemp||(e.styleTemp=""),e.styleIssucc||(e.styleIssucc=""),e.expireStr="",e.fileTitle=e.filename,e.remotetype===T&&(e.styleTemp="temp",e.expireStr=v.getExpriesDayNum(e.ttl)+"天后到期",e.fileTitle+=" (临时文件：剩余"+data.getExpriesDayNum(e.ttl)+"天)")}return e}var c=a(140),f=a(139),u=a(141),p=a(142),m=a(143),v=a(18),h=a(91),g=a(15),w=$(G.handler),b={},y=!1,x=$("#groupSize"),k=$("#groupSizeBar");G.getReportInfo=n,e.exports=b,b.getId=r,b.updateFile=function(e,t){"rename"===t&&e&&(e.mt=Math.ceil((new Date).getTime()/1e3),e.mtStr=f.getDateStr(e.mt),e.mtoStr=f.getorcDateStr(e.mt)),"permanent"===t&&e&&(delete G.fileMap()[e.filepath],e.id&&delete G.fileMap()[e.id],G.fileMap()[e.newFilePath]=e,e.filepath=e.newFilePath)},b.updateFolder=function(e){return delete G.folderMap()[e.id],e.modify_time=Math.ceil((new Date).getTime()/1e3),e.mt=e.modify_time,e.mtStr=f.getDateStr(e.modify_time),e.mtoStr=f.getorcDateStr(e.modify_time),G.folderMap()[e.id]=e,e},b.filterFolder=function(e){var t={fname:e.name,fnameEsc:u.decode(e.name),name:e.name,id:e.id,icon:"folder",ct:e.create_time,ctStr:f.getDateStr(e.create_time),mt:e.modify_time,mtStr:f.getDateStr(e.modify_time),mtoStr:f.getorcDateStr(e.modify_time),uin:e.owner_uin||G.info.uin,filenum:e.size,nick:e.owner_name||G.info.nickName,mnick:e.modify_name||G.info.nickName,muin:e.modify_uin||G.info.uin,orcType:e.type||2,domid:r(e.id),downNum:0},a=g.check(t.id);return a&&(t.localpath=a,t.succ=!0),t},b.addData=function(e){e&&(2===e.orcType?G.folderMap()[e.id]=e:G.fileMap()[e.filepath]=e)},b.getData=function(e){return G.folderMap()[e]||G.fileMap()[e]||!1},b.remove=function(e){G.folderMap()[e]&&delete G.folderMap()[e];var t=G.fileMap()[e];t&&(t.isRemoved=!0,delete G.fileMap()[e],delete G.fileMap()[t.filepath])},b.getFile=function(e,t){return G.fileMap()[e]||G.fileMap()[t]||!1},b.getTask=function(e){return G.cMap[e]||!1},b.setAllNum=function(e){G.file||(G.file={}),G.file.allnum=e.total||0},b.setAllSpace=function(e){G.file||(G.file={}),G.file.capacitytotal=c.getSize(e.totalSpace),G.file.capacityused=c.getSize(e.usedSpace),G.file.ct=e.totalSpace,G.file.cu=e.usedSpace},b.removeAllNum=function(e){G.file.allnum&&G.file.allnum--,1===e.remoteType&&(G.file.cu-=e.size,G.file.capacityused=c.getSize(G.file.cu))},b.addAllNum=function(){},b.updateAllNum=function(e){var t={files:[],action:""};e=v.extend(t,e);for(var a=e.action,i=e.files,n=0,r=i.length-1;r>=0;r--)n+=i[r].size;"add"===a?(G.file.allnum=G.file.allnum+i.length,G.file.cu+=n):"remove"===a?(G.file.allnum=G.file.allnum-i.length,G.file.cu-=n):console.log("illegal action"),o()},b.setRole=function(e){if(!y){y=!0;var t=e.userRole||0,a=e.openFlag||0,i=0,n=0,o=!1,r=3===e.userRole?!0:!1;t>=1&&4!==t?(i=1,1===t&&(n=1),o=!0):3===t&&1===a&&(r=!0),G.info.isAdmin=i,G.info.isMaster=n,G.info.isVisitor=r,G.info.isPublic=a,G.canCreateFolder=o,report("enter",a),report("showSearchBtn"),$("body").addClass("auth"+G.info.isAdmin)}},b.task2file=function(e){var t=e,a=t.filepath.substr(1,3);a=parseInt(a);var i=parseInt((new Date).getTime()/1e3,10),n=c.getFileName(t.filename);if("downloadcomplete"!==t.status)t.name=n.filename_name,t.fname=t.filename,t.fnameEsc=u.decode(t.filename),t.nameEsc=u.decode(n.filename_name),t.folderid=r(t.folderpath),t.down=0,t.filepath=t.filepath,t.fp=t.filepath.substr(4),t.domid=r(t.filepath),t.busid=a,t.filetype=c.getType(n.filename_suc),t.uin=G.info.uin,t.nick=G.info.nickName,t.upsize=t.filesize,t.temp=102==a?!1:!0,t.ttl=86400,t.ct=i,t.ctStr=f.dayStr(i),t.mt=i,t.mtStr=f.getDateStr(i),t.mtoStr=f.getorcDateStr(i),t.type=1,t.succ=!0,t.admin=!0,t.isDown=!0,t.remove=!0,t.rename=!0,t.size=t.size,t.canEdit=c.canEdit(t.filetype,t.admin),t.remoteType=102===a?1:2,t.parentId=t.folderpath||"/";else{var o=void 0,s=t.id;o=1===t.downloadtasktype?l(G.folderMap()[t.filepath]):l(G.fileMap()[t.filepath]),t=$.extend(!0,o,t),t.taskId=s,t.isDown=!0,t.succ=!0,t.domid=r(t.filepath)}return G.cMap[t.id]&&delete G.cMap[t.id],G.cMap[t.filepath]&&delete G.cMap[t.filepath],2===t.orcType&&(t.id=t.filepath),b.addData(t),t},b.setFileList=function(e,t){G.cMap||(G.cMap={});var a=[],i=[],n=[],o=[];t=v.extend({fn:"name",t:"bus_id",uin:"owner_uin",dt:"download_times",ut:"create_time",mt:"modify_time",lp:"local_path",ufs:"upload_size",fp:"id",fs:"size",owner_name:"owner_name"},t);var l=t.fn,h=t.t,y=t.uin,x=t.dt,k=t.ut,F=t.mt,T=t.lp,$=t.ufs,C=t.fp,_=t.fs,S=t.owner_name;e=e||[];for(var M=0,D=e.length;D>M;M++){var R=e[M];if(void 0===R.type&&(R.type=1),1===R.type){var j=c.getFileName(R[l]),N={t:R[h],exp:R.exp||0,lp:R[T],busid:R[h],fname:R[l],fnameEsc:u.decode(R[l]),name:j.filename_name,nameEsc:u.decode(j.filename_name),suf:j.filename_suf,icon:c.getIcon(j.filename_suf),domid:r("/"+R[h]+R[C]),filepath:"/"+R[h]+R[C],fp:R[C],admin:!1,filetype:c.getType(j.filename_suf),uin:R[y],nick:R[S],size:R[_],sizeStr:c.getSize(R[_]),upsize:R[$],temp:104===R[h]?!0:!1,down:R[x],ct:R[k],ctStr:f.dayStr(R[k]),mt:R[F],parentId:R.parent_id,mtStr:f.dayStr(R[F]),mtoStr:f.getorcDateStr(R[F]),orcType:R.type,md5:R.md5,safeType:R.safe_type,remove:!1,rename:!1,isDown:!1};R.gc&&(N.gc=R.gc),R.group_name&&(N.gname=R.group_name),N.admin=s(R[y]),N.admin&&(N.remove=!0,N.rename=!0),N.canEdit=c.canEdit(N.filetype,N.admin),N=d(N);var I=g.check(N.filepath);if(I?(N.isDown=!0,N.localpath=I,N.succ=!0,report("showOpenFile",G.module(),1)):report("showDownloadBtn",G.module(),1),reportNew("newFileShow",{ver1:N.isDown?1:2,ver2:G.info.isAdmin?1:2}),N.safeType){var O=G.getReportInfo(N);O.ver3=O.ver4,O.ver4=O.ver5,O.ver5=O.ver6,delete O.ver6,reportNew("blackExp",O)}3!==N.result||G.previewCache[N.filepath]||a.push(N),G.previewCache[N.filepath]&&(N.previewObj=G.previewCache[N.filepath]),G.fileMap()[N.filepath]=N,R[_]===R[$]?i.push(N):R[y]===G.info.uin&&(p.add(N),n.push(N))}else{var N=b.filterFolder(R);G.folderNum++,b.addData(N),o.push(N),reportNew("folderShow",{ver1:N.downNum===N.fileNum?1:2,ver2:G.info.isAdmin?1:2}),report("showOpenFile",G.module(),1)}}return G.topFolder={fname:"群文件",fnameEsc:"群文件",id:"/",icon:"folder",mt:0,mtStr:0,uin:0,filenum:0,nick:0,type:2},n.length>0&&(G.cList=n,w.trigger("box.renderNum")),a.length>0&&m.getThumb(a),o.length>0&&report("folderNum",G.module(),o.length),report("showSeeBtn",G.module()),{file:i,folder:o}};{var F=1,T=2;!function(){var e=window.external&&window.external.getPreviewSuffixConfig&&window.external.getPreviewSuffixConfig();if(null===e&&(e={content:[]}),"string"==typeof e)try{e=JSON.parse(e)}catch(t){}"object"!==("undefined"==typeof e?"undefined":i(e))&&(e={content:[]});var a={};if(e=e.content)for(var n=function(t){var i=e[t].suffix,n=e[t].maxsize,o=i.split(".");o.forEach(function(e){e&&(a[e]=n)})},o=0,r=e.length;r>o;o++)n(o,r);return function(e,t){var i=void 0;return(i=a[e])&&i>=t?!0:void 0}}()}b.clearComplete=function(){p.clearComplete()}},function(e,t,a){"use strict";function i(){var e=n.getCookie("uin");return e?(e+="",e.replace(/^[\D0]+/g,"")):0}var n=a(18),o=window.localStorage,r="newbie"+i(),l=function(){var e=$("#fileListDom"),t=e.find(".file").eq(0);if(console.log("getfileidx",G.nowFolder),t.length>0&&"/"===G.nowFolder){var a=t[0].offsetTop,i=$(".scroll-dom").height(),n=t.height();return i>a?a+76>i?{t:a-76,u:0}:{t:a+n,u:1}:!1}return!1},s=function(){$("#newBie").bind("click",function(){$("#newBie").hide();try{o.setItem(r,1)}catch(e){o.clear(),o.setItem(r,1)}})},d=function(){if("/"===G.nowFolder){var e=l();e?($("#newBie").show(),$("#newBieTips").css("top",e.t+78+"px"),e.u||$("#newBieTips").addClass("bottom"),s()):$("#newBie").hide()}else $("#newBie").hide()},c=function(){$("#newBie").remove()};$("body").bind("newbie",function(e){try{var t=o.getItem(r);t?c():d()}catch(e){console.info(e)}})},function(e,t,a){"use strict";function i(){var e=function(e){if("undefined"!=typeof T.x&&F){var t=e-T.x,a=Math.abs(t);F.width(a),0>t?F.css("margin-left",t+"px"):F.css("margin-left",0)}},t=function(e){if("undefined"!=typeof T.y&&F){var t=e-T.y,a=Math.abs(t);F.height(a),0>t?F.css("margin-top",t+"px"):F.css("margin-top",0)}},a=function(e){if(!P(e))return B(e),void 0;$(".selected").removeClass("selected");var t=T.y-x,a=C.y-x;$(e.target).parents(".group1111").length>0&&(a-=k);var i=Math.floor(t/v),n=Math.floor(a/v);0>i?i=0:i;var r=G.onlyGetDom().find(".list-item"),l=void 0;l=n>i?r.slice(i,n+1):i===n?[r.eq(n)]:r.slice(n,i+1),l.length>1&&$("body").addClass("drag-module");var s=!1;l.each(function(){this.classList.contains("file")&&(this.classList.add("selected"),s=!0)}),o.changeDownLoadBtn(s)};$(document).on("mousedown",".scroll-dom",function(e){H(),A();var t=O(e);if(t)return e.stopPropagation(),void 0;var a=function(){if(!U()){$(".selected").removeClass("selected");var e=i.clientX,t=i.clientY+g-f;F=$('<div id="'+h+'" class="drag-div"></div>'),F.css({top:t+"px",left:e+"px"}),T={x:e,y:t},c.append(F),w=!0,b=!1}},i=window.event||e,n=i.button;try{if(0===n){if(U())return;R(e);var o=$(e.target),r=o.hasClass("drag-dom");o.parents(".fold").length>0&&(b=!1,r=!1),o.hasClass("selected")||(o=o.parents(".selected")),b||o.hasClass("selected")?o.hasClass("selected")&&o.hasClass("file")||r?($(e.target).parents(".file").addClass("selected"),q.call(this,e)):a():a()}else 2===n&&I.call(this,i)}catch(e){console.log(e)}}),$(document).on("mousemove",".scroll-dom",function(i){try{var n=window.event||i,o=n.button;if(0===o){var r=n.clientY+g-f;b?z(i):w&&(e(n.clientX),t(r),C={x:n.clientX,y:r},a(i))}else w=!1}catch(i){}}),$(document).on("mouseup",".scroll-dom",function(e){B(e),$("body").removeClass("drag-module")}),$(document).on("click",function(){d.addClass("hide")}),$(document).bind("contextmenu",function(){return!1}),c.on("scroll",function(){g=this.scrollTop});var i=function(){800>=S?($("body").removeClass("mid-width"),$("body").removeClass("max-width"),$("body").addClass("min-width")):1200>=S?($("body").removeClass("mid-width"),$("body").removeClass("min-width"),$("body").addClass("mid-width")):($("body").removeClass("min-width"),$("body").removeClass("mid-width"),$("body").addClass("max-width"))};$(window).on("resize",function(){S=document.body.clientWidth,M=document.body.clientHeight,$(".scroll-dom").height(M-76),i()}),M=document.body.clientHeight,$(".scroll-dom").height(M-76),i()}function n(){$(".list-item").removeClass("selected"),this.classList.add("selected"),o.changeDownLoadBtn(this.classList.contains("file"))}Object.defineProperty(t,"__esModule",{value:!0}),t.init=i,t.listClick=n;var o=a(103),r=a(77),l=a(151),s=a(101),d=$("#customMenu"),c=$(".scroll-dom"),f=76,u=500,p={},m=0,v=44,h="dragDiv",g=0,w=!1,b=!1,y=!1,x=0,k=0,F=!1,T=void 0,C=void 0,_=void 0,S=document.body.clientWidth,M=document.body.clientHeight,D=function(){var e=G.onlyGetDom().find(".selected"),t=e.length,a=[],i=!1;G.selectRows=[];for(var n=0;t>n;n++){var o=e[n];if(o.classList.contains("fold"))i=o;else{var l=o.getAttribute("data-path"),s=r.getData(l);s&&(G.selectRows.push(s),a.push(s))}}return{list:a,fold:i}},R=function(){d.addClass("hide")},j=function(){w=!1,0!==$(".selected").length&&(b=!0)},N=function(e){b=!1;var t=function(){$(".hover").removeClass("hover"),$(".selected").removeClass("selected"),E()};if($("#dragItem .status").hasClass("disable"))return t(),void 0;var a=(e.clientY,D()),i=a.list,n=$(e.target);n.hasClass("fold")||(n=n.parents(".fold"));var o=n.data("path"),l=r.getData(o);l&&s.movelist(i,o,!0),y=!1,t()},I=function(e){var t=$(e.target),a=e.clientX,i=e.clientY;t.hasClass("list-item")||(t=t.parents(".list-item"));var n=D(),s=n.list,c={},f=void 0,u=function(e){var a=!1;if(t.hasClass("file")||t.hasClass("fold"))return a=!0;var i=t.data("path");return a=e?e&&e.filepath===i?!0:!1:!1};if(s.length>1&&t.hasClass("selected"))l.renderCustomMenu(d,s),f="chooseMenuShow",c.ver1=t.length>0?1:2,c.ver2=G.info.isAdmin?1:2,c.ver3=1===G.module()?0:1;else if($(".selected").removeClass("selected"),b=!1,u(s[0])){t.addClass("selected");var p=t.data("path"),m=r.getData(p);G.selectRow=m,G.selectRows=[m],c=G.getReportInfo(m),f=2===m.orcType?"folderRightMenuShow":"fileRightMenuShow",$(e.target).parents(".group1111").length>0&&(m.othergroup=!0),U()&&(m.issearch=!0),l.renderCustomMenu(d,m)}else f="blankRightMenuShow",c.ver1=t.length>0?1:2,c.ver2=G.info.isAdmin?1:2,c.ver3=1===G.module()?0:1,l.renderCustomMenu(d),o.changeDownLoadBtn(!1);reportNew(f,c),d.removeClass("hide");var v=d.width(),h=d.height();i+h>M&&(i+=M-(i+h)-10),a+v>S&&(a+=S-(a+v)-10),d.css({top:i+"px",left:a+"px"})},O=function(e){if(p.x||(p.x=e.clientX,p.y=e.clientY),Math.abs(e.clientX-p.x)<10&&Math.abs(e.clientY-p.y)<10)return!1;p.x=e.clientX,p.y=e.clientY;var t=+new Date,a=u>t-m;return m=t,a&&(b=!1,w=!1),a},L=function(e){try{var t=e.clientY-f+g,a=Math.ceil(t/v)-1;return G.onlyGetDom().find(".list-item").eq(a)}catch(i){return $("body")}},E=function(){$("#dragItem").remove()},P=function(e){var t=e.clientX,a=e.clientY;return t>10&&a>88&&S-10>t&&M-10>a?!0:(w=!1,b=!1,!1)},A=function(){$("#dragDiv").length&&$("#dragDiv").remove()},B=function(e){A(),b&&N(e),w&&j(e),F=!1,y=!1},z=function(e){if(y&&!U()){if(!P(e)||2===e.button)return E(),void 0;var t=e.clientX,a=e.clientY,i=t-_.x-32,n=a-_.y-50,o=$("#dragItem");(Math.abs(i)>5||Math.abs(a-_.y)>5)&&o.show(),o.css({top:_.y+n+"px",left:_.x+i+"px"});var l=L(e);if(l.hasClass("fold")){var s=l.data("path"),d=r.getData(s);$(".fold").removeClass("selected"),l.addClass("selected"),0===$("#folderNameWidth").length?$("body").append('<div id="folderNameWidth" style="opacity:0;display:inline-block;">'+d.fnameEsc+"</div>"):$("#folderNameWidth").text(d.fnameEsc);var c=$("#folderNameWidth").width();o.addClass("can"),o.find(".move-folder-name").text(d.fnameEsc),o.find(".move-info").css("width",c+66+"px")}else $(".fold").removeClass("selected"),o.removeClass("can")}},q=function(e){if(E(),P(e)&&!U()){b=!0,y=!0;var t=e.clientX-32,a=e.clientY-50,i=($(".selected").find(".file-icons").eq(0).html(),$(".selected").eq(0).data("path")),n=0;$(".selected").each(function(){$(this).hasClass("file")&&n++});var o=r.getFile(i),l=$('<div class="drag-item" id="dragItem"><div class="item"><div class="filesbig-'+o.icon+'_big"></div><span class="file-num">'+n+'</span></div><div class="status icon-cannot"></div><div class="bgs"></div><div class="move-info"> 移动到 <span class="move-folder-name"></span></div></div>');l.css({top:a+"px",left:t+"px"}),l.hide(),_={x:t,y:e.clientY},$("body").append(l),o.previewObj&&!function(){var e=o.previewObj.url+"&pictype=scaled&size=50*50",t=new Image;t.onload=function(){l.find(".filesmall-pic").css("background-image","url("+e+")").addClass("thumb")},t.onerror=function(){console.log("缩略图加载失败!",e)},t.src=e}()}},U=function(){return 3===G.module()},H=function(){3===G.module()?(x=58,k=58):(x=0,k=0)}},function(e,t,a){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(){for(var e={},t=0;t<d.length;t++){var a=d[t],i=void 0;for(i in a)a.hasOwnProperty(i)&&(e[i]=a[i])}return e["tips.close"]=function(){$("#alertTips").remove()},e}var o=a(144),r=i(o),l=a(79),s=i(l),d=[a(21),a(22),a(81),a(145),a(146),a(147),a(148),a(23),a(76),a(149),a(24),a(150)],c={"history.next":r.next,"history.pref":r.pref},f={"list.select":s.listClick};d.push(c),d.push(f),e.exports={getHandlerTasks:n}},function(e,t,a){"use strict";function i(){report("clkFiles");var e=$(".hover-border.file-num-toggle");m.is(":hidden")?(m.show(),e.addClass("active")):(m.hide(),e.removeClass("active"))}function n(){var e=G.selectRow.path,t=g.getData(e);"pic"===t.icon&&t.preview?F.removeClass("disable"):F.addClass("disable"),t.isDown?(k.attr("title","在文件夹中显示").attr("data-action","file.openFolderInBox"),k.find(".menu-item-label").text("在文件夹中显示")):(k.attr("title","另存为").attr("data-action","file.saveAs"),k.find(".menu-item-label").text("另存为")),t.temp&&t.admin?C.removeClass("disable"):C.addClass("disable"),t.admin?(T.removeClass("disable"),_.removeClass("disable"),report("showFolderMove")):(T.addClass("disable"),_.addClass("disable")),G.info.isAdmin?S.removeClass("disable"):S.addClass("disable"),3!==G.module()?S.show():S.hide()}function o(){var e=G.selectRow.path,t=g.getData(e);t&&(t.succ?(v.find(".open-in-folder").removeClass("disable"),v.find(".download-item").removeClass("disable")):(v.find(".open-in-folder").addClass("disable"),0===t.filenum?v.find(".download-item").addClass("disable").removeAttr("data-action"):(v.find(".download-item").removeClass("disable").attr("data-action","folder.download"),report("showDownloadBtn",G.module())))),G.oldVersion&&v.find(".download-item").addClass("disable").removeAttr("data-action")}function r(e){$(".list-item").removeClass("active"),e.addClass("active")}function l(){var e=this,t=$(this).parents(".list-item"),a=t.data("path"),i=void 0,l=void 0;if(r(t),report("clkShowBtn",G.module()),l=g.getData(a),2===l.orcType?(i="fold",report("clkFolderMore",G.info.isAdmin?0:1)):1==l.orcType&&(i="file",l.succ?report("clkUnMore"):report("clkMore")),G.selectRow=l||{},G.selectRow.path=a,G.selectRow.type=i,G.selectRows=[G.selectRow],"fold"===i)b!==i&&h.renderFolder(),o();else if("file"===i)if(b===i)n();else{h.renderFile(),y=$("#fileFoward"),x=$("#fileFowardTo"),k=$("#fileOpenFolder"),F=$("#filePreview"),T=$("#renameFile"),C=$("#foreverFile"),_=$("#fileDelete"),S=$("#fileMove");{$("#menuPreview")}n()}if(b=i,e==w&&"block"===v[0].style.display)v.css("display","none");else{var s=e.getBoundingClientRect(),d=$(e).parents(".scroll-dom")[0],c=d.getBoundingClientRect(),f=c.right-s.right,u=document.querySelector(".scroll-dom"),p=u.scrollTop,m=(u.scrollHeight,s.bottom+p-52);v.css("display","block");var M=v.get(0).offsetHeight;m+M>p+window.innerHeight&&(m=m-M-28),v.css({right:f+"px",top:m+"px"}),w=e}}function s(e){return 0==$(e).closest("#fileNumMenu").length}function d(e){return 0==$(e).closest("#fileMoreMenu").length&&0==$(e).closest(".file-more").length}function c(e){if(s(e)){m.hide();var t=$(".hover-border.file-num-toggle");t.removeClass("active")}d(e)&&v.hide()}function f(){"LI"===this.nodeName&&reportNew("blankRightMenuClick",{ver1:G.customMenuLength?1:2,ver2:G.info.isAdmin?1:2,ver3:3}),report("clkRefresh")}function u(){c(),report("clkFeed")}var p=$(G.handler),m=($("#fileNum"),$("#fileNumMenu")),v=($(".file-more"),$("#fileMoreMenu")),h=a(151),g=a(77),w=null,b=void 0,y=$("#fileFoward"),x=$("#fileFowardTo"),k=$("#fileOpenFolder"),F=$("#filePreview"),T=$("#renameFile"),C=$("#foreverFile"),_=$("#fileDelete"),S=$("#fileMove");
p.bind("menu.hide",c),e.exports={"menu.filenum":i,"menu.filemore":l,"menu.foldmore":l,"menu.hide":c,"menu.refresh":f,"menu.feedback":u}},function(e){"use strict";function t(e,t){return~v.indexOf(e)?(v=v.replace(new RegExp(e+"\\s{.*}","g"),e+" {"+t+"}"),m[0].innerHTML=v,void 0):(v+=".file-list .list-item "+e+" {"+t+"}",m[0].innerHTML=v)}function a(e,t){return~g.indexOf(e)?(g=g.replace(new RegExp(e+"\\s{width:\\s\\d*px;}","g"),e+" {width: "+t+"px;}"),h[0].innerHTML=g,void 0):(g+=".file-list .list-item "+e+" {width: "+t+"px;}",h[0].innerHTML=g)}function i(e){var i=$(this),n=i.data("resize-aim"),o=$("[data-resize-id="+n+"]"),r=l[n].related,d=$("[data-resize-related-id="+r+"]"),c=[],m=e.clientX,h=e.clientY,g=l[n].minWidth,w=l[r].minWidth;v="";for(var b in l)if(b!==n&&b!==r&&"name"!==b){var y=$("[data-resize-id="+b+"]"),G=y.width();a(l[b].fileRow,G),t(l[b].fileRow,"max-width: "+G+"px; min-width: "+G+"px;"),y.width(G).css({"max-width":G,"min-width":G}),c.push({$tab:y,aim:b})}var x=p.width();p.width(x).css("flex","initial"),a(".item-name-adjust",x),t(".item-name-adjust","flex: initial;"),u.addClass("ondrag"),f={x:m,y:h,aim:n,aimWidth:o.width(),related:r,relatedWidth:d.width(),aimMinWidth:g,relatedMinWidth:w,$drag:i,$aim:o,$related:d,aimRow:l[n].fileRow,$aimRow:$(l[n].fileRow),relatedRow:l[r].fileRow,$relatedRow:$(l[r].fileRow),dontMoveTabs:c},s=!0}function n(e){if(s&&0===e.button&&e.clientX&&!(d&&e.clientX>f.$drag.offset().left+5||(d&&(d=!1),c&&e.clientX<f.$drag.offset().left-5))){c&&(c=!1);var t=f.x-e.clientX,i=t+f.aimWidth,n=f.relatedWidth-t,o=0>=t,r=void 0,l=void 0;o?(r=Math.max(i,f.aimMinWidth),l=n,r<=f.aimMinWidth&&(l=n-(f.aimMinWidth-i))):(r=i,l=Math.max(n,f.relatedMinWidth),l<=f.relatedMinWidth&&(r=i-(f.relatedMinWidth-n))),f.aimWidth=r,f.relatedWidth=l,f.x=e.clientX,f.$aim.width(r),f.$related.width(l),a(f.aimRow,r),a(f.relatedRow,l),r<=f.aimMinWidth&&(d=!0,f.x=f.$drag.offset().left+5),l<=f.relatedMinWidth&&(c=!0,f.x=f.$drag.offset().left+5)}}function o(){s&&(console.log("release adjust tab mouse"),s=!1,p.css("flex",1),t(".item-name-adjust","flex: 1;"),u.removeClass("ondrag"),f.dontMoveTabs.forEach(function(e){var a=l[e.aim].minWidth;e.$tab.css({"max-width":"none","min-width":a}),t(""+l[e.aim].fileRow,"max-width: none; min-width: "+a+"px;")}),reportNew("adjustTab",{ver1:G.info.isAdmin?G.info.isMaster?1:2:3}))}function r(){console.log("reset Tab");for(var e in l){var t=$("[data-resize-id="+e+"]");t.css({width:l[e].initWidth,"max-width":"none","min-width":"none"})}v="",g="",m[0].innerHTML=v,h[0].innerHTML=g}var l={name:{initWidth:"auto",minWidth:80,fileRow:".item-name-adjust"},update:{initWidth:165,minWidth:96,fileRow:".item-time",related:"name"},size:{initWidth:80,minWidth:68,fileRow:".item-size",related:"update"},"upload-user":{initWidth:100,minWidth:82,fileRow:".item-user",related:"size"},source:{initWidth:100,minWidth:68,fileRow:".item-source",related:"upload-user"}},s=!1,d=!1,c=!1,f={},u=$("body"),p=$(".file-name-wrap"),m=($(".item-name-adjust"),$("<style></style>")),v="",h=$("<style></style>"),g="";$("head").append(m),$("head").append(h),$(document).on("mousedown",".tab-resize",i),$(document).on("mousemove",n),$(document).on("mouseup.adjustTab",o),$(window).on("resize",o),e.exports={resetTab:r}},function(e,t,a){"use strict";function i(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function n(e){console.log("收到客户端通知:",e);var t=void 0;if(!e)return console.error("[Client] msg is not exist!"),void 0;if("string"==typeof e)try{t=JSON.parse(e)}catch(a){console.error("[Client|init()]msg is string, but parse to object catch e!")}return"object"!==("undefined"==typeof t?"undefined":i(t))?(console.error("[Client|init()]after parse, got no object!"),void 0):(o(t),void 0)}function o(e){var t=e;if(t&&"object"===("undefined"==typeof t?"undefined":i(t)))if("Client"===t.from){var a=t.data;"string"==typeof a&&(a=JSON.parse(t.data)||{});var n=a.cmd||"";switch(n){case"OnFiletransporterEvent":r(a.param);break;case"OnGroupShareTabChangedEvent":l(a.param);break;case"OnGroupUploadFileListsEvent":s(param);break;case"OnGroupDropInGroupFolderUpload":s(param);break;default:console.warn("warn:预期外的message.cmd:"+n)}}else if(t.cmd&&"OnGroupUploadFileListsEvent"===t.cmd)s(t.param);else if(t.cmd&&"OnGroupDropInGroupFolderUpload"===t.cmd)d(t.param);else{var a=t.data;if(!a)return;"string"==typeof a&&(a=JSON.parse(a));var n=a.cmd||"";switch(n){case"jubao_close":c.hide();break;default:console.warn("warn:预期外的message.cmd:"+n)}}}{var r=a(161).fileEvent,l=a(149).groupEvent,s=a(162).uploadEvent,d=a(162).dropEvent,c=a(152),f=top;top.external}window.addEventListener("message",o),f.PostMessage=f.onClientEvent=n,window.onClientEvent=n,e.exports={}},function(e,t,a){"use strict";function i(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function n(e,t){return 0===t&&r.setAllNum(e),r.setRole(e),r.setFileList(e.list)}var o=a(92),r=a(77),l={};e.exports=l,l.getList=function(e){e=e||{};var t=e.folderId||"/",a=e.filterUin||void 0,r=0,l=25,s=e.filterCode||0,d=!1,c=void 0,f=!1,u=!1;return function(e,p,m){if(!u){if(u=!0,d)return p({ec:1e3,em:"no more items"}),void 0;var v={folder_id:t,start_index:r,cnt:l,filter_code:s,filter_uin:a},h=JSON.stringify(v)===c;if(c=JSON.stringify(v),f&&h)return console.info("same params will be ignored"),void 0;m&&m();var g=function(a){u=!1,f=!0;var i={list:a.file_list,total:a.total_cnt,totalSpace:a.total_space,usedSpace:a.used_space,userRole:a.user_role,openFlag:a.open_flag},o=r;G.nowFolder=t,a.file_list&&a.file_list.length&&(r+=a.file_list.length),0===a.next_index&&(d=!0),e(n(i,s)),(0===o||1===o)&&G.tab.resetTab()};"object"===("undefined"==typeof nodeData?"undefined":i(nodeData))?(g(nodeData),nodeData=!1):o.getFileList(v).done(function(e){g(e)}).fail(function(e){report("getListError"),u=!1,f=!1,p(e)})}}},l.getFileList=function(e){o.getFileList(e).done(function(e){if(0===e.total_cnt&&"/"===folderId)return suc(!1),void 0;var t={list:e.file_list,total:e.total_cnt,totalSpace:e.total_space,usedSpace:e.used_space,userRole:e.user_role,openFlag:e.open_flag};G.nowFolder=folderId,e.file_list&&e.file_list.length&&(startIndex+=e.file_list.length),0===e.next_index&&(isEnd=!0),suc(n(t))}).fail(function(e){e.fc&&1===e.fc})},l.setAllSpace=function(e){o.getSpace().done(function(t){var a={totalSpace:t.total_space,usedSpace:t.used_space};r.setAllSpace(a),e(t)}).fail(function(e){console.log(e)})}},function(e,t,a){"use strict";var i={},n=a(92),o=(a(77),a(18));e.exports=i,G.searchFuncSingtons={},i.search=function(e){var e=e||{},t=e.succ,a=e.fail,i=e.beforeRequest,r=e.isNew,l=o.extend({key_word:"",search_type:0,app_id:4},e.searchParams);G.mac&&(l.app_id=7);var s=!1,d=JSON.stringify(l);(r||void 0==G.searchFuncSingtons[d])&&(G.searchFuncSingtons[d]=function(){var e=25,t=void 0,a=0;return function(o,c){return a?(console.log("no more items"),void 0):(s!==!0&&(l.cookie=t,l.count=e,i&&i(),s=!0,n.search(l).done(function(e){r&&($("#searchReasult").text(e.total),$(".nav").addClass("hide"),$("#searchNav").removeClass("hide")),a=e.is_end,t=e.cookie,o&&o(e,d),s=!1,$("#fileNum").addClass("hide"),$("#searchDom").css("display","flex"),$("#folderName").addClass("hide")}).fail(function(e){c&&c(e),s=!1,$("#searchReasult").text(0),$("#searchDom").css("disolay","none"),$("#folderName").addClass("hide")})),void 0)}}()),G.searchFuncSingtons[d](t,a)},window.search=i.search},function(e,t,a){"use strict";function i(e,t){var a=b.find('[data-path="'+e+'"]').filter('[data-name="'+t+'"]');return a.length>0&&!a.hasClass("complete")?a:!1}function n(e){var t=b.find('[data-id="'+e+'"]');return t.length>0&&!t.hasClass("complete")?t:!1}function o(e){return 1===e.type||"upload"===e.type?n(e.taskId):2===e.orcType?n(e.taskId):i(e.filepath,e.filename)}function r(e){var t=o(e);if("remove"===e.status)return k--,g.removeEase(t),c(),void 0;var a=h({list:[e]});t&&t.replaceWith(a),("uploadcomplete"===e.status||"downloadcomplete"===e.status)&&($("#boxTitle").attr("class","box-title tri"),k--,c())}function l(e){var t=o(e);if(T=!0,!(t.length>0)){var a=h({list:[e]});x=!0,k++,c(),b.prepend(a),b.removeClass("empty")}}function s(){}function d(){}function c(){0>k&&(k=0),k?w.text(k).addClass("small"):w.text(k).removeClass("small")}function f(){T=!1}function u(e,t){var a=h(t);x?b.append(a):b.html(a)}function p(){if(F){F=!1;var e=[],t=G.cList,a=G.pList,i=G.compList;t=t.concat(a);var n=t.length;e=t,i&&(e=t.concat(i)),e=C(e),k=n,c(),u(null,{list:e}),e.length>0&&b.removeClass("empty"),i.length>0&&$("#boxTitle").attr("class","box-title tri")}}function m(){if(g.removeEase(b.find(".complete")),G.mac)for(var e=b.find(".err"),t=e.length,a=0;t>a;a++){var i=e.eq(a),n=i.data("id");y.trigger("task.removeOne",n),g.removeEase(i)}setTimeout(function(){0===b.find(".file2").length&&b.addClass("empty")},500),$("#boxTitle").attr("class","box-title empty")}function v(e){var t=b.find('[data-path="'+e.filepath+'"]');t.find(".go-folder").addClass("disable")}var h=a(153),g=a(18),w=$("#boxNum"),b=$("#boxListDom"),y=$(G.handler),x=!1,k=0,F=!0,T=!1,C=function(e){for(var t=[],a=[],i=0,n=e.length;n>i;i++)$.inArray(e[i].id,t)<0&&$.inArray(e[i].filepath,t)<0&&(e[i].id&&t.push(e[i].id),e[i].filepath&&t.push(e[i].filepath),a.push(e[i]));return a};e.exports={updateBoxRow:r,addBoxRow:l,removeBoxRow:s,cleanBox:d,render:u,firstRender:p,updateBoxNum:c,clearComplete:m,removePoint:f,removeOpenFolder:v}},function(e,t,a){"use strict";function i(e,t){var a=o(t);e.html(a)}function n(e){$("#searchDom").css("display","none"),e?($("#fileNum").addClass("hide").attr("data-action","menu.filenum"),$("#box").addClass("one"),$("#folderName").removeClass("hide"),$("#headerFolderName").text(e.fnameEsc),$("#createFolder").hide()):($("#fileNum").removeClass("hide").attr("data-action","menu.filenum"),$("#box").removeClass("one"),$("#folderName").addClass("hide"),G.canCreateFolder&&$("#createFolder").show())}{var o=a(154);a(155)}e.exports={render:i,updataFolderHeader:n}},function(e){"use strict";var t={},a=$("#groupSize"),i=$("#groupSizeBar");t.renderSpace=function(){if("/"===G.nowFolder){a.text(G.file.capacityused+"/"+G.file.capacitytotal),$("#fileNumText").text(G.file.allnum),$("#macFileNums").text("共"+G.file.allnum+"个文件");var e=parseInt(G.file.cu/G.file.ct*100);i.css("width",e+"%"),$("#fileNum").removeClass("hide"),$(".nav").addClass("hide"),$("#normalNav").removeClass("hide")}},e.exports=t},function(e,t,a){"use strict";function i(e,t){var a=t;n.check(a)||n.add(a),o.addBoxRow(a),"download"===a.type&&r.updateDownloadRow(a)}var n=a(142),o=a(86),r=a(25);$(G.handler).bind("client.addTask",i)},function(e,t,a){"use strict";function i(e,t){var a=t;n.updateBoxRow(a),"download"===a.type&&o.updateDownloadRow(a)}var n=(a(142),a(86)),o=a(25);$(G.handler).bind("client.updateTask",i)},function(e,t,a){"use strict";function i(e){try{if(!e)return;G.cMap||(G.cMap={}),e.taskId=e.id,e.taskId&&(G.cMap[e.taskId]=e),e.filepath&&(G.cMap[e.filepath]=e);var t=d.getType(e.type);d.check(t,e.status);var a=d.getWord(t,e.status),i=d.getClass(t,e.status);if("scan"===i)e.cPercent&&(a+=e.cPercent+"%"),e.cPercent=0,i="pre";else if("pre"===i)e.cPercent=0;else if("pause"===i||"continue"===i)e.csizeStr&&(a+=e.csizeStr),e.sizeStr&&(a+="/"+e.sizeStr);else if("err"===i)e.cPercent=0,e.status.indexOf("securityfail")>=0?(a="<i class='warn'></i>"+getErrorWording(e),e.securityattri>=1&&e.securityattri<=5&&(a+="<i class='security'></i>")):(-1e3==e.errorcode&&(a="该文件已被删除"),a="<i class='warn'></i>"+a);else if("progress"===i){e.speedStr&&(a+=e.speedStr);var n=void 0;if(e.speed){var o=Math.ceil((e.filesize-e.completesize)/e.speed),r=Math.floor(o/3600),l=Math.floor(o%3600/60);o=Math.floor(o%60),10>r&&(r="0"+r),10>l&&(l="0"+l),10>o&&(o="0"+o),n="<span class='lefttime'>"+r+":"+l+":"+o+"</span>"}if(f[e.filepath]){var s=new Date-f[e.filepath];s>3e3&&n&&(a+=n)}else e.filepath&&(f[e.filepath]=new Date)}else"complete"===i?(e.cPercent=100,a+=e.sizeStr):e.c_percent=0;var u=parseInt((new Date).getTime()/1e3,10);e.ctStr=c.dayStr(u),e.wording=a,e.styleType=t,"continueupload"===t&&(e.styleType="upload"),e.styleStatus=i,e.styles=e.failedFileList&&e.failedFileList.length>0?e.styleType:e.styleType+" "+e.styleStatus}catch(p){console.warn("parse",p,e)}}function n(e){e.taskId=e.id,1===e.downloadtasktype?(e.filepath=e.folderpath,e.orcType=2,e.icon="folder",e.name=G.mac?e.filename:s.getFolderName(e.localpath),e.filename=e.name,e.filelist=[],e.status||(e.status="downloadprogress"),e.filesize=e.foldersize):e.orcType=1,e.speedStr="",e.wording="",e.csizeStr="",e.updateFlag=!0;{var t=e.filename,a=e.filesize;e.createtime}e.speedStr=s.getSize(e.speed),0===e.speedStr?e.speedStr="":e.speedStr+="/S",void 0===e.size&&(e.size=e.completesize),e.sizeStr=s.getSize(a),e.csizeStr=s.getSize(e.completesize);var n=0;e.completesize>0&&e.filesize>0&&(n=Math.round(100*e.completesize/e.filesize)),e.cPercent=n;var o=t.lastIndexOf(".");return o>=0?(e.name=t.substr(0,o),e.suf=t.substr(o)):(e.name=t,e.suf=""),e.icon||(e.icon=s.getIcon(e.suf)),i(e),e}function o(e){var t=[];for(var a in e){var i=e[a];if(i=n(i),2!==i.downloadtasktype)t.push(i);else{var o=l(i.fordertaskid);o&&(o.fileTaskList||(o.fileTaskList=[]),o.fileTaskList.push(i.id))}}return t}function r(e){var t=[];for(var a in G.cMap){var i=G.cMap[a];(i.foldertaskid===e||i.folderpath===e)&&t.push(i)}return t}function l(e){return G.cMap[e]||!1}var s=a(140),d=a(157),c=(a(158),a(139)),f={};e.exports={get:n,getFolderTask:r,getOneTask:l,parse:i,cleanMap:o}},function(e,t,a){"use strict";var i=a(156),n={};e.exports=n;var o="//pan.qun.qq.com/cgi-bin/group_file/",r={getFileList:o+"get_file_list",renameFolder:o+"rename_folder",getFileInfo:o+"get_file_info",createFolder:o+"create_folder",deleteFolder:o+"delete_folder",renameFile:o+"rename_file",deleteFile:o+"delete_file",moveFile:o+"move_file",fileSearch:o+"search_file",getSpace:o+"get_group_space",previewFile:"//pan.qun.qq.com/cgi-bin/thumbnail",permanent:"//pan.qun.qq.com/cgi-bin/permanent",checkOneFile:"//pan.qun.qq.com/cgi-bin/checkAuditFlag",getFileAttr:o+"get_file_attr",checkVip:"//pan.qun.qq.com/cgi-bin/get_vip_info"};n.setPermanent=function(e){return e.gc||(e.gc=G.info.gc),i.ajax({url:r.permanent,type:"POST",data:e})},n.getFileList=function(e){return e.gc||(e.gc=G.info.gc),i.ajax({url:r.getFileList,type:"GET",data:e})},n.deleteFile=function(e){return e=e||{},e.gc||(e.gc=G.info.gc),e.bus_id&&(e.file_list=JSON.stringify({file_list:[{gc:G.info.gc,app_id:G.appid,bus_id:e.bus_id,file_id:e.file_id,parent_folder_id:e.parent_folder_id}]})),i.ajax({url:r.deleteFile,type:"POST",data:e})},n.renameFile=function(e){return e.gc||(e.gc=G.info.gc),i.ajax({url:r.renameFile,type:"POST",data:e})},n.moveFile=function(e){var t={};return t.file_list=JSON.stringify({file_list:e}),t.gc||(t.gc=G.info.gc),i.ajax({url:r.moveFile,type:"POST",data:t})},n.createFolder=function(e){return e.gc||(e.gc=G.info.gc),i.ajax({url:r.createFolder,type:"POST",data:e})},n.deleteFolder=function(e){return e.gc||(e.gc=G.info.gc),i.ajax({url:r.createFolder,type:"POST",data:e})},n.renameFolder=function(e){return e.gc||(e.gc=G.info.gc),i.ajax({url:r.renameFolder,type:"POST",data:e})},n.deleteFolder=function(e){return e.gc||(e.gc=G.info.gc),i.ajax({url:r.deleteFolder,type:"POST",data:e})},n.getPreview=function(e){return e.gc||(e.gc=G.info.gc),i.ajax({url:r.previewFile,type:"POST",data:e})},n.checkOneFile=function(e){return e.gc||(e.gc=G.info.gc),i.ajax({url:r.checkOneFile+"?_="+(new Date).getTime(),type:"POST",data:e})},n.search=function(e){return e.gc||(e.gc=G.info.gc),i.ajax({url:r.fileSearch,type:"GET",data:e})},n.getSpace=function(e){return e=e||{},e.gc||(e.gc=G.info.gc),i.ajax({url:r.getSpace,type:"GET",data:e})},n.getFileAttr=function(e){return e.gc||(e.gc=G.info.gc),i.ajax({url:r.getFileAttr,type:"GET",data:e})},n.checkVip=function(){var e={gc:G.info.gc};return i.ajax({type:"GET",data:e,url:r.checkVip+"?_="+(new Date).getTime()})}},function(e){"use strict";function t(){G.flagIsVip&&i.html('<i class="icons-vip"></i>极速下载特权</a>').addClass("is-vip")}function a(){G.flagIsVip&&(n.find(".tips-msg").text("尊贵的QQ超级会员，您已获得群文件极速下载特权，快去下载文件体验吧！"),n.find(".btn-ok").remove()),n.addClass("open"),n.find(".btn-ok").focus()}var i=$("#qqVip"),n=$("#openVip");e.exports={showQQVip:t,show:a}},function(e,t,a){(function(e){"use strict";function t(){var e,t,a,i=window.webkitPerformance?window.webkitPerformance:window.performance,n=["navigationStart","unloadEventStart","unloadEventEnd","redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","requestStart","responseStart","responseEnd","domLoading","domInteractive","domContentLoadedEventStart","domContentLoadedEventEnd","domComplete","loadEventStart","loadEventEnd"];if(i&&(e=i.timing)){e.domContentLoadedEventStart||n.splice(15,2,"domContentLoadedStart","domContentLoadedEnd");var o=[];for(a=0,t=n.length;t>a;a++)o[a]=e[n[a]];QReport.huatuo({appid:10016,flag1:1772,flag2:1,flag3:1,speedTime:o})}}function i(){var e=/\/\/(s[\d]*\.url\.cn|[\w\.\d]*\.qq.com|report\.url\.cn)/i;if(window.performance&&window.performance.getEntries())for(var t=window.performance.getEntries(),a=0,i=t.length;i>a;a++){var n=t[a].name;e.test(n)||(QReport.monitor(2154095),badjsReport.info(JSON.stringify({"被劫持":n})))}}var n=a(18),o=a(159),r={enter:{monitor:2057388,mac:2162523,tdw:["home","exp"]},clkGroupFile:{monitor:2057389,tdw:["home","Clk_grpfiles"]},clkFiles:{monitor:2057390,tdw:["home","Clk_files"]},openVip:{monitor:2057391,tdw:["home","Clk_open"]},clkFeed:{monitor:2057392,tdw:["home","Clk_feed"]},clkRefresh:{monitor:2057393,tdw:["home","Clk_refresh"]},forward:{monitor:0,tdw:["home","Clk_towards_mac"]},back:{monitor:0,tdw:["home","Clk_back"]},folder:{monitor:2057394,tdw:["file","exp"]},propFolder:{monitor:2057401,tdw:["file","Clk_property"]},folderBtnShow:{monitor:2057396,tdw:["file","exp_create"]},clkCreateFolder:{monitor:2057397,tdw:["file","Clk_create"]},createFolderSuc:{monitor:2057398,tdw:["file","create_suc"]},renameFolder:{monitor:2057400,tdw:["file","Clk_rename"]},clkFolderMore:{monitor:2057399,tdw:["file","Clk_more"]},downloadFolder:{monitor:2057399,tdw:["file","Clk_down"]},deleteFolder:{monitor:2057402,tdw:["file","Clk_delete"]},returnHome:{monitor:2057395,tdw:["file","Clk_home"]},folderTree:{monitor:2057403,tdw:["file","exp_select"]},createFolderInTree:{monitor:2057404,tdw:["file","select_create"]},createFolderInTreeSuc:{monitor:2057405,tdw:["file","select_suc"]},memberFileShow:{monitor:2057406,tdw:["mber_file","exp"]},memberClkFolder:{monitor:2057407,tdw:["mber_file","Clk_name"]},memberReturnHome:{monitor:2057408,tdw:["mber_file","Clk_home"]},uploadShow:{monitor:2057409,tdw:["oper_file","exp_button"]},clkUpload:{monitor:2057410,tdw:["oper_file","Clk_button"]},clkFolder:{monitor:2057411,tdw:["oper_file","Clk_category"]},showOpenFile:{monitor:2057412,tdw:["oper_file","exp_open"]},clkOpenFile:{monitor:2057413,tdw:["oper_file","Clk_open"]},showDownloadBtn:{monitor:2057414,tdw:["oper_file","exp_download"]},clkDownloadBtn:{monitor:2057415,tdw:["oper_file","Clk_download"]},showSeeBtn:{monitor:2057416,tdw:["oper_file","exp_see"]},clkShowBtn:{monitor:2057417,tdw:["oper_file","Clk_see"]},clkMore:{monitor:2057418,tdw:["oper_file","Clk_more"]},clkUnMore:{monitor:2057419,tdw:["oper_file","Clk_un_more"]},clkSaveAs:{monitor:2057420,tdw:["oper_file","Clk_save"]},clkRepost:{monitor:2057421,tdw:["oper_file","Clk_repost"]},clkPhone:{monitor:2057422,tdw:["oper_file","Clk_phone"]},clkRenameFile:{monitor:2057423,tdw:["oper_file","Clk_rename"]},clkForever:{monitor:2057424,tdw:["oper_file","Clk_forever"]},clkJubao:{monitor:2057425,tdw:["oper_file","Clk_report"]},clkDeleteFile:{monitor:2057426,tdw:["oper_file","Clk_delete"]},clkShowInFolder:{monitor:2057427,tdw:["oper_file","Clk_show"]},showSelectAll:{monitor:2057428,tdw:["all_oper","exp_box"]},clkSelectAll:{monitor:2057429,tdw:["all_oper","Clk_select"]},showBatch:{monitor:2057430,tdw:["all_oper","exp_mode"]},clkBatch:{monitor:2057431,tdw:["all_oper","Clk_all"]},batchSaveAs:{monitor:2057432,tdw:["all_oper","Clk_save"]},batchDownload:{monitor:2057433,tdw:["all_oper","Clk_download"]},batchDelete:{monitor:2057434,tdw:["all_oper","Clk_delete"]},batchDeleteSuc:{monitor:2057435,tdw:["all_oper","suc_delete"]},batchMove:{monitor:2057436,tdw:["all_oper","Clk_move"]},batchMoveSuc:{monitor:2057437,tdw:["all_oper","suc_move"]},showTask:{monitor:2057438,tdw:["task","exp"]},clkTask:{monitor:2057439,tdw:["task","Clk_task"]},showOneTask:{monitor:2057440,tdw:["task","exp_category"]},clkTaskName:{monitor:2057441,tdw:["task","Clk_name"]},showTaskShow:{monitor:2057442,tdw:["task","exp_see"]},clkTaskShow:{monitor:2057443,tdw:["task","Clk_see"]},showTaskPause:{monitor:2057444,tdw:["task","exp_start"]},clkTaskPause:{monitor:2057445,tdw:["task","Clk_stop"]},showTaskDelete:{monitor:2057446,tdw:["task","exp_delete"]},clkTaskDelete:{monitor:2057447,tdw:["task","Clk_delete"]},taskExp:{monitor:2057448,tdw:["task","exp_tips"]},clkTaskExp:{monitor:2057449,tdw:["task","Clk_tips"]},showSearchBtn:{monitor:2057450,tdw:["search","exp_button"]},clkSearchBtn:{monitor:2057451,tdw:["search","Clk_button"]},doSearch:{monitor:2057452,tdw:["search","Clk_search"]},showSearchRes:{monitor:2057453,tdw:["search","exp_result"]},clkSearchRes:{monitor:2057454,tdw:["search","Clk_result"]},clkSearchName:{monitor:2057455,tdw:["search","Clk_name"]},showFolderMove:{monitor:2057456,tdw:["oper_file","exp_move"]},clkFolderMove:{monitor:2057457,tdw:["oper_file","Clk_move"]},moveFileSuc:{monitor:2057458,tdw:["oper_file","move_suc"]},showOldVersion:{monitor:2057459,tdw:["oper_file","exp_upgradetips"]},clkUpdateQQ:{monitor:2057460,tdw:["oper_file","Clk_upgrade"]},clkNotRemind:{monitor:2057461,tdw:["oper_file","Clk_nomoreremind"]},showMoveFail:{monitor:2057462,tdw:["oper_file","exp_movefail"]},delFolderSuc:{monitor:2057463,tdw:["oper_file","delete_suc"]},jsError:{monitor:2069233},getListError:{monitor:2069234},delFileError:{monitor:2069235},moveFileError:{monitor:2069236},renameFileError:{monitor:2069237},newFolderError:{monitor:2069238},renameFolderError:{monitor:2069239},delFolderError:{monitor:2069240},cgiTimeout:{monitor:2069241},offlinePage:{monitor:2069242},nodePage:{monitor:2069243},folderNum:{tdw:["file","exp_folder"]},imgurl:{monitor:2200307},expnew:{monitor:2227445},newFileShow:{tdw:["file_single","exp"],monitor:2227391},doubleClickFile:{tdw:["file_single","Clk_open"],monitor:2227392},fileRightMenuShow:{tdw:["file_single","exp_right"],monitor:2227393},fileRightMenuClick:{tdw:["file_single","Clk_option"],monitor:2227394},folderShow:{tdw:["file_pack","exp"],monitor:2227395},doubleClickFolder:{tdw:["file_pack","Clk_open"],monitor:2227396},folderRightMenuShow:{tdw:["file_pack","exp_right"],monitor:2227397},folderRightMenuClick:{tdw:["file_pack","Clk_option"],monitor:2227398},blankRightMenuShow:{tdw:["blank","exp_right"],monitor:2227399},blankRightMenuClick:{tdw:["blank","Clk_option"],monitor:2227400},chooseRightMenuShow:{tdw:["choose","exp_right"],monitor:2227401},chooseRightMenuClick:{tdw:["choose","Clk_option"],monitor:2227402},chooseDrag:{tdw:["choose","Clk_drag"],monitor:2227403},chooseDragSinge:{tdw:["drag","Clk_drag"],monitor:2227404},wayNext:{tdw:["way","next"],monitor:2227405},wayPrev:{tdw:["way","previous"],monitor:2227406},wayRoot:{tdw:["way","Clk_root"],monitor:2227407},fileDownload:{monitor:2366515,tdw:["oper_file","down_in"]},blackExp:{monitor:2370085,tdw:["black","exp_foul"]},blackTips:{monitor:2370086,tdw:["black","exp_tip"]},blackDelete:{monitor:2370087,tdw:["black","delete"]},adjustTab:{tdw:["home","oper_title"],monitor:2227407}},l="Grp_pcfiles";window.badjsReport=o.createReport({id:1033}),window.addEventListener("load",function(){t(),i()}),window.addEventListener("error",function(){report("jsError")});var s=n.getParameter("gid");window.reportNew=function(t){var a=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];if(r[t]){var i=r[t];if(i.monitor&&QReport.monitor(i.monitor),i.mac&&QReport.monitor(i.mac),G.module&&(e=G.module()),i.tdw){var n={obj1:s,opername:l,module:i.tdw[0],action:i.tdw[1]};G.mac&&(n.action=i.tdw[1]+"_mac"),n=$.extend(n,a),QReport.tdw(n)}}},window.report=function(t){{var a=arguments.length<=1||void 0===arguments[1]?-1:arguments[1],i=arguments.length<=2||void 0===arguments[2]?0:arguments[2];arguments.length<=3||void 0===arguments[3]?0:arguments[3],arguments.length<=4||void 0===arguments[4]?0:arguments[4],arguments.length<=5||void 0===arguments[5]?0:arguments[5],arguments.length<=6||void 0===arguments[6]?0:arguments[6],arguments.length<=7||void 0===arguments[7]?0:arguments[7]}if(r[t]){var n=r[t];if(n.monitor&&QReport.monitor(n.monitor),n.mac&&QReport.monitor(n.mac),G.module&&(e=G.module()),n.tdw){var o={obj1:s,opername:l,module:n.tdw[0],action:n.tdw[1]};G.mac&&(o.action=n.tdw[1]+"_mac"),a>=0&&(o.ver1=a),i&&(o.ver2=i),QReport.tdw(o)}}}}).call(t,a(163)(e))},function(e,t,a){"use strict";function i(){v.getTips()?p.addUploadTask():(report("showOldVersion"),$("#updateQQ").addClass("open"),$("#updateQQTips").text("当前版本仅支持将文件上传至群文件首页，升级至QQ最新版本可上传文件至文件夹内。"),$("#updateQQ").find("input.btn-notips").attr("data-action","upload.cUpload"))}function n(){this.checked?(v.setTips(1),G.oldVersion=!0,$("#headerBatch .store").addClass("disabled"),report("clkNotRemind")):v.setTips(0)}function o(){$("#updateQQ").removeClass("open"),p.addUploadTask()}function r(){"LI"===this.nodeName&&reportNew("blankRightMenuClick",{ver1:G.customMenuLength?1:2,ver2:G.info.isAdmin?1:2,ver3:1}),G.info.version<h?i():G.folderMap()&&Object.keys(G.folderMap()).length>0||"/"!==G.nowFolder?p.getBatchFiles():(report("clkUpload",G.module()),p.addUploadTask())}function l(e){if(b){var t=void 0;if("string"==typeof e?(report("clkUpload",1),t=e):t=G.folderTree&&G.folderTree.selected&&G.folderTree.selected.id||"/",$("#inputFolderNameInFolderTree").length>0)g["folderTree.create"](null,function(){t=G.folderTree.selected&&G.folderTree.selected.id||"/";p.batchUpload(t,JSON.stringify(b));b=null,m.panel.hideAll()});else{{p.batchUpload(t,JSON.stringify(b))}b=null,m.panel.hideAll()}}}function s(e,t){if(t&&0!==t.length){var a=void 0;a=e;var i="上传到群文件？";if("/"!==a){var n=w.getData(a);i="上传到文件夹："+n.fnameEsc+"？"}var o=p.confirm(1,"提示",i);if(0===o.errorCode&&o.ret){report("clkUpload",1);{p.batchUpload(a,JSON.stringify(t))}m.panel.hideAll()}}}function d(e){var t=e[0],a=e.length,i=t.lastIndexOf("\\"),n=t.substr(i+1);G.mac&&(i=t.lastIndexOf("/"),n=t.substr(i+1)),console.log(t);var o=u.getFileName(n);return a>1?'<span class="name">'+o.filename_name+"</span><span>"+o.filename_suf+'</span>等<span class="blue">'+a+"</span>个文件":'<span class="name">'+o.filename_name+"</span><span>"+o.filename_suf+"</span>"}function c(e){if(b=e,"/"!==G.nowFolder)return l(G.nowFolder),void 0;var t={title:"上传文件",firstFileName:d(e),action:"上传到：",destFolder:"群文件",okAction:"file.batchUpload"};m.showFolderTreePanel(t);var a=$("#containerFolderTreePanel");a.find("#folderTreePanel").addClass("open"),report("folderTree",0)}function f(){report("clkUpdateQQ")}var u=a(140),p=a(64),m=($("#upload-panel"),{folderTree:a(137),showFolderTreePanel:a(67).showFolderTreePanel,panel:a(67)}),v=a(15),h=G.folderVersion,g=a(148),w=a(77),b=void 0;e.exports={batchuploadInFolder:s,upload:r,bupload:l,showUpload:c,noTips:n,cupload:o,update:f}},function(e,t,a){"use strict";function i(){if(!this.classList.contains("disable")){report("clkRenameFile",G.module());var e=G.selectRow,t=G.getReportInfo(e);t.ver3=7,reportNew("fileRightMenuClick",t),o.show(u,{title:"重命名",tips:"请为文件输入新名称",action:"file.renameFile",showValue:G.selectRow.nameEsc})}}function n(){var e=u.find(".new-name").val(),t=G.selectRow,a={file_id:t.fp,app_id:G.appid,new_file_name:e+t.suf,bus_id:t.busid,parent_folder_id:G.nowFolder};s.renameFile(a).done(function(a){0===a.ec&&(t.name=e,t.nameEsc=d.decode(e),t.fname=e+t.suf,t.fnameEsc=d.decode(t.fname),r.updateFile(t,"rename"),l.updateRow(t),p.trigger("file.thumbUpdate",t)),f.hideAll()}).fail(function(e){c.showError(e.ec,u),report("renameFileError")})}var o=a(67),r=a(77),l=a(25),s=a(92),d=a(141),c=a(138),f=(a(64),a(67)),u=$("#folderPanel"),p=$(G.handler);e.exports={showFileRename:i,renameFile:n}},function(e,t,a){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function o(e){var t=document.createElement("div"),a=this.getBoundingClientRect(),i=function(){var e=document.height,t=G.getDomPanel(),a=t[0].scrollHeight;return a+52>e?!0:!1};t.innerHTML='<div class="img"></div>',t.className="file-animate files-"+e.icon;var n=window.innerWidth-a.left-3;G.info.isAdmin&&"/"===G.nowFolder&&(n+=37),i()||(n+=10),G.mac&&(n=177),t.style.right=n+"px",t.style.top=a.top-20+"px",document.body.appendChild(t),setTimeout(function(){document.body.removeChild(t)},1500)}function r(e,t){if(e){var a=function(){var a=G.getReportInfo(e);if(1===t?(a.ver7=3===G.module()?2:1,reportNew("doubleClickFile",a)):2===t&&(a.ver3=1,reportNew("fileRightMenuClick",a)),e.isDown&&0!==t)return p.edit(e),{v:void 0};var i=a;i.ver1=G.module(),i.ver2=1,i.ver3=a.ver4,i.ver4=a.ver5,i.ver5=t,i.ver7=G.info.role,reportNew("fileDownload",i);var n=e.filepath,o=e.fnameEsc,r=e.size;e.isDowning=!0;var l={bs:e.t,fp:e.fp};v.checkOneFile(l).done(function(t){0===t.ec?(h.updateRow(e),g.addDownloadTask(n,o,r,!0,!1)):0===t.ec&&3===t.audit&&g.alert("该文件因多次被举报为色情文件，已被删除")}).fail(function(){})}();if("object"===("undefined"==typeof a?"undefined":n(a)))return a.v}}function l(){var e=G.selectRow;r(e,2)}function s(){var e=$(this),t=e.data("path"),a=m.getData(t);if(a.safeType){var i=G.getReportInfo(a);i.ver3=i.ver4,i.ver4=i.ver5,i.ver5=a.isDown?2:1,reportNew("blackTips",i),g.alert(2,"提示","该文件存在安全风险，无法正常使用")}else r(a,1)}function d(){var e=$(this).closest(".list-item"),t=e.data("path"),a=m.getData(t);G.saveasList[a.filepath]=1,r(a,0)}function c(){var e=this,t=G.selectRow;report("clkDownloadBtn",G.module()),t&&!function(){var a=t.filepath,i=t.fnameEsc,n=t.size;t.isDowning=!0;var r={bs:t.t,fp:t.fp},l=e;v.checkOneFile(r).done(function(e){0===e.ec?(o.call(l,t),h.updateRow(t),g.addDownloadTask(a,i,n,!0)):0===e.ec&&3===e.audit&&g.alert("该文件因多次被举报为色情文件，已被删除")}).fail(function(){})}()}function f(e){for(var t=function(e){var t=e.filepath,a=e.fnameEsc,i=e.size,n={bs:e.t,fp:e.fp};v.checkOneFile(n).done(function(e){0===e.ec?g.addDownloadTask(t,a,i,!0):0===e.ec&&3===e.audit&&g.alert("该文件因多次被举报为色情文件，已被删除")}).fail(function(){})},a=0,i=e.length;i>a;a++){var n=e[a];G.saveasList[n.filepath]=1,t(n)}}{var u=a(160),p=i(u),m=a(77),v=a(92),h=a(25),g=a(64);$(G.handler)}e.exports={download:c,downloadByDom:s,downloadByMenu:l,downloadByBtn:d,downloadBatch:f}},function(e,t,a){"use strict";function i(){if(!this.classList.contains("disable")){report("clkRepost",G.module());var e=G.selectRow,t=G.getReportInfo(e);if(t.ver3=4,reportNew("fileRightMenuClick",t),e){var a=e.filepath,i=e.fnameEsc,n=e.size;o.forwardFile(i,a,n),r.trigger("menu.hide")}}}function n(){if(!this.classList.contains("disable")){report("clkPhone",G.module());var e=G.selectRow,t=G.getReportInfo(e);if(t.ver3=5,reportNew("fileRightMenuClick",t),e){var a=e.filepath,i=e.fnameEsc,n=e.size,l=o.forwardFileToDataLine(i,a,n);console.log(l),r.trigger("menu.hide")}}}var o=(a(77),a(64)),r=(a(147),$(G.handler));e.exports={forward:i,toMobile:n}},function(e,t,a){"use strict";function i(){p.trigger("menu.hide"),report("clkDeleteFile",G.module());var e=G.selectRow;if(e){var t=G.getReportInfo(e);t.ver3=8,reportNew("fileRightMenuClick",t);var a=l.confirm(2,"提示","你确定要删除文件"+e.fnameEsc+"吗?");if(0===a.errorCode&&a.ret){var i={bus_id:parseInt(e.busid),file_id:e.fp,app_id:4,parent_folder_id:G.nowFolder};r.deleteFile(i).done(function(){if(o.remove(e.filepath),s.removeRow(e),u.setClist(e,"delete"),o.updateAllNum({files:[e],action:"remove"}),G.file.capacityused=d.getSize(G.file.cu),c.renderSpace(),p.trigger("toast.show",{type:"suc",text:"删除成功"}),e.safeType){var t=G.getReportInfo(e);
t.ver6=t.ver3,t.ver3=t.ver4,t.ver4=t.ver5,t.ver5=e.size,reportNew("blackDelete",t)}}).fail(function(){l.alert(2,"提示","删除失败"),report("delFileError")})}}}function n(e,t){p.trigger("menu.hide");var a=[],i={},n=1,m=0,v=0,h=function(){m++,m===n&&G.scrollHandler&&G.scrollHandler()},g=function(){var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];if(0!==e.length){for(var a={},i=[],f=0,p=e.length;p>f;f++)i[f]={gc:parseInt(G.info.gc),app_id:G.appid,bus_id:e[f].busid,file_id:e[f].fp,parent_folder_id:G.nowFolder};a.file_list=JSON.stringify({file_list:i}),r.deleteFile(a).done(function(a){var i=[];if(a.fail){i=a.fail;for(var r=e.length-1;r>=0;r--)$.inArray(e[r].fp,i)&&e.splice(r,1)}report("batchDeleteSuc");var l=e.length;v+=l,e.forEach(function(e){if(s.removeRow(e),o.remove(e.filepath),u.setClist(e,"delete"),e.safeType){var t=G.getReportInfo(e);t.ver6=t.ver3,t.ver3=t.ver4,t.ver4=t.ver5,t.ver5=e.size,reportNew("blackDelete",t)}}),o.updateAllNum({files:e,action:"remove"}),G.file.capacityused=d.getSize(G.file.cu),c.renderSpace(),h(v),m===n&&t(v)}).fail(function(){l.alert(2,"提示","删除失败"),$(G.handler).trigger("panel.hideAll"),report("delFileError")})}};if(e.forEach(function(e){e.remove&&(a.push(e),i[e.fp]=e)}),n=Math.ceil(a.length/f),1===n)g(a);else for(var w=0;n>w;w++){var b=a.slice(w*f,(w+1)*f);g(b)}return!0}var o=a(77),r=a(92),l=a(64),s=a(25),d=a(140),c=a(25),f=(a(147),2),u=a(15),p=$(G.handler);e.exports={removeOne:i,removeBatch:n}},function(e,t,a){"use strict";function i(e){e.usedTime++,d.trigger("toast.hide"),l.preview(e.previewObj.url)}function n(){var e=arguments.length<=0||void 0===arguments[0]?!1:arguments[0],t=void 0,a=$(this);if(e)t=e;else{var n=a.data("path");if(t=r.getFile(n),!t){var o=G.selectRow.path;t=r.getFile(o)}if(!t){var f=G.selectRow.path;t=r.getFile(f)}}if(t){if(t.safeType){var u=G.getReportInfo(t);return u.ver3=u.ver4,u.ver4=u.ver5,u.ver5=t.isDown?2:1,reportNew("blackTips",u),l.alert(2,"提示","该文件存在安全风险，无法正常使用"),void 0}var p=t.filepath,m=(t.remotetype,t.fnameEsc||t.fname),v=t.size,h=t.filetype;if($.inArray(h,c)>=0)v>20971520?l.alert(2,"提示","图片太大不支持预览，请直接下载"):(t.usedTime++,d.trigger("toast.show",{type:"wait",text:"正在加载预览图…"}),s.getOneThumb(t,i));else try{l.previewFile(p,m)}catch(g){console.log(g)}}}function o(){if(!this.classList||!this.classList.contains("disable")){d.trigger("menu.hide");var e=G.selectRow;e&&n(e)}}var r=a(77),l=a(64),s=a(143),d=$(G.handler),c=["图片"];e.exports={preview:n,menupreview:o}},function(e,t,a){"use strict";function i(e){if(e){var t=+new Date;e.mt=Math.floor(t/1e3),e.mtStr=w.getDateStr(e.mt),e.mtoStr=w.getorcDateStr(e.mt),c.removeFold(e),c.appendFold(e)}u["panel.close"]()}function n(){if(!this.classList||!this.classList.contains("disable")){var e=G.selectRows;if(!e)return badjsReport.info("无选择目标"),void 0;var t=e[0],a=G.getReportInfo(t);e.length>1?reportNew("chooseRightMenuClick",a):(a.ver3=5,reportNew("fileRightMenuClick",a));var i=G.folderMap()[G.nowFolder],n={title:"移动文件",firstFileName:e[0].fname,fileNum:e.length,action:"移动到：",destFolder:"/"===G.nowFolder?"群文件":i.fname,okAction:"file.move"};s.showFolderTreePanel(n);var o=$("#containerFolderTreePanel");o.find(".active .aria-hide").eq(0).focus(),report("folderTree",1),report("clkFolderMove")}}function o(e,t,a){var n=[],o={};if(1===e.length){var r=g.getData(e[0].filepath);if(r&&r.safeType)return v.alert(2,"提示","该文件存在安全风险，无法正常使用"),void 0}else for(var l=e.length;l--;){var r=g.getData(e[l].filepath);r&&r.safeType&&e.splice(l,1)}for(var s=e.length-1;s>=0;s--){var p=e[s];(G.info.isAdmin||G.info.uin===p.uin)&&(n.push({file_id:p.fp,bus_id:parseInt(p.busid),parent_folder_id:p.parentId,dest_folder_id:t,app_id:G.appid,gc:G.info.gc}),o[e[s].fp]=e[s])}if(m.exit(),e.length===n.length){var w=function(){F++,F>=k&&h.trigger("toast.hide")},y=function(){var e=arguments.length<=0||void 0===arguments[0]?[]:arguments[0];0!==e.length&&d.moveFile(e).done(function(n){w();var r=e;if(n.fail){var l=[];try{l=JSON.parse(n.fail).fail}catch(s){}for(var d=l.length-1;d>=0;d--)o[l[d]]&&r.splice(d,1)}e.length>1?(report("batchMoveSuc"),a&&reportNew("chooseDrag",{ver1:1,ver2:G.info.isAdmin?1:2,ver5:1})):(report("moveFileSuc"),a&&reportNew("chooseDragSinge",{ver1:1,ver2:G.info.isAdmin?1:2,ver5:1}));for(var d=r.length-1;d>=0;d--){var f=r[d],u="/"+f.bus_id+f.file_id;f=G.fileMap()[u],f.parentId=t,g.updateFile(f,"rename"),c.removeRow(f)}var p=void 0;(p=G.folderMap()[t])&&(p.filenum+=r.length,$('[id="'+p.domid+'"]').find(".file-size").html(p.filenum+"个文件")),i(p)}).fail(function(t){w(),f.showError(t.ec),report("showMoveFail"),report("moveFileError"),a&&(e.length>1?reportNew("chooseDrag",{ver1:1,ver2:G.info.isAdmin?1:2,ver5:2}):reportNew("chooseDragSinge",{ver1:1,ver2:G.info.isAdmin?1:2,ver5:2})),console.log("fail",t)})},x=n.length,k=Math.ceil(x/b),F=0;if(h.trigger("toast.show",{type:"wait",text:"正在移动文件",autoHide:!1}),k)for(var l=0;k>l;l++){var T=n.slice(l*b,(l+1)*b);y(T)}else w(),u["panel.close"]();return!0}try{v.alert(2,"提示","没有管理该文件的权限，操作失败")}catch(C){console.log(C)}}function r(){p["folderTree.create"](null,function(){if(G.selectRows){var e=G.folderTree.selected.id;return e===G.nowFolder?(console.log("can not move to the same folder"),h.trigger("toast.show",{type:"alert",text:"文件已在目标位置"}),void 0):(o(G.selectRows,e),void 0)}})}function l(e,t,a){o(e,t,a)}var s={folderTree:a(137),showFolderTreePanel:a(67).showFolderTreePanel},d=a(92),c=a(25),f=a(138),u=a(147),p=a(148),m=a(103),v=a(64),h=$(G.handler),g=a(77),w=a(139),b=10;e.exports={showMove:n,move:r,movelist:l}},function(e,t,a){"use strict";function i(){var e=G.selectRow;if(report("clkJubao"),e){var t=G.getReportInfo(e);t.ver3=9,reportNew("fileRightMenuClick",t);var a="http://jubao.qq.com/cn/jubao?appname=im&subapp=group_file&jubaotype=article";G.checkHttps()&&(a="https://proxy.qun.qq.com/tx_tls_gate=jubao.qq.com/cn/jubao?appname=im&subapp=group_file&jubaotype=article"),a+="&impeachuin="+G.info.uin,a+="&uin="+e.uin,a+="&fid="+e.fp,a+="&fname="+encodeURIComponent(e.fnameEsc),a+="&ut="+e.ct,a+="&fs="+e.size,a+="&dt="+e.down,a+="&t="+e.t,a+="&mt="+e.mt,a+="&exp="+e.exp,a+="&gid="+G.info.gc,n.show(encodeURI(a))}o.trigger("menu.hide")}var n=(a(77),a(152)),o=$(G.handler);e.exports=i},function(e,t,a){"use strict";function i(e){f.text(e)}function n(e){for(var t=!1,a=!1,i=0,n=e.length;n>i;i++){var o=e[i],r=o.value,l=c.getData(r);l.admin&&(t=!0),l.succ||(a=!0)}t?($("#batchDel").removeClass("disabled"),$("#batchMove").removeClass("disabled")):($("#batchDel").addClass("disabled"),$("#batchMove").addClass("disabled")),a?$("#batchDown").removeClass("disabled"):$("#batchDown").addClass("disabled")}function o(){if(!G.mac){var e=G.getDomPanel()[0],t=e.querySelectorAll(".cbox:checked");t.length?(report("showSelectAll"),report("showBatch"),$(".nav").removeClass("hide"),$("body").addClass("batch-mode"),$(".file.list-item").attr("data-action","file.select"),n(t),i(t.length)):($("body").removeClass("batch-mode"),$(".file.list-item").attr("data-action",""))}}function r(){$("body").removeClass("batch-mode"),$(".cbox").prop("checked",!1),i(0)}function l(){var e=G.getDomPanel()[0];if(this.checked){report("clkSelectAll"),report("clkBatch"),G.getDomPanel().find(".cbox").prop("checked",!0);var t=e.querySelectorAll(".cbox:checked");i(t.length)}else r()}function s(){var e=G.getDomPanel()[0],t=$(this).find(".cbox");t.prop("checked")?t.prop("checked",!1):t.prop("checked",!0);var a=e.querySelectorAll(".cbox:checked");i(a.length)}function d(e){e?u.attr("class","icons-download-batch"):u.attr("class","icons-download-batch-disabled disabled")}var c=a(77),f=$("#selectFileNum"),u=$("#downloadFile button");e.exports={check:o,exit:r,selectAll:l,select:s,changeDownLoadBtn:d}},function(e,t,a){"use strict";function i(){b.getTips()||(report("showOldVersion"),n())}function n(){$("#updateQQ").addClass("open"),$("#updateQQTips").text("当前版本不支持批量另存功能，请升级QQ至最新版本后体验"),$("#updateQQ").find("input.btn-notips").attr("data-action","panel.close")}function o(e,t){switch(e){case 1:return'您选择了<span class="red">'+x+'</span>个文件,其中<span  class="red">'+F+'</span>个文件可以删除<br>您确定要删除这<span  class="red">'+F+"</span>个文件吗?";case 2:return"正在删除文件";case 3:return'已经成功删除<span class="red">'+t+"</span>个文件"}}function r(){x=0,k=0,F=0,C=[]}function l(){r();var e=G.onlyGetDom().find(".selected"),t=[];return x=e.length,e.each(function(){var e=$(this).data("path"),a=v.getData(e);a&&(a.remove&&F++,a.succ||T++,t.push(a))}),t}function s(){if(!this.classList.contains("disabled")){C=l();var e=G.getReportInfo(C[0]);e.ver3=3,reportNew("chooseRightMenuClick",e),h.showBatchPanel(w,{title:"批量删除",action:"batch.removeAction",text:o(1)})}}function d(){report("batchDelete"),h.showBatchPanel(w,{title:"批量删除",hideAll:!0,text:o(2)}),g.exit(),p.removeBatch(C,function(e){h.showBatchPanel(w,{title:"批量删除",action:"batch.removeAction",hideOk:!0,closeText:"关闭",text:o(3,e)}),r()})}function c(){this.classList.contains("disabled")||(report("batchMove"),C=l(),u.showMove())}function f(){report("batchSaveAs");var e=function(){l();var e=G.selectRows;g.exit();for(var t=[],a=e.length-1;a>=0;a--){var i=e[a];t.push({filepath:i.filepath,filename:i.fnameEsc,fname:i.fname,filetype:i.filetype,filesize:i.size,domid:i.domid,orcType:i.orcType})}m.saveBatch(t)};G.info.version<y?i(e):e()}var u=a(101),p=(a(97),a(99)),m=a(105),v=a(77),h=a(67),g=a(103),w=$("#batchPanel"),b=a(15),y=G.folderVersion,x=0,k=0,F=0,T=0,C=[];e.exports={remove:s,removeAction:d,move:c,save:f}},function(e,t,a){"use strict";function i(e){var t=e||G.selectRow;report("clkSaveAs",G.module());try{var a=G.getReportInfo(t),i=a;a.ver3=2,reportNew("fileRightMenuClick",a),i.ver1=G.module(),i.ver2=1,i.ver3=a.ver4,i.ver4=a.ver5,i.ver5=3,i.ver7=G.info.role,reportNew("fileDownload",i)}catch(n){console.info(n)}t&&1===t.orcType&&(t.inDown||!function(){var e=t.filepath,a=t.fnameEsc,i=t.size,n={bs:t.t||t.busid,fp:t.fp};r.checkOneFile(n).done(function(t){if(0===t.ec){{o.addDownloadTask(e,a,i)}G.saveasList[e]=1}else 0===t.ec&&3===t.audit&&o.alert("该文件因多次被举报为色情文件，已被删除")}).fail(function(){}),l.trigger("menu.hide")}())}function n(e){var t=e[0];if(t){var a=G.getReportInfo(t);a.ver3="1",reportNew("chooseRightMenuClick",a);var i=a;i.ver1=G.module(),i.ver2=1,i.ver3=a.ver4,i.ver4=a.ver5,i.ver5=5,i.ver7=G.info.role,console.log(t,a,i),reportNew("fileDownload",i)}for(var n in e){var r=e[n];G.saveasList[r.filepath]=1}var l={files:e,save2default:0};o.addMultiDownloadTasks(JSON.stringify(l))}var o=a(64),r=(a(77),a(92)),l=$(G.handler);G.saveasList={},e.exports={save:i,saveBatch:n}},function(e,t,a){"use strict";var i=a(25),n={};n.byUin=function(){var e=$(this).data("uin"),t=this.innerHTML,a=function(){G.module(2),$("#navTopFolder").addClass("selected"),$("#createFolder").hide(),$("#fileNum").addClass("hide").attr("data-action","menu.filenum"),$("#headerLine").text(">"),$("#box").addClass("one"),$("#folderName").html('<div style="display: -webkit-box;"><div class="uploader-name">'+t+"</div><div>上传的文件</div></div>").removeClass("hide"),$("#normalNav").removeClass("hide"),G.mac&&$(".mac-file-top").addClass("user-module")};G.module(2),i.getList({paramsFilter:{filterUin:e,filterCode:3},succ:a,renderParams:{getByUinHide:!0,uploaderHide:!0}})()},e.exports=n},function(e,t,a){"use strict";function i(){if(!this.classList.contains("disable")){report("clkForever");var e=G.selectRow;if(e&&2===e.remoteType){var t=e.filepath,a={fp:t};o.setPermanent(a).done(function(t){if(0===t.ec){var a="/102"+t.fp;e.newFilePath=a,e.remoteType=1,e.fp=t.fp,e.temp=!1,n.updateFile(e,"permanent"),l.trigger("file.dataUpdate",e),l.trigger("toast.show",{type:"suc",text:"转存成功"})}}).fail(function(e){console.log(e),r.showError(e.ec)})}else console.log("文件不存在或者不是临时文件");l.trigger("menu.hide")}}var n=a(77),o=a(92),r=a(138),l=$(G.handler);e.exports=i},function(e,t,a){"use strict";function i(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function n(){return function(e,t){G.getDomPanel();if(e){var a=e.file[0];a.domid}}}function o(e,t){e=e||{};var a=e.busId,o=e.fileId;r.getFileAttr({bus_id:a,file_id:o}).done(function(e){var a=[];if("object"===i(e.file_info)){e.file_info.upload_size=e.file_info.size;var r=e.file_info;r.proId=r.id,r.id=o,a.push(r),a=l.setFileList(a),n()(a,t)}}).fail(function(e){console.log("fail",e)})}{var r=a(92),l=(a(112),a(77));a(18)}G.renderOtherGroupResultFuncSingtons={};window.getFileAttr=o,e.exports=o},function(e){e.exports=function(e,t,a,i){function n(e){return o[e]||e}i=i||function(e,t,a,i){var n=t.split("\n"),o=Math.max(i-3,0),r=Math.min(n.length,i+3),l=n.slice(o,r).map(function(e,t){var a=t+o+1;return(a==i?" >> ":"    ")+a+"| "+e}).join("\n");throw e.path=a,e.message=(a||"ejs")+":"+i+"\n"+l+"\n\n"+e.message,e},t=t||function(e){return void 0==e?"":String(e).replace(r,n)};var o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},r=/[&<>'"]/g,l=1,s='	<div class="toast-overlay" id="toastDom">\r\n		<div class="toast">\r\n			<div class="icons-<%-locals.cls%> toast-icon"></div>\r\n			<div class="toast-message"><%-locals.text%></div>\r\n		</div>\r\n	</div>',d="D:\\qun\\clt_filetab\\src\\tpl\\toast.ejs";try{var c=[],f=c.push.bind(c);return f('	<div class="toast-overlay" id="toastDom">\r\n		<div class="toast">\r\n			<div class="icons-'),l=3,f(e.cls),f(' toast-icon"></div>\r\n			<div class="toast-message">'),l=4,f(e.text),f("</div>\r\n		</div>\r\n	</div>"),l=6,c.join("")}catch(u){i(u,s,d,l)}}},,function(e){e.exports=function(e,t,a,i){function n(e){return o[e]||e}i=i||function(e,t,a,i){var n=t.split("\n"),o=Math.max(i-3,0),r=Math.min(n.length,i+3),l=n.slice(o,r).map(function(e,t){var a=t+o+1;return(a==i?" >> ":"    ")+a+"| "+e}).join("\n");throw e.path=a,e.message=(a||"ejs")+":"+i+"\n"+l+"\n\n"+e.message,e},t=t||function(e){return void 0==e?"":String(e).replace(r,n)};var o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},r=/[&<>'"]/g,l=1,s='<div class="files-empty"><div><div class="icons-empty"></div><div class="empty-desc">在这里，你可以把各种有趣的东西分享给大家</div></div></div>\n',d="D:\\qun\\clt_filetab\\src\\tpl\\errormsg.ejs";try{var c=[],f=c.push.bind(c);return f('<div class="files-empty"><div><div class="icons-empty"></div><div class="empty-desc">在这里，你可以把各种有趣的东西分享给大家</div></div></div>\n'),l=2,c.join("")}catch(u){i(u,s,d,l)}}},function(e){e.exports=function(e,t,a,i){function n(e){return o[e]||e}i=i||function(e,t,a,i){var n=t.split("\n"),o=Math.max(i-3,0),r=Math.min(n.length,i+3),l=n.slice(o,r).map(function(e,t){var a=t+o+1;return(a==i?" >> ":"    ")+a+"| "+e}).join("\n");throw e.path=a,e.message=(a||"ejs")+":"+i+"\n"+l+"\n\n"+e.message,e},t=t||function(e){return void 0==e?"":String(e).replace(r,n)};var o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},r=/[&<>'"]/g,l=1,s='<%\n	for(var i = 0,l=locals.list.length;i<l;i++){\n		var item = locals.list[i];\n		if(item.orcType === 2){\n%>\n	<div class="fold list-item <%if(item.succ){%>succ<%}%>" data-path="<%=item.id%>" id="<%=item.domid%>" data-dbaction="folder.open" data-action="list.select">\n		<div class="item-name item-name-adjust"  data-dbaction="folder.open"  data-path="<%=item.id%>" data-viewcntr="folder<%=item.domid%>" title="<%-item.fname%>">\n			<div class="filesmall-folder drag-dom" data-dbaction="folder.open"  data-path="<%=item.id%>" data-viewcntr="folder<%=item.domid%>"></div>\n			<span class="name drag-dom"><%- item.fname %></span>\n		</div>\n		<div class="item-time drag-dom"  title="更新时间:<%=item.mtoStr%>">\n			<span><%= item.mtStr %></span>\n		</div>\n		<div class="item-size"></div>\n		<div class="item-user"></div>\n		<div class="item-download"><button role="button" aria-label="下载文件夹" title="下载文件夹" class="icons-download-new" data-action="folder.downloadByBtn"></button></div>\n	</div>\n<%\n}else{\n%>\n	<div class="file list-item <%=item.icon%> <%if(item.remoteType===2){%>temp<%}%> <%if(item.succ){%>succ<%}%> <%if(item.safeType){%>illegal<%}%>" id="<%=item.domid%>" data-path="<%=item.filepath%>" <%if(!locals.renderParams){%>id="<%=item.domid%>"<%}%> <%if(item.otherGroupName){%> data-dbaction="openGroupFile" data-uin="<%- item.gc %>"<%}%> data-action="list.select" <%if(item.preview){%>data-dbaction="file.preview"<%}else{%>data-dbaction="file.downloadByDom"<%}%> <%if(item.safeType){%>title="该文件存在安全风险，无法正常使用"<%}%>>\n		<div class="item-name-wrap item-name-adjust">\n			<div class="item-name" <%if(!item.safeType){%>title="<%- item.name %><%-item.suf%>"<%}%>>\n				<div class="file-icons" data-path="<%=item.filepath%>" <%if(item.preview){%>data-dbaction="file.preview"<%}%>>\n					<div class="drag-dom filesmall-<%=item.icon%> <%if(item.previewObj){%>thumb<%}%>" <%if(item.previewObj){%>style="background-image:url(<%=item.previewObj.url%>);"<%}%>></div>\n					<i class="icons-check"></i>\n				</div>\n				<span class="name drag-dom">\n					<%- item.name %><%-item.suf%>\n				</span>\n			</div>\n			<% if(item.canEdit || item.remoteType === 2) { %>\n				<div class="item-tags">\n					<div class="overflow">\n						<%if(item.canEdit){%><span class="can-edit"></span><%}%>\n						<%if(item.remoteType ===2){%><span class="tmp"></span><%}%>\n					</div>\n				</div>\n			<% } %>\n		</div>\n		<div class="item-time" <%if(!item.safeType){%>title="更新时间:<%=item.mtoStr%>"<%}%>>\n			<span class="drag-dom"><%= item.mtStr %></span>\n		</div>\n		<div class="item-size" <%if(!item.safeType){%>title="文件大小:<%= item.sizeStr%>"<%}%>>\n			<span class="drag-dom"><%= item.sizeStr%></span>\n		</div>\n		<div class="item-user" <%if(!item.safeType){%>title="上传者:<%-item.nick%> (<%=item.uin%>)"<%}%>><span><%- item.nick%></span></div>\n		<div class="item-download">\n			<%if(!item.safeType){%><button role="button" aria-label="下载文件" title="下载文件" class="icons-download-new" data-action="file.downloadByBtn"></button><%}%>\n		</div>\n		<div class="aria-hide">\n			<%if((item.safeType === 0 && item.admin) || G.info.isAdmin){%>\n				<a href="javascript:void(0)" data-focus="file.aria" aria-label="转发文件<%=item.fname%>" data-action="file.forward" tabindex="3">转发</a>\n				<a href="javascript:void(0)" data-focus="file.aria" aria-label="转发文件到手机<%=item.fname%>" data-action="file.forwardMobile" tabindex="3">转发文件到手机</a>\n				<a href="javascript:void(0)" data-focus="file.aria" aria-label="在文件夹中显示<%=item.fname%>" data-action="file.openFolderInBox" tabindex="3">在文件夹中显示</a>\n				<a href="javascript:void(0)" data-focus="file.aria" aria-label="重命名文件<%=item.fname%>" data-action="file.showRename" data-blur="aria.fmg" tabindex="3">重命名</a>\n				<a href="javascript:void(0)" data-focus="file.aria" aria-label="转存为永久文件<%=item.fname%>" data-action="file.permanent" tabindex="3">转存为永久文件</a>\n				<a href="javascript:void(0)" data-focus="file.aria" aria-label="移动文件<%=item.fname%>" data-action="file.showMove" data-blur="aria.fmg" tabindex="3">移动文件</a>\n			<%}%>\n			<%if(item.safeType && item.admin || G.info.isAdmin){%>\n				<a href="javascript:void(0)" data-focus="file.aria" aria-label="删除文件<%=item.fname%>" data-action="file.delete" tabindex="3">删除</a>\n			<%}%>\n			<a href="javascript:void(0)" data-focus="file.aria" aria-label="举报文件<%=item.fname%>" data-action="file.jubao" tabindex="3">举报文件</a>\n		</div>\n	</div>\n<%\n	}\n}\n%>\n',d="D:\\qun\\clt_filetab\\src\\tpl\\fileRowNew.ejs";try{for(var c=[],f=c.push.bind(c),u=0,p=e.list.length;p>u;u++){var m=e.list[u];2===m.orcType?(l=5,f('\n	<div class="fold list-item '),l=6,m.succ&&f("succ"),f('" data-path="'),f(t(m.id)),f('" id="'),f(t(m.domid)),f('" data-dbaction="folder.open" data-action="list.select">\n		<div class="item-name item-name-adjust"  data-dbaction="folder.open"  data-path="'),l=7,f(t(m.id)),f('" data-viewcntr="folder'),f(t(m.domid)),f('" title="'),f(m.fname),f('">\n			<div class="filesmall-folder drag-dom" data-dbaction="folder.open"  data-path="'),l=8,f(t(m.id)),f('" data-viewcntr="folder'),f(t(m.domid)),f('"></div>\n			<span class="name drag-dom">'),l=9,f(m.fname),f('</span>\n		</div>\n		<div class="item-time drag-dom"  title="更新时间:'),l=11,f(t(m.mtoStr)),f('">\n			<span>'),l=12,f(t(m.mtStr)),f('</span>\n		</div>\n		<div class="item-size"></div>\n		<div class="item-user"></div>\n		<div class="item-download"><button role="button" aria-label="下载文件夹" title="下载文件夹" class="icons-download-new" data-action="folder.downloadByBtn"></button></div>\n	</div>\n'),l=18):(l=20,f('\n	<div class="file list-item '),l=21,f(t(m.icon)),f(" "),2===m.remoteType&&f("temp"),f(" "),m.succ&&f("succ"),f(" "),m.safeType&&f("illegal"),f('" id="'),f(t(m.domid)),f('" data-path="'),f(t(m.filepath)),f('" '),e.renderParams||(f('id="'),f(t(m.domid)),f('"')),f(" "),m.otherGroupName&&(f(' data-dbaction="openGroupFile" data-uin="'),f(m.gc),f('"')),f(' data-action="list.select" '),m.preview?f('data-dbaction="file.preview"'):f('data-dbaction="file.downloadByDom"'),f(" "),m.safeType&&f('title="该文件存在安全风险，无法正常使用"'),f('>\n		<div class="item-name-wrap item-name-adjust">\n			<div class="item-name" '),l=23,m.safeType||(f('title="'),f(m.name),f(m.suf),f('"')),f('>\n				<div class="file-icons" data-path="'),l=24,f(t(m.filepath)),f('" '),m.preview&&f('data-dbaction="file.preview"'),f('>\n					<div class="drag-dom filesmall-'),l=25,f(t(m.icon)),f(" "),m.previewObj&&f("thumb"),f('" '),m.previewObj&&(f('style="background-image:url('),f(t(m.previewObj.url)),f(');"')),f('></div>\n					<i class="icons-check"></i>\n				</div>\n				<span class="name drag-dom">\n					'),l=29,f(m.name),f(m.suf),f("\n				</span>\n			</div>\n			"),l=32,(m.canEdit||2===m.remoteType)&&(f('\n				<div class="item-tags">\n					<div class="overflow">\n						'),l=35,m.canEdit&&f('<span class="can-edit"></span>'),f("\n						"),l=36,2===m.remoteType&&f('<span class="tmp"></span>'),f("\n					</div>\n				</div>\n			"),l=39),f('\n		</div>\n		<div class="item-time" '),l=41,m.safeType||(f('title="更新时间:'),f(t(m.mtoStr)),f('"')),f('>\n			<span class="drag-dom">'),l=42,f(t(m.mtStr)),f('</span>\n		</div>\n		<div class="item-size" '),l=44,m.safeType||(f('title="文件大小:'),f(t(m.sizeStr)),f('"')),f('>\n			<span class="drag-dom">'),l=45,f(t(m.sizeStr)),f('</span>\n		</div>\n		<div class="item-user" '),l=47,m.safeType||(f('title="上传者:'),f(m.nick),f(" ("),f(t(m.uin)),f(')"')),f("><span>"),f(m.nick),f('</span></div>\n		<div class="item-download">\n			'),l=49,m.safeType||f('<button role="button" aria-label="下载文件" title="下载文件" class="icons-download-new" data-action="file.downloadByBtn"></button>'),f('\n		</div>\n		<div class="aria-hide">\n			'),l=52,(0===m.safeType&&m.admin||G.info.isAdmin)&&(f('\n				<a href="javascript:void(0)" data-focus="file.aria" aria-label="转发文件'),l=53,f(t(m.fname)),f('" data-action="file.forward" tabindex="3">转发</a>\n				<a href="javascript:void(0)" data-focus="file.aria" aria-label="转发文件到手机'),l=54,f(t(m.fname)),f('" data-action="file.forwardMobile" tabindex="3">转发文件到手机</a>\n				<a href="javascript:void(0)" data-focus="file.aria" aria-label="在文件夹中显示'),l=55,f(t(m.fname)),f('" data-action="file.openFolderInBox" tabindex="3">在文件夹中显示</a>\n				<a href="javascript:void(0)" data-focus="file.aria" aria-label="重命名文件'),l=56,f(t(m.fname)),f('" data-action="file.showRename" data-blur="aria.fmg" tabindex="3">重命名</a>\n				<a href="javascript:void(0)" data-focus="file.aria" aria-label="转存为永久文件'),l=57,f(t(m.fname)),f('" data-action="file.permanent" tabindex="3">转存为永久文件</a>\n				<a href="javascript:void(0)" data-focus="file.aria" aria-label="移动文件'),l=58,f(t(m.fname)),f('" data-action="file.showMove" data-blur="aria.fmg" tabindex="3">移动文件</a>\n			'),l=59),f("\n			"),l=60,(m.safeType&&m.admin||G.info.isAdmin)&&(f('\n				<a href="javascript:void(0)" data-focus="file.aria" aria-label="删除文件'),l=61,f(t(m.fname)),f('" data-action="file.delete" tabindex="3">删除</a>\n			'),l=62),f('\n			<a href="javascript:void(0)" data-focus="file.aria" aria-label="举报文件'),l=63,f(t(m.fname)),f('" data-action="file.jubao" tabindex="3">举报文件</a>\n		</div>\n	</div>\n'),l=66)}return l=69,f("\n"),l=70,c.join("")}catch(v){i(v,s,d,l)}}},function(e){e.exports=function(e,t,a,i){function n(e){return o[e]||e}i=i||function(e,t,a,i){var n=t.split("\n"),o=Math.max(i-3,0),r=Math.min(n.length,i+3),l=n.slice(o,r).map(function(e,t){var a=t+o+1;return(a==i?" >> ":"    ")+a+"| "+e}).join("\n");throw e.path=a,e.message=(a||"ejs")+":"+i+"\n"+l+"\n\n"+e.message,e},t=t||function(e){return void 0==e?"":String(e).replace(r,n)};var o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},r=/[&<>'"]/g,l=1,s='<%\n		var group = locals.data;\n		if(group.first){\n%>\n	<div class="group-title" data-gc="<%=group.gc%>">\n		<% if(group.self){ %>\n			<span class="group-name">本群搜索结果</span> <span>(<%=group.total%>)</span>\n		<% }else{%>\n			<span class="group-name"><%=group.name%></span> <span>(<%=group.total%>)</span>\n		<% } %>\n	</div>\n<%}%>\n	<div class="group-result group<%=group.gc%>">\n<%\n		for(var i = 0,l = group.list.length;i<l;i++){\n			var item = group.list[i];\n%>\n	<div class="file list-item <%=item.icon%> <%if(item.remoteType===2){%>temp<%}%> <%if(item.succ){%>succ<%}%>" id="search<%=item.domid%>" data-path="<%=item.filepath%>" <%if(!locals.renderParams){%>id="<%=item.domid%>"<%}%> <%if(!group.self){%> data-dbaction="openGroupFile" data-uin="<%- item.gc %>"<%}else if(item.preview){%>data-dbaction="file.preview"<%}else{%>data-dbaction="file.downloadByDom"<%}%> data-action="list.select">\n		<div class="item-name-wrap item-name-adjust">\n			<div class="item-name">\n				<div class="file-icons" data-path="<%=item.filepath%>" <%if(item.preview){%>data-dbaction="file.preview"<%}%>>\n					<div class="filesmall-<%=item.icon%> <%if(item.previewObj){%>thumb<%}%> drag-dom" <%if(item.previewObj){%>style="background-image:url(<%=item.previewObj.url%>);"<%}%>></div>\n					<i class="icons-check"></i>\n				</div>\n				<span class="name drag-dom"><%- item.name %><%-item.suf%></span>\n			</div>\n			<% if(item.canEdit || item.remoteType === 2) { %>\n				<div class="item-tags">\n					<%if(item.canEdit){%><span class="can-edit"></span><%}%>\n					<%if(item.remoteType ===2){%><span class="tmp"></span><%}%>\n					&nbsp;\n				</div>\n			<% } %>\n		</div>\n		<div class="item-time" title="上传时间:<%=item.ctStr%>">\n			<span class="drag-dom">\n			<% if(group.self){ %>\n				<%= item.ctStr %>\n			<%}else{%>\n				<%= item.ctStr %>\n			<%}%>\n			</span>\n		</div>\n		<div class="item-size" title="文件大小:<%= item.sizeStr%>">\n			<span class="drag-dom"><%= item.sizeStr%></span>\n		</div>\n		<div class="item-user" title="上传者:<%-item.nick%> (<%=item.uin%>)"><span class="drag-dom"><%- item.nick%></span></div>\n		<div class="aria-hide">\n			<a href="javascript:void(0)" data-focus="file.aria" aria-label="转发文件<%=item.fname%>" data-action="file.forward" tabindex="3">转发</a>\n			<a href="javascript:void(0)" data-focus="file.aria" aria-label="转发文件到手机<%=item.fname%>" data-action="file.forwardMobile" tabindex="3">转发文件到手机</a>\n			<a href="javascript:void(0)" data-focus="file.aria" aria-label="在文件夹中显示<%=item.fname%>" data-action="file.openFolderInBox" tabindex="3">在文件夹中显示</a>\n			<a href="javascript:void(0)" data-focus="file.aria" aria-label="重命名文件<%=item.fname%>" data-action="file.showRename" data-blur="aria.fmg" tabindex="3">重命名</a>\n			<a href="javascript:void(0)" data-focus="file.aria" aria-label="转存为永久文件<%=item.fname%>" data-action="file.permanent" tabindex="3">转存为永久文件</a>\n			<a href="javascript:void(0)" data-focus="file.aria" aria-label="移动文件<%=item.fname%>" data-action="file.showMove" data-blur="aria.fmg" tabindex="3">移动文件</a>\n			<a href="javascript:void(0)" data-focus="file.aria" aria-label="举报文件<%=item.fname%>" data-action="file.jubao" tabindex="3">举报文件</a>\n			<a href="javascript:void(0)" data-focus="file.aria" aria-label="删除文件<%=item.fname%>" data-action="file.delete" tabindex="3">删除</a>\n		</div>\n		<div class="item-source">\n			<span>\n			<% if(group.self){ %>\n				&nbsp;\n			<%}else{%>\n				<span class="group-code" data-action="openGroupInfoCard" data-uin="<%- item.gc %>"><%=item.gname%></span>\n			<%}%>\n			</span>\n		</div>\n	</div>\n<%\n	}\n%>\n	</div>\n',d="D:\\qun\\clt_filetab\\src\\tpl\\searchRow.ejs";try{var c=[],f=c.push.bind(c),u=e.data;u.first&&(l=4,f('\n	<div class="group-title" data-gc="'),l=5,f(t(u.gc)),f('">\n		'),l=6,u.self?(f('\n			<span class="group-name">本群搜索结果</span> <span>('),l=7,f(t(u.total)),f(")</span>\n		"),l=8):(f('\n			<span class="group-name">'),l=9,f(t(u.name)),f("</span> <span>("),f(t(u.total)),f(")</span>\n		"),l=10),f("\n	</div>\n"),l=12),f('\n	<div class="group-result group'),l=13,f(t(u.gc)),f('">\n'),l=14;for(var p=0,m=u.list.length;m>p;p++){var v=u.list[p];l=17,f('\n	<div class="file list-item '),l=18,f(t(v.icon)),f(" "),2===v.remoteType&&f("temp"),f(" "),v.succ&&f("succ"),f('" id="search'),f(t(v.domid)),f('" data-path="'),f(t(v.filepath)),f('" '),e.renderParams||(f('id="'),f(t(v.domid)),f('"')),f(" "),u.self?v.preview?f('data-dbaction="file.preview"'):f('data-dbaction="file.downloadByDom"'):(f(' data-dbaction="openGroupFile" data-uin="'),f(v.gc),f('"')),f(' data-action="list.select">\n		<div class="item-name-wrap item-name-adjust">\n			<div class="item-name">\n				<div class="file-icons" data-path="'),l=21,f(t(v.filepath)),f('" '),v.preview&&f('data-dbaction="file.preview"'),f('>\n					<div class="filesmall-'),l=22,f(t(v.icon)),f(" "),v.previewObj&&f("thumb"),f(' drag-dom" '),v.previewObj&&(f('style="background-image:url('),f(t(v.previewObj.url)),f(');"')),f('></div>\n					<i class="icons-check"></i>\n				</div>\n				<span class="name drag-dom">'),l=25,f(v.name),f(v.suf),f("</span>\n			</div>\n			"),l=27,(v.canEdit||2===v.remoteType)&&(f('\n				<div class="item-tags">\n					'),l=29,v.canEdit&&f('<span class="can-edit"></span>'),f("\n					"),l=30,2===v.remoteType&&f('<span class="tmp"></span>'),f("\n					&nbsp;\n				</div>\n			"),l=33),f('\n		</div>\n		<div class="item-time" title="上传时间:'),l=35,f(t(v.ctStr)),f('">\n			<span class="drag-dom">\n			'),l=37,u.self?(f("\n				"),l=38,f(t(v.ctStr)),f("\n			"),l=39):(f("\n				"),l=40,f(t(v.ctStr)),f("\n			"),l=41),f('\n			</span>\n		</div>\n		<div class="item-size" title="文件大小:'),l=44,f(t(v.sizeStr)),f('">\n			<span class="drag-dom">'),l=45,f(t(v.sizeStr)),f('</span>\n		</div>\n		<div class="item-user" title="上传者:'),l=47,f(v.nick),f(" ("),f(t(v.uin)),f(')"><span class="drag-dom">'),f(v.nick),f('</span></div>\n		<div class="aria-hide">\n			<a href="javascript:void(0)" data-focus="file.aria" aria-label="转发文件'),l=49,f(t(v.fname)),f('" data-action="file.forward" tabindex="3">转发</a>\n			<a href="javascript:void(0)" data-focus="file.aria" aria-label="转发文件到手机'),l=50,f(t(v.fname)),f('" data-action="file.forwardMobile" tabindex="3">转发文件到手机</a>\n			<a href="javascript:void(0)" data-focus="file.aria" aria-label="在文件夹中显示'),l=51,f(t(v.fname)),f('" data-action="file.openFolderInBox" tabindex="3">在文件夹中显示</a>\n			<a href="javascript:void(0)" data-focus="file.aria" aria-label="重命名文件'),l=52,f(t(v.fname)),f('" data-action="file.showRename" data-blur="aria.fmg" tabindex="3">重命名</a>\n			<a href="javascript:void(0)" data-focus="file.aria" aria-label="转存为永久文件'),l=53,f(t(v.fname)),f('" data-action="file.permanent" tabindex="3">转存为永久文件</a>\n			<a href="javascript:void(0)" data-focus="file.aria" aria-label="移动文件'),l=54,f(t(v.fname)),f('" data-action="file.showMove" data-blur="aria.fmg" tabindex="3">移动文件</a>\n			<a href="javascript:void(0)" data-focus="file.aria" aria-label="举报文件'),l=55,f(t(v.fname)),f('" data-action="file.jubao" tabindex="3">举报文件</a>\n			<a href="javascript:void(0)" data-focus="file.aria" aria-label="删除文件'),l=56,f(t(v.fname)),f('" data-action="file.delete" tabindex="3">删除</a>\n		</div>\n		<div class="item-source">\n			<span>\n			'),l=60,u.self?(f("\n				&nbsp;\n			"),l=62):(f('\n				<span class="group-code" data-action="openGroupInfoCard" data-uin="'),l=63,f(v.gc),f('">'),f(t(v.gname)),f("</span>\n			"),l=64),f("\n			</span>\n		</div>\n	</div>\n"),l=68}return l=70,f("\n	</div>\n"),l=72,c.join("")}catch(h){i(h,s,d,l)}}},,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";function i(e){G.folderTree=G.folderTree||{};var t="/"===G.nowFolder?{fname:"群文件",id:"/"}:G.folderMap()[G.nowFolder];G.folderTree&&G.folderTree.selected&&(G.folderTree.selected=t),G.folderTree.container=$(e);
for(var a=[],i=Object.keys(G.folderMap()),o=i.length-1;o>=0;o--)a.push(G.folderMap()[i[o]]);a=s.quickSortByObjectAttr(a,"mt"),$(e).html(r.folderTree({topFolder:G.topFolder,items:a})),n(t.id)}function n(e){if(console.log("select:",e),e=e||$(this).data("id")){G.folderTree||(G.folderTree={}),l.find(".active").removeClass("active");var t={};console.log(e),"/"===e?t=G.folderTree.selected=G.topFolder:"new"!==e?t=G.folderTree.selected=G.folderMap()[e]:(t={id:e},G.folderTree.selected=t),console.log(t),$('.folder-list-item[data-id="'+t.id+'"]').addClass("active"),void 0!==t.fname&&l.find('[data-role="dest"]').html(t.fname)}}function o(){var e=G.folderTree.container.find(".secondary-folder-list li");e.length?e.first().before(r.newFloder()):G.folderTree.container.find(".secondary-folder-list").append(r.newFloder())}var r={folderTree:a(185),newFloder:a(186)},l=$("#containerFolderTreePanel"),s=a(18);e.exports={render:i,newFolder:o,select:n}},function(e,t,a){"use strict";function i(e,t){if(e=Math.abs(e),r[e]&&$.inArray(e,d)>=0)t.find(".error-message").text(r[e]).addClass("show");else{var a=r[e]||"操作失败";l.trigger("toast.show",{type:"alert",text:a}),s.hideAll()}}function n(){l.trigger("toast.show",{type:"alert",text:msg})}function o(){l.trigger("toast.show",{type:"alert",text:msg})}var r={102:"非群成员",103:"该文件不存在或已失效",106:"登录态校验失败",116:"没有权限",117:"没有权限",118:"没有权限",119:"没有权限",120:"没有权限",121:"没有权限",122:"没有权限",123:"没有权限",124:"没有权限",125:"没有权限",126:"没有权限",127:"没有权限",128:"没有权限",129:"没有权限",130:"没有权限",131:"没有权限",132:"文件存在安全风险",133:"文件安全性未知",134:"名称包含特殊/敏感字符，请重新输入。",313:"已存在同名文件夹，请重新命名",314:"创建文件夹失败",315:"删除文件夹失败",402:"文件数量已经超过限制",403:"可用空间不够",405:"创建失败，文件夹个数已达上限",25:"操作失败，空间不足."},l=$(G.handler),s=a(67),d=[134,313,405];e.exports={showError:i,showWait:n,showSuc:o}},function(e){"use strict";function t(e){var t=Math.ceil(e/86400);return t}function a(e){return e=h(e),e.getFullYear()!=y.getFullYear()?!1:e.getMonth()!=y.getMonth()?!1:e.getDate()!=y.getDate()?!1:!0}function i(e){e=h(e);var t=a(e),i=!1;if(!t){var n=new Date(y.getFullYear(),y.getMonth(),y.getDate())-e;i=n>0&&864e5>n}return i}function n(e){e=h(e);var t=a(e),i=!1;if(!t){var n=new Date(y.getFullYear(),y.getMonth(),y.getDate())-e;i=n>0&&1728e5>n}return i}function o(e){e=h(e);var t=a(e),i=!1;if(!t){var n=new Date(y.getFullYear(),y.getMonth(),y.getDate())-e;i=n>=0&&864e5>=n}return i?"昨天":"前天"}function r(e){e=h(e);var t=a(e),i=!1;if(!t){var n=new Date(y.getFullYear(),y.getMonth(),y.getDate())-e;i=n>0&&1728e5>n}return i}function l(e){e=h(e);var t=f(y);return e>t?!0:!1}function s(e){return e=h(e),e.getYear()!=y.getYear()?!1:!0}function d(e){e||(e=y.getFullYear());var t=new Date(e,0,1),a=t.getDay();0===a&&(a=7);{var i=[null,"一","二","三","四","五","六","日"];"周"+i[a]}return 1!=a&&t.setDate(9-a),t}function c(e){var t=new Date(e),a=d(t.getFullYear()),i=0,n=void 0;return a.getDate()>1&&(i=1),n=a>t?1:Math.floor((t-a)/7/864e5)+i}function f(e){var t=h(e),a=t.getDay();0===a&&(a=7);var i=a-1,n=void 0;return n=new Date(t.getTime()-864e5*i)}function u(e){var t=h(e),a=t.getDay();return 0===a&&(a=7),a}function p(){}function m(e){if(e){var t=h(e),a=t.getFullYear(),i=t.getMonth()+1,n=t.getDate(),o=t.getHours(),r=t.getMinutes();return 10>i&&(i="0"+i),10>n&&(n="0"+n),10>r&&(r="0"+r),a+"-"+i+"-"+n+" "+o+":"+r}}function v(e){var t=h(e),a=new Date,i=a.getTime()-t.getTime(),n=parseInt(i/36e5,10);return 1>n?n="刚刚":n+="小时前",n}function h(e){var t=e;return"string"==typeof e&&(t=new Date(e)),"number"==typeof e&&(t=new Date(1e3*e)),t}function g(e){if(e){var t=60,a=3600,i=86400,n="";return n=e>=i?Math.ceil(e/i)+"天":e>=a?Math.ceil(e/a)+"小时":e>=t?Math.ceil(e/t)+"分钟":e>0?e+"秒":"已过期"}}function w(e){var t=void 0,i=void 0;return"number"==typeof e?t=new Date(1e3*e):e instanceof Date&&(t=e),i=a(t)?v(t):n(t)?o(t):m(t)}function b(e){var t=e.createtime;e.day_str=w(t),e.createtime_str=m(t),"今天"===e.day_str&&(e.createtime_str=v(t)),"最近三天"===e.day_str&&(e.createtime_str=o(t))}{var y=new Date;y.getFullYear()}e.exports={dayStr:w,genTimeStr:b,getValidity:g,toDate:h,getHourStr:v,getExpriesDayNum:t,isToday:a,isYesterday:i,strYesterdayOrPre:o,isLast3days:r,isThisWeek:l,isThisYear:s,getMonOY:d,getWOY:c,getMOW:f,getDayOfWeek:u,getDayOfYear:p,getDateStr:w,getorcDateStr:m}},function(e){"use strict";function t(e){var t={fLen:3};if("number"!=typeof e)return"";for(var a,i=e,n=["B","KB","MB","GB","TB","PB"];i>1024;)i/=1024,n.shift();i>=1e3&&(i/=1024,n.shift());var o=((""+i).length,2),r=100;if(t&&t.len&&(o=t.len),0>o&&(o=0),r=Math.pow(10,o),i=Math.floor(i*r)/r,t&&t.fLen){var l=i.toString().indexOf(".");if(i.toString().length<=t.fLen){var s=parseInt(i,10).toString().length;i=i.toFixed(t.fLen-s)}else t.fLen<i.toString().length&&(i=i.toString(),i=l>0&&3>l?i.substr(0,4):i.substr(0,3))}return a=i.toString().replace(/\.0+$/,""),a+=n[0],0===i&&(a=0),a}function a(e){var t="unknow",a={excel:/xls|xlsx/i,pdf:/pdf/i,ppt:/ppt|pptx/i,word:/doc|docx|wps/i,text:/txt/i,pic:/jpg|jpeg|jpgx|gif|bmp|png/i,music:/mp3|wma|midi|aac|ape|flac|wav|ogg/i,video:/mp4|rm|rmvb|mpeg|mov|avi|3gp|amv|dmv|flv|wmv|qsed|asf/i,zip:/rar|zip|tar|cab|uue|jar|iso|7z|ace|lzh|arj|gzip|bz2/i,code:/ink|torrent|url|vbs|tif|w3g|vbe|ssf|dll|mht|rcd|bat|sav|dat|cmd|ttf|xml|vob|sgs|mhw|js|html|htm|css/i,exe:/exe|msi/i,ipa:/ipa/i,dmg:/dmg/i,apk:/apk/i};for(var i in a){var n=a[i];if(n.test(e)){t=i;break}}return t}function i(e){var t="其他",a={"文档":/doc|docx|ppt|pptx|xsl|xslx|xls|xlsx|pdf|txt|wps/i,"图片":/jpg|jpeg|jpgx|gif|bmp|png/i,"音乐":/mp3|wma|midi|aac/i,"视频":/mp4|rm|rmvb|mpeg|mov|avi|3gp|amv|dmv|flv|wmv|qsed/i,"压缩包":/rar|zip|tar|cab|uue|jar|iso|7z|ace|lzh|arj|gzip|bz2/i,"应用":/dmg/i};for(var i in a){var n=a[i];if(n.test(e)){t=i;break}}return t}function n(){return!1}function o(e){var t=e.lastIndexOf("."),a={};return t>=0?(a.filename_name=e.substr(0,t),a.filename_suf=e.substr(t)):(a.filename_name=e,a.filename_suf=""),a}function r(e){var t=e.lastIndexOf("\\"),a=e.substr(t+1);return a}e.exports={getSize:t,getIcon:a,getType:i,canEdit:n,getFileName:o,getFolderName:r}},function(e){"use strict";var t=function(){var e=/"|&|'|<|>|[\x00-\x20]|[\x7F-\xFF]|[\u0100-\u2700]/g,t=/&\w+;|&#(\d+);/g,a={"&lt;":"<","&gt;":">","&amp;":"&","&nbsp;":" ","&quot;":'"',"&copy;":""},i=function(t){return t=void 0!=t?t:"","string"!=typeof t?t:t.replace(e,function(e){var t=e.charCodeAt(0),a=["&#"];return t=32==t?160:t,a.push(t),a.push(";"),a.join("")})},n=function(e){e=void 0!=e?e:"";var i="string"!=typeof e?e:e.replace(t,function(e,t){var i=a[e];return void 0==i&&(i=isNaN(t)?e:String.fromCharCode(160==t?32:t)),i});return i=i.replace(/&#x2028;/g,"\u2028"),i=i.replace(/&#x2029;/g,"\u2029")};return{encodeHtml:i,decodeHtml:n}}();e.exports={encode:t.encodeHtml,decode:t.decodeHtml}},function(e){"use strict";function t(e){G.cMap||(G.cMap={});var t=G.cMap[e.id];return t||(t=G.cMap[e.filepath],t&&(t&&t.type.indexOf("upload")>=0&&e.type.indexOf("upload")>=0&&t.status!=e.status?(e.id&&(plistMap[e.id]=t),console.warn("new task 发现续传 id["+t.id+"] status["+t.status+"]")):"download"==e.type&&console.log(e))),t?void 0:(e.id&&(G.cMap[e.id]=e),e.filepath&&(G.cMap[e.filepath]=e),e)}function a(e){return G.cMap[e.id]||G.cMap[e.filepath]?!0:!1}function i(e){G.cMap[e.id]&&delete G.cMap[e.id],G.cMap[e.filepath]&&delete G.cMap[e.filepath]}function n(){}function o(){for(var e in G.cMap){var t=G.cMap[e];t&&"uploadcomplete"===t.status&&(delete G.cMap[t.id],delete G.cMap[t.filepath])}}e.exports={check:a,add:t,del:i,update:n,clearComplete:o}},function(e,t,a){"use strict";function i(e){var t=e.filepath,a=e.remoteType,i=e.fname,n=e.fp;n||(n=t.substr(4));var o=1==a?0:1,n=o+"<"+n+"<"+escape(i);return n}function n(e){for(var t="",a=0;a<e.length;a++)a>0&&(t+=":"),t+=i(e[a]);return t}var o=a(92),r={},l=$(G.handler);e.exports=r;var s=18e4;r.getThumb=function(e){if(G.flagThumb){var t=n(e),a={id:Math.floor((new Date).getTime()/1e3),fp_list:t};o.getPreview(a).done(function(t){if(0===t.ec){t.address_list||(t.address_list=[]);for(var a=0,i=e.length;i>a;a++){var n=e[a],o=t.address_list[a];o.t=(new Date).getTime(),n&&(n.usedTime=0,G.previewCache[n.filepath]=o,n.previewObj=o,l.trigger("file.thumbUpdate",n))}}}).fail(function(){})}},r.getOneThumb=function(e,t){var a=(new Date).getTime();try{if(a-e.previewObj.t<s&&e.usedTime<=3)return t(e),void 0}catch(n){console.log(n)}var r={id:Math.floor((new Date).getTime()/1e3),fp_list:i(e)};o.getPreview(r).done(function(a){if(0===a.ec){a.address_list||(a.address_list=[]);var i=a.address_list[0];i.t=(new Date).getTime(),e.usedTime=0,e.previewObj=i,t(e)}}).fail(function(){})}},function(e,t,a){"use strict";function i(){if(!G.isHistory){if(l++,l>s.length-1)return l=s.length-1,void 0;c(),reportNew("wayNext")}}function n(){if(!G.isHistory){if(l--,0>l)return l=0,void 0;c(),reportNew("wayPref")}}Object.defineProperty(t,"__esModule",{value:!0}),t.next=i,t.pref=n;var o=a(73),r=a(23),l=-1,s=[];G.historyList=s,G.historyIdx=l,G.webParams&&s.push(G.webParams),G.setHistory=function(e){l++,s.length-l>=1&&(s=s.slice(0,l)),s.push(e),d()};var d=function(){l>0?$(".history .left").removeClass("disable"):$(".history .left").addClass("disable"),l<s.length-1?$(".history .right").removeClass("disable"):$(".history .right").addClass("disable")};G.isHistory=!1;var c=function(){G.isHistory=!0,d();var e=s[l];"fileList"===e.action?o.renderFolder(e.params.folderId,e.params.fname):"undefined"!=typeof e.key_word&&($("#inputSearch").val(e.key_word),r.search())}},function(e,t,a){"use strict";var i=a(187),n=a(188),o=a(189),r=a(190),l=a(191),s=a(192),d=(a(193),a(75)),c=a(194),f=a(195);e.exports={"box.toggle":i.toggle,"task.continue":n.continueUpload,"task.pause":r.pause,"task.remove":l.remove,"task.resume":s.resume,"task.clear":o.clear,"task.openFolder":d.openByBox,"task.openFolderIco":d.openFolderByBoxIco,"tips.close":f.closeTips,"tips.refesh":f.refeshVip,"tips.con":f.conVip,"tips.vipOk":f.vipTipsOk,"tips.vipCancel":f.vipTipsCancel,"tips.open":f.openVip,"task.clearHistory":o.clear,"task.openfail":c.toggle}},function(e){"use strict";function t(){}e.exports={"input.edit":t}},function(e,t,a){"use strict";var i=a(67),n=function(){i.hideAll(),G.activeElement&&G.activeElement.focus()};e.exports={"panel.close":n}},function(e,t,a){"use strict";function i(){return $('[data-keyup="folderTree.create"]').length?(console.log("can not try to create more than one folder at the same time"),void 0):(report("createFolderInTree"),r.folderTree.newFolder(),r.folderTree.select("new"),$("#inputFolderNameInFolderTree").val(u.getFolderNameDefault()),$("#inputFolderNameInFolderTree")[0].focus(),$("#inputFolderNameInFolderTree")[0].select(),void 0)}function n(e){e.keyCode=13,o.call(this,e)}function o(e,t){if(e&&13!==e.keyCode&&$("#inputFolderNameInFolderTree").length)return s["input.keyup"].call(this,e),void 0;var a=$('[data-keyup="folderTree.create"]');if(!a.length)return t&&t(),void 0;if(t&&(m=t),!p){var i=$.trim(a.val()),n=s.folderName(i);if(n){var o={parent_id:"/",name:i};p=!0,d.createFolder(o).done(function(e){var t=c.filterFolder(e.folder_info);c.addData(t),r.list.appendFold(t);var a=$(".folder-tree-box").find('[data-id="new"].folder-list-item');a.html(l.folder({item:t})).attr("data-id",t.id),"new"===G.folderTree.selected.id&&f.select(t.id),report("createFolderInTreeSuc"),p=!1,m&&m(),m=!1}).fail(function(e){console.log("fail",e),p=!1;var t={134:"文件夹名称包含违禁词",313:"文件夹名已经存在",314:"创建文件夹失败",405:"文件夹个数已达上限","default":"创建失败"},a=Math.abs(e.ec),i=$(".folder-tree-box").find(".bubble");i.html('<span class="bot"></span><span class="top"></span>'+(t[a]||t["default"])).show(),setTimeout(function(){i.hide()},3e3)})}}}var r={folderTree:a(137),list:a(25)},l={folder:a(165)},s=a(76),d=(a(196),a(92)),c=a(77),f=a(137),u=a(18),p=!1,m=!1;e.exports={"folderTree.select":f.select,"folderTree.new":i,"folderTree.create":o,createInputBlur:n}},function(e,t,a){"use strict";function i(e){"offline"===e.action||"online"===e.action}var n=a(64),o=function(){var e=parseInt($(this).data("uin"));n.openGroupInfoCard(e)},r=function(){var e=parseInt($(this).data("uin")),t=G.fileMap()[$(this).data("path")]||{},a={action:"search",params:{keyword:G.searchKeyword,files:[{fileId:t.fp,busId:t.busid}]}};localStorage.setItem("notifyOtherGroup",encodeURIComponent(JSON.stringify({gc:e,webParams:JSON.stringify(a),random:Math.random()}))),n.openGroupFile(e,encodeURIComponent(JSON.stringify(a)))};e.exports={groupEvent:i,openGroupFile:r,openGroupInfoCard:o}},function(e,t,a){"use strict";var i=a(22),n=a(21),o=a(77),r=function(){G.activeElement=this},l=function(){var e=$(document.activeElement).parents(".list-item");if(0===e.length)return!1;var t=e.data("path"),a=void 0,i=o.getData(t);return 2===i.orcType?a="fold":1==i.orcType&&(a="file"),G.selectRow=i||{},G.selectRow.path=t,G.selectRow.type=a,G.selectRows=[G.selectRow],!0},s=function(){l()&&"fold"===G.selectRow.type&&n["folder.openfolder"]()},d=function(){l()&&("file"===G.selectRow.type?i["file.showRename"]():"fold"===G.selectRow.type&&n["folder.showRenameFolder"]())},c=function(){l()&&"fold"===G.selectRow.type&&n["folder.property"]()},f=function(){l()&&("file"===G.selectRow.type?i["file.showRename"]():"fold"===G.selectRow.type&&n["folder.showRenameFolder"]())},u=function(){l()&&"file"===G.selectRow.type&&i["file.preview"]()},p=function(){l()&&"file"===G.selectRow.type&&i["file.showMove"]()},m=function(){var e=arguments.length<=0||void 0===arguments[0]?!1:arguments[0];l()&&"file"===G.selectRow.type&&(e?i["file.forwardMobile"]():i["file.forward"]())},v=function(){l()&&"file"===G.selectRow.type&&i["file.jubao"]()},h=function(e){switch(e){case 65:$("#selectAllFile").click();break;case 66:$("#openBoxBtn").click();break;case 68:d();break;case 70:m();break;case 72:m(!0);break;case 74:v();break;case 76:doDownLoad();break;case 77:p();break;case 78:$("#createFolder button").click();break;case 79:s();break;case 80:c();break;case 82:f();break;case 85:$(".icons-upload-1").click();break;case 88:$(G.handler).trigger("panel.hideAll");break;case 89:u()}},g=function(e){e.altKey&&e.shiftKey&&h.call(this,e.keyCode)};e.exports={"aria.fmg":r,"aria.quick":g}},function(e,t,a){"use strict";function i(){var e=l(G.info);d.html(e)}function n(){var e=r({mac:G.mac});d.html(e)}function o(e,t){var a={data:!1,list:!1};"undefined"!=typeof t&&(t.hasOwnProperty("length")?a.list=t:a.data=t);var i=s(a);e.html(i)}var r=a(177),l=a(178),s=a(197),d=$("#fileMoreMenu");e.exports={renderFolder:i,renderFile:n,renderCustomMenu:o}},function(e,t,a){"use strict";function i(e){if(!r){var t=o();$("body").append(t),r=$("#jubaoDom"),l=$("#jubaoIframe")}e&&(r.addClass("open"),l.attr("src",e).addClass("open"))}function n(){r&&(r.removeClass("open"),l.removeClass("open"))}var o=a(176),r=void 0,l=void 0;e.exports={show:i,hide:n}},function(e){e.exports=function(e,t,a,i){function n(e){return o[e]||e}i=i||function(e,t,a,i){var n=t.split("\n"),o=Math.max(i-3,0),r=Math.min(n.length,i+3),l=n.slice(o,r).map(function(e,t){var a=t+o+1;return(a==i?" >> ":"    ")+a+"| "+e}).join("\n");throw e.path=a,e.message=(a||"ejs")+":"+i+"\n"+l+"\n\n"+e.message,e},t=t||function(e){return void 0==e?"":String(e).replace(r,n)};var o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},r=/[&<>'"]/g,l=1,s='<%\r\n	for(var i = 0,l = locals.list.length;i<l;i++){\r\n		var item = locals.list[i];\r\n%>\r\n<div class="file2 file2-2 <%-item.styles%>" data-path="<%-item.filepath%>" data-id="<%-item.id%>" data-folder="<%-item.folderpath%>" data-name="<%-item.filename%>" <%if(item.styleStatus === \'complete\'){%>data-action="task.openFolder"<%}%>>\r\n	<div class="file-icon">\r\n		<div class="filesmall-<%-item.icon%>"></div>\r\n		<i></i>\r\n	</div>\r\n	<div class="file-info">\r\n		<div class="filename">\r\n			<div class="name"><%-item.name%></div>\r\n			<%if(item.orcType === 1){%>\r\n				<div class="suffix"><%-item.suf%></div>\r\n			<%}%>\r\n		</div>\r\n		<div class="loading">\r\n			<div class="bar" style="width:<%-item.cPercent%>%;"></div>\r\n		</div>\r\n		<%if(item.failedFileList && item.failedFileList.length > 0){%>\r\n			<div class="wording"  data-action="task.openfail">\r\n				<i class=\'warn\'></i>有<%-item.failedFileList.length%>个文件下载失败<i class="arrow"></i>\r\n					<ul class="fail-list">\r\n						<%for(var j = 0,m = item.failedFileList.length;j<m;j++){%>\r\n							<li><%=item.failedFileList[j].filename%></li>\r\n						<%}%>\r\n					</ul>\r\n			</div>\r\n		<%}else{%>\r\n			<div class="wording"><%-item.wording%></div>		\r\n		<%}%>\r\n	</div>\r\n	<div class="file-action">\r\n		<a href="javascript:void(0)" class="seat"></a>\r\n		<a href="javascript:void(0)" class="pause" data-action="task.pause" title="暂停" aria-label="暂停任务 <%=item.name%>" tabindex="3"></a>\r\n		<a href="javascript:void(0)" class="resume" data-action="task.resume" title="启动" aria-label="启动任务 <%=item.name%>" tabindex="3"></a>\r\n		<a href="javascript:void(0)" class="continue" data-action="task.continue" title="续传" aria-label="续传任务 <%=item.name%>" tabindex="3"></a>\r\n		<a href="javascript:void(0)" class="remove" data-action="task.remove" title="删除"  aria-label="删除任务 <%=item.name%>" tabindex="3"></a>\r\n		<a href="javascript:void(0)" class="ok-upload"></a>\r\n		<a href="javascript:void(0)" class="ok-download"></a>\r\n		<a href="javascript:void(0)" class="go-folder" data-action="task.openFolderIco" title="打开该文件所在的文件夹" arir-label="打开<%=item.name%>所在的文件夹" tabindex="3"></a>\r\n	</div>\r\n	<div></div>\r\n</div>\r\n<%}%> ',d="D:\\qun\\clt_filetab\\src\\tpl\\taskNew.ejs";try{for(var c=[],f=c.push.bind(c),u=0,p=e.list.length;p>u;u++){var m=e.list[u];if(l=4,f('\r\n<div class="file2 file2-2 '),l=5,f(m.styles),f('" data-path="'),f(m.filepath),f('" data-id="'),f(m.id),f('" data-folder="'),f(m.folderpath),f('" data-name="'),f(m.filename),f('" '),"complete"===m.styleStatus&&f('data-action="task.openFolder"'),f('>\r\n	<div class="file-icon">\r\n		<div class="filesmall-'),l=7,f(m.icon),f('"></div>\r\n		<i></i>\r\n	</div>\r\n	<div class="file-info">\r\n		<div class="filename">\r\n			<div class="name">'),l=12,f(m.name),f("</div>\r\n			"),l=13,1===m.orcType&&(f('\r\n				<div class="suffix">'),l=14,f(m.suf),f("</div>\r\n			"),l=15),f('\r\n		</div>\r\n		<div class="loading">\r\n			<div class="bar" style="width:'),l=18,f(m.cPercent),f('%;"></div>\r\n		</div>\r\n		'),l=20,m.failedFileList&&m.failedFileList.length>0){f('\r\n			<div class="wording"  data-action="task.openfail">\r\n				<i class=\'warn\'></i>有'),l=22,f(m.failedFileList.length),f('个文件下载失败<i class="arrow"></i>\r\n					<ul class="fail-list">\r\n						'),l=24;for(var v=0,h=m.failedFileList.length;h>v;v++)f("\r\n							<li>"),l=25,f(t(m.failedFileList[v].filename)),f("</li>\r\n						"),l=26;f("\r\n					</ul>\r\n			</div>\r\n		"),l=29}else f('\r\n			<div class="wording">'),l=30,f(m.wording),f("</div>		\r\n		"),l=31;f('\r\n	</div>\r\n	<div class="file-action">\r\n		<a href="javascript:void(0)" class="seat"></a>\r\n		<a href="javascript:void(0)" class="pause" data-action="task.pause" title="暂停" aria-label="暂停任务 '),l=35,f(t(m.name)),f('" tabindex="3"></a>\r\n		<a href="javascript:void(0)" class="resume" data-action="task.resume" title="启动" aria-label="启动任务 '),l=36,f(t(m.name)),f('" tabindex="3"></a>\r\n		<a href="javascript:void(0)" class="continue" data-action="task.continue" title="续传" aria-label="续传任务 '),l=37,f(t(m.name)),f('" tabindex="3"></a>\r\n		<a href="javascript:void(0)" class="remove" data-action="task.remove" title="删除"  aria-label="删除任务 '),l=38,f(t(m.name)),f('" tabindex="3"></a>\r\n		<a href="javascript:void(0)" class="ok-upload"></a>\r\n		<a href="javascript:void(0)" class="ok-download"></a>\r\n		<a href="javascript:void(0)" class="go-folder" data-action="task.openFolderIco" title="打开该文件所在的文件夹" arir-label="打开'),l=41,f(t(m.name)),f('所在的文件夹" tabindex="3"></a>\r\n	</div>\r\n	<div></div>\r\n</div>\r\n'),l=45}return f(" "),c.join("")}catch(g){i(g,s,d,l)}}},function(e){e.exports=function(e,t,a,i){function n(e){return o[e]||e}i=i||function(e,t,a,i){var n=t.split("\n"),o=Math.max(i-3,0),r=Math.min(n.length,i+3),l=n.slice(o,r).map(function(e,t){var a=t+o+1;return(a==i?" >> ":"    ")+a+"| "+e}).join("\n");throw e.path=a,e.message=(a||"ejs")+":"+i+"\n"+l+"\n\n"+e.message,e},t=t||function(e){return void 0==e?"":String(e).replace(r,n)};var o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},r=/[&<>'"]/g,l=1,s='		<div class="panel">\n			<div class="panel-title">\n				<i class="icons-qq"></i>\n				<span>文件夹属性</span>\n				<div class="close" data-action="panel.close"></div>\n			</div>\n			<div class="panel-body">\n				<div class="panel-content">\n					<div class="folder-property-top">\n						<div class="files-folder filesmall-folder"></div>\n						<div class="folder-title">\n							<div class="folder-name"><%-locals.fname%></div>\n							<div class="folder-size">共<%=locals.filenum%>个文件</div>\n						</div>\n					</div>\n					<div class="folder-property-bottom">\n						<div class="created-at">\n							<span class="folder-property-label">创建时间:</span>\n							<span class="folder-property-content"><%=locals.ctStr%></span>\n						</div>\n						<div class="creator">\n							<span class="folder-property-label">创&nbsp;&nbsp;建&nbsp;&nbsp;人:</span>\n							<span class="folder-property-content"><%-locals.nick%></span>\n						</div>\n						<div class="updated-at">\n							<span class="folder-property-label">最后更新时间:</span>\n							<span class="folder-property-content"><%=locals.mtStr%></span>\n						</div>\n						<div class="updater">\n							<span class="folder-property-label">最&nbsp;后&nbsp;更&nbsp;新&nbsp;人:</span>\n							<span class="folder-property-content"><%-locals.mnick%></span>\n						</div>\n					</div>\n				</div>\n			</div>\n			<a href="javascript:void(0);" class="aria-hide" tabindex="3" aria-label="文件夹<%-locals.fname%>共<%=locals.filenum%>个文件 创建时间:<%=locals.ctStr%> 创建人:<%-locals.nick%> 最后更新人:<%-locals.mnick%>"></a>\n			<a href="javascript:void(0);" class="aria-hide" data-action="panel.close" tabindex="3" aria-label="关闭文件夹属性窗口"></a>\n			<%if(G.mac){%>\n				<div class="panel-footer">\n					<input aria-label="确定" type="submit" value="确定" class="btn-ok btn-common btn-right" data-action="panel.close" tabindex="2">\n				</div>\n			<%}%>\n		</div>\n\n',d="D:\\qun\\clt_filetab\\src\\tpl\\folderproperty.ejs";try{var c=[],f=c.push.bind(c);return f('		<div class="panel">\n			<div class="panel-title">\n				<i class="icons-qq"></i>\n				<span>文件夹属性</span>\n				<div class="close" data-action="panel.close"></div>\n			</div>\n			<div class="panel-body">\n				<div class="panel-content">\n					<div class="folder-property-top">\n						<div class="files-folder filesmall-folder"></div>\n						<div class="folder-title">\n							<div class="folder-name">'),l=12,f(e.fname),f('</div>\n							<div class="folder-size">共'),l=13,f(t(e.filenum)),f('个文件</div>\n						</div>\n					</div>\n					<div class="folder-property-bottom">\n						<div class="created-at">\n							<span class="folder-property-label">创建时间:</span>\n							<span class="folder-property-content">'),l=19,f(t(e.ctStr)),f('</span>\n						</div>\n						<div class="creator">\n							<span class="folder-property-label">创&nbsp;&nbsp;建&nbsp;&nbsp;人:</span>\n							<span class="folder-property-content">'),l=23,f(e.nick),f('</span>\n						</div>\n						<div class="updated-at">\n							<span class="folder-property-label">最后更新时间:</span>\n							<span class="folder-property-content">'),l=27,f(t(e.mtStr)),f('</span>\n						</div>\n						<div class="updater">\n							<span class="folder-property-label">最&nbsp;后&nbsp;更&nbsp;新&nbsp;人:</span>\n							<span class="folder-property-content">'),l=31,f(e.mnick),f('</span>\n						</div>\n					</div>\n				</div>\n			</div>\n			<a href="javascript:void(0);" class="aria-hide" tabindex="3" aria-label="文件夹'),l=36,f(e.fname),f("共"),f(t(e.filenum)),f("个文件 创建时间:"),f(t(e.ctStr)),f(" 创建人:"),f(e.nick),f(" 最后更新人:"),f(e.mnick),f('"></a>\n			<a href="javascript:void(0);" class="aria-hide" data-action="panel.close" tabindex="3" aria-label="关闭文件夹属性窗口"></a>\n			'),l=38,G.mac&&(f('\n				<div class="panel-footer">\n					<input aria-label="确定" type="submit" value="确定" class="btn-ok btn-common btn-right" data-action="panel.close" tabindex="2">\n				</div>\n			'),l=42),f("\n		</div>\n\n"),l=45,c.join("")}catch(u){i(u,s,d,l)}}},function(e){e.exports=function(e,t,a,i){function n(e){return o[e]||e}i=i||function(e,t,a,i){var n=t.split("\n"),o=Math.max(i-3,0),r=Math.min(n.length,i+3),l=n.slice(o,r).map(function(e,t){var a=t+o+1;return(a==i?" >> ":"    ")+a+"| "+e}).join("\n");throw e.path=a,e.message=(a||"ejs")+":"+i+"\n"+l+"\n\n"+e.message,e},t=t||function(e){return void 0==e?"":String(e).replace(r,n)};var o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},r=/[&<>'"]/g,l=1,s='<section class="file-list" id="<%-locals.id%>"></section>',d="D:\\qun\\clt_filetab\\src\\tpl\\folderdom.ejs";try{var c=[],f=c.push.bind(c);return f('<section class="file-list" id="'),f(e.id),f('"></section>'),c.join("")}catch(u){i(u,s,d,l)}}},function(e,t,a){"use strict";function i(){p=c.getCookie("skey");for(var e=5381,t=0,a=p.length;a>t;++t)e+=(e<<5)+p.charCodeAt(t);var i=2147483647&e;return i}function n(){var e=c.getCookie("uin");return e?(e+="",e.replace(/^[\D0]+/g,"")):0}function o(){return!1}function r(e){var t;t=500>e?2220106:2e3>e?2220107:4e3>e?2220108:6e3>e?2220109:8e3>e?2220110:1e4>e?2220111:12e3>e?2220112:15e3>e?2220113:2e4>e?2220114:25e3>e?2220115:3e4>e?2220116:4e4>e?2220117:5e4>e?2220118:6e4>e?2220119:2220120,QReport.monitor(t)}function l(e,t){var a={get_vip_info:3,checkAuditFlag:4,get_file_list:5,get_group_space:6,move_file:7,rename_file:8,create_folder:9,rename_folder:10,delete_folder:11,thumbnail:12},i=e.split("/"),n=a[i[i.length-1]];n&&QReport.huatuo({appid:10016,flag1:1772,flag2:1,flag3:n,speedTime:t})}function s(e,t){if(f){0===e.indexOf("//")&&(e=G.checkHttps()?"https:"+e:"http:"+e);var a=e.substr(0,e.indexOf("?"));if(e.indexOf("?")<0&&(a=e),$.inArray(e,v)<0){var i=f.getEntriesByName(e)[0];if(!i)return;v.push(e);var n={1:i.redirectEnd-i.redirectStart,2:i.domainLookupStart-i.fetchStart,3:i.domainLookupEnd-i.domainLookupStart,4:i.connectEnd-i.connectStart,5:i.responseStart-i.requestStart,6:i.responseEnd-i.responseStart,7:i.responseEnd-i.startTime,8:i.fetchStart,9:i.domainLookupStart};l(a,n),n.url=e,r(n[2]),n[2]>5e3&&(QReport.monitor(2220299),badjsReport.info(JSON.stringify({"重定向":n[1],appcache:n[2],dns:n[3],tcp:n[4],"接收":n[5],"完成":n[6],"总时间":n[7],fetchStart:i.fetchStart,dnsstart:i.domainLookupStart,header:t.getAllResponseHeaders&&t.getAllResponseHeaders()||!1,status:t.status,t:"0427",url:e,"离线包":"isLocal"===localVersion?"离线包请求":"非离线包请求"})))}}}function d(e,t){var a=Date.now();t=t||e.responseURL,e.done(function(i){QReport.retcode({url:t,type:1,code:i.ec,time:Date.now()-a,rate:1}),setTimeout(function(){s(t,e)},100),1==i.ec&&console.log("1","缺少登录态")}).fail(function(e,i){s(t);var n={status:e.status,statusText:e.statusText};"timeout"==i&&(n.status=999,n.statusText="timeout"),QReport.retcode({url:t,type:2,code:n.status,time:Date.now()-a,rate:1})})}var c=a(18),f=window.performance,u={};e.exports=u;var p=(c.getParameter("gc"),c.getCookie("skey")),m=(n(),c.getParameter("groupuin"),i()),v=[];u.ajax=function(e){var t={type:"GET",dataType:"json",data:{src:"qpan",gc:e&&e.data&&e.data.gc||c.getParameter("groupuin")},xhrFields:{withCredentials:!0},success:function(){}};m&&(t.data.bkn=i()),$.extend(!0,t,e),t.headers={"Cache-Control":"no-cache,no-store"},"GET"===t.type&&(t.url+=t.url.indexOf("?")<0?"?"+$.param(t.data):"&"+$.param(t.data),t.url+="&_ti="+(new Date).getTime(),delete t.data);var a=$.ajax(t);d(a,t.url);var n={done:function(e){var i=0;return function n(e,a){e.done(function(e){0==e.ec&&a(e)}),e.fail(function(){i>=1||o(t.url)||(i++,e=$.ajax(t),d(e,t.url),n(e,a))})}(a,e),this},fail:function(e){var i=0;return function n(e,a){e.done(function(e){0!=e.ec&&a(e)}),e.fail(function(o,r){return i>=0?"timeout"==r?(report("cgiTimeout"),a({ec:504,msg:r})):a({ec:o.status}):(i++,e=$.ajax(t),d(e,t.url),n(e,a),void 0)})}(a,e),this},timeout:function(e){return a.fail(function(t,a){"timeout"==a&&e({ec:504,msg:a})}),this},always:function(e){return a.always(e),this},then:function(){return a.then.apply(a,arguments),this}};return n},u.bkn=m},function(e,t,a){"use strict";function i(e){var t=d.errorCfgPrefix[e.type]+"-"+e.status;return t in d.errorCfg&&d.errorCfg?!0:!1}function n(e){if(!e||!e.type||!e.status)return"";var t=d.errorCfgPrefix[e.type]+"-"+e.status;return t in d.errorCfg?"upload-uploadsecurityfail"===t&&d.securityattriMap[e.securityattri]?d.securityattriMap[e.securityattri]:d.errorCfg[t]:void 0}function o(e,t){return d.wordingMap[e][t]}function r(e,t){return d.styleMap[e][t]}function l(e){return d.typeMap[e]}function s(e,t){return e?(d.wordingMap[e]||console.warn("设置wording 未知任务类型=["+e+"]"),d.wordingMap[e][t]||console.warn("设置wording 未知任务状态=["+t+"]"),d.styleMap[e][t]||console.warn("设置样式 未知任务状态=["+t+"]"),void 0):!1}var d=a(158);e.exports={check:s,getType:l,getWord:o,getClass:r,ifError:i,getErrorWord:n}},function(e){"use strict";var t={upload:"upload",continueupload:"continueupload",download:"download"},a={};a.upload={scanning:"扫描中...&nbsp;&nbsp;",scanfail:"扫描失败&nbsp;&nbsp;",scanend:"扫描完成...&nbsp;&nbsp;",uploadgeturl:"准备上传...&nbsp;&nbsp;",uploadgeturlend:"上传中...&nbsp;&nbsp;",uploadadminonlyfail:"无法上传，已限制成员上传文件",uploadgeturlfail:"申请上传地址失败",uploadlimit:"文件个数达到上限，无法上传",uploadsecurityfail:"安全扫描失败",cancel:"空间不足,已取消上传",uploadprogress:"上传中:&nbsp;&nbsp;",uploadfail:"上传失败",uploadcomplete:"上传完成&nbsp;&nbsp;",filenotexsit:"文件不存在",pause:"暂停&nbsp;&nbsp;","continue":"待续传&nbsp;&nbsp;"},a.download={wait:"等待下载...&nbsp;&nbsp;",downloadready:"准备下载...&nbsp;&nbsp;",downloadgeturl:"准备下载...&nbsp;&nbsp;",downloadgeturlfail:"获取下载地址失败",cancel:"已取消下载&nbsp;&nbsp;",downloadgeturlend:"下载中...",downloadprogress:"下载中:&nbsp;&nbsp;",downloadfail:"下载失败&nbsp;&nbsp;",filenotexsit:"文件不存在",downloadcomplete:"下载完成&nbsp;&nbsp;",pause:"暂停&nbsp;&nbsp;"},a.continueupload={scanning:"扫描中...&nbsp;&nbsp;",scanfail:"扫描失败&nbsp;&nbsp;",scanend:"扫描完成...&nbsp;&nbsp;",uploadgeturl:"准备续传...&nbsp;&nbsp;",uploadgeturlend:"续传中...&nbsp;&nbsp;",uploadgeturlfail:"申请续传地址失败",uploadlimit:"文件个数达到上限，无法上传",uploadsecurityfail:"安全扫描失败",cancel:"空间不足,已取消续传",uploadprogress:"续传中:&nbsp;&nbsp;",uploadfail:"续传失败",uploadcomplete:"续传完成&nbsp;&nbsp;",pause:"暂停&nbsp;&nbsp;",filenotexsit:"文件不存在","continue":"待续传&nbsp;&nbsp;"};var i={};i.upload={scanning:"scan",scanfail:"err",scanend:"scan",uploadgeturl:"pre",uploadgeturlend:"pre",uploadgeturlfail:"err",uploadsecurityfail:"err",cancel:"err",uploadprogress:"progress",uploadfail:"err",uploadcomplete:"complete",pause:"pause",filenotexsit:"err","continue":"continue",remove:""},i.download={wait:"pre",downloadready:"pre",downloadgeturl:"pre",downloadgeturlfail:"err",cancel:"err",downloadgeturlend:"pre",downloadprogress:"progress",downloadfail:"err",filenotexsit:"err",downloadcomplete:"complete",pause:"pause"},i.continueupload={scanning:"scan",scanfail:"err",scanend:"scan",uploadgeturl:"pre",uploadgeturlend:"pre",uploadgeturlfail:"err",uploadsecurityfail:"err",cancel:"err",uploadprogress:"progress",uploadfail:"err",uploadcomplete:"complete",pause:"pause",filenotexsit:"err","continue":"continue",remove:""};var n={upload:"upload",download:"download",continueupload:"upload"},o=["安全","扫描到病毒，已取消上传","扫描到未知风险","扫描到安全风险","扫描到安全风险","扫描到安全风险","文件包含敏感词"],r={"download-downloadgeturlfail":"下载失败,请稍候再试","download-cancel":"","download-downloadfail":"下载失败","upload-scanfail":"扫描失败,请稍候再试","upload-uploadgeturlfail":"上传失败","upload-uploadsecurityfail":"上传安全扫描失败","upload-cancel":"空间不足,已取消上传","upload-uploadfail":"上传失败,请稍候再试",folderLimit:"文件夹个数以达上限"},l=300;e.exports={errorCfg:r,errorCfgPrefix:n,securityattriMap:o,styleMap:i,wordingMap:a,typeMap:t,refreshTime:l}},function(e,t){"use strict";function a(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}var i=function(e){if(e.BJ_REPORT)return e.BJ_REPORT;var t=[],i=e.onerror;e.onerror=function(t,a,n,r,l){var d=t;l&&l.stack&&(d=s(l)),o(d,"Event")&&(d+=d.type?"--"+d.type+"--"+(d.target?d.target.tagName+"--"+d.target.src:""):""),v.push({msg:d,target:a,rowNum:n,colNum:r}),m(),i&&i.apply(e,arguments)
};var n={id:0,uin:0,url:"",combo:1,ext:{},level:4,ignore:[],random:1,delay:1e3,submit:null},o=function(e,t){return Object.prototype.toString.call(e)==="[object "+(t||"Object")+"]"},r=function(e){var t="undefined"==typeof e?"undefined":a(e);return"object"===t&&!!e},l=function(e){try{if(e.stack){var t=e.stack.match("http://[^\n]+");t=t?t[0]:"";var a=t.match(":([0-9]+):([0-9]+)");a||(a=[0,0,0]);var i=s(e);return{msg:i,rowNum:a[1],colNum:a[2],target:t.replace(a[0],"")}}return e}catch(n){return e}},s=function(e){var t=e.stack.replace(/\n/gi,"").split(/\bat\b/).slice(0,5).join("@").replace(/\?[^:]+/gi,""),a=e.toString();return t.indexOf(a)<0&&(t=a+"@"+t),t},d=function(e,t){var a=[],i=[],o=[];if(r(e)){e.level=e.level||n.level;for(var l in e){var s=e[l]||"";if(s){if(r(s))try{s=JSON.stringify(s)}catch(d){s="[BJ_REPORT detect value stringify error] "+d.toString()}o.push(l+":"+s),a.push(l+"="+encodeURIComponent(s)),i.push(l+"["+t+"]="+encodeURIComponent(s))}}}return[i.join("&"),o.join(","),a.join("&")]},c=[],f=function(e){if(n.submit)n.submit(e);else{var t=new Image;c.push(t),t.src=e}},u=[],p=0,m=function(e){if(n.report){for(;t.length;){for(var a=!1,i=t.shift(),r=d(i,u.length),l=0,s=n.ignore.length;s>l;l++){var c=n.ignore[l];if(o(c,"RegExp")&&c.test(r[1])||o(c,"Function")&&c(i,r[1])){a=!0;break}}a||(n.combo?u.push(r[0]):f(n.report+r[2]+"&_t="+ +new Date),n.onReport&&n.onReport(n.id,i))}var m=u.length;if(m){var v=function(){clearTimeout(p),f(n.report+u.join("&")+"&count="+m+"&_t="+ +new Date),p=0,u=[]};e?v():p||(p=setTimeout(v,n.delay))}}},v={push:function(e){return Math.random()>=n.random?v:(t.push(r(e)?l(e):{msg:e}),m(),v)},report:function(e){return e&&v.push(e),m(!0),v},info:function(e){return e?(r(e)?e.level=2:e={msg:e,level:2},v.push(e),v):v},debug:function(e){return e?(r(e)?e.level=1:e={msg:e,level:1},v.push(e),v):v},init:function(e){if(r(e))for(var t in e)n[t]=e[t];var a=parseInt(n.id,10);return a&&(n.report=(n.url||"//badjs2.qq.com/badjs")+"?id="+a+"&uin="+parseInt(n.uin||(document.cookie.match(/\buin=\D+(\d+)/)||[])[1],10)+"&from="+encodeURIComponent(location.href)+"&ext="+JSON.stringify(n.ext)+"&"),v},__onerror__:e.onerror};return v}(window);t.createReport=function(e){e=e||{};var t=e.id;if(!t)throw new Error("id is required");return i.init({id:t}),i}},function(e,t,a){"use strict";function i(e){if(e)if(G.version>=r&&e.admin){console.debug(" input and edit file:",e);var t=e.localpath;"string"==typeof t&&t.indexOf("OSRoot")<0&&(t="OSRoot:\\"+t);var a=window.external.isFileExist(t);if("false"==a||a===!1)return n.alert(2,"提示","此文件不存在，可能已被删除或被移动到其他位置"),o.changeOpenFolder2Download(e),!1;var i={filepath:e.filepath,name:e.fnameEsc,fp:e.fp,md5:e.md5,localpath:t},l=n.onlineEditFile(e.parentId,JSON.stringify(i));if(console.debug("start online edit",l," param is ",i),"success"==l)return G.editFileList[e.filepath]=1,!0;if("file cannot open"===l){var s=n.confirm(2,"提示","此文件无法识别并打开，是否在文件夹中查看该文件？");if(0!==s.errorCode||!s.ret)return!1;o.openByPath(e)}}else o.openByPath(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.edit=i;var n=(a(77),a(92),a(64)),o=(a(25),a(75)),r=($(G.handler),5495);G.editFileList={}},function(e,t,a){"use strict";function i(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function n(e){if("object"!==("undefined"==typeof e?"undefined":i(e)))return console.error("onFiletransporterEvent param parse error"),void 0;var t=e.event,a=e.task,n={newtask:"newtask",taskcomplete:"taskcomplete",taskpause:"taskpause",taskresume:"taskresume",startprogress:"taskprogress",taskabort:"taskabort"};"undefined"!=typeof n[t]&&"undefined"!=typeof r[n[t]]&&(a=o.get(a),r[n[t]](a),$(G.handler).trigger("task.startRefresh"))}var o=a(91),r={newtask:a(198),taskcomplete:a(199),taskpause:a(200),taskresume:a(201),taskprogress:a(202),taskabort:a(203)};e.exports={fileEvent:n}},function(e,t,a){"use strict";function i(e){o.showUpload(e)}function n(e){for(var t=e.fileList,a=[],i=0,n=t.length;n>i;i++){var r=t[i];a.push(r.filepath)}o.batchuploadInFolder(G.nowFolder,a)}var o=a(95);e.exports={uploadEvent:i,dropEvent:n}},function(e){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t,a){var i=a(204);e.exports=function(e){var t,a=[],n=e||{};return function(e,n,o,r,l,s,d,c){a.push('<!-- 移动文件/上传文件 公用模态框--><div id="folderTreePanel" role="panel" class="panel-overlay folder-tree-panel"><div class="panel"><div class="panel-title"><i class="icons-qq"></i><span>'+i.escape(null==(t=c)?"":t)+'</span><div data-action="panel.close" data-dismiss="panel" aria-label="取消" class="close"></div></div><div class="panel-body"><div class="panel-content"><div class="selected-files"><span class="file-name">'+(null==(t=s)?"":t)+"</span>"),l>1&&a.push('						等 <span class="file-number">'+(null==(t=l)?"":t)+"</span> 个文件"),a.push('</div><div class="translateTo"><span class="translateTo-label">'+i.escape(null==(t=n)?"":t)+'</span><span class="little-folder-icon"></span><div data-role="dest" class="selected-folder-name">'+(null==(t=r)?"":t)+'</div></div><div class="folder-tree-box"></div></div></div><div class="panel-footer">'),(o=e.info.isAdmin)&&a.push('<input type="submit" value="新建文件夹" data-action="folderTree.new" class="btn-create btn-common"/>'),a.push('<input type="submit" value="取消" data-action="panel.close" data-dismiss="panel" tabindex="3" class="btn-no btn-common btn-right"/><input type="submit" value="确定"'+i.attr("data-action",""+d,!0,!1)+' tabindex="3" class="btn-ok btn-common btn-right"/></div></div></div>')}.call(this,"G"in n?n.G:"undefined"!=typeof G?G:void 0,"action"in n?n.action:"undefined"!=typeof action?action:void 0,"canCreatFolder"in n?n.canCreatFolder:"undefined"!=typeof canCreatFolder?canCreatFolder:void 0,"destFolder"in n?n.destFolder:"undefined"!=typeof destFolder?destFolder:void 0,"fileNum"in n?n.fileNum:"undefined"!=typeof fileNum?fileNum:void 0,"firstFileName"in n?n.firstFileName:"undefined"!=typeof firstFileName?firstFileName:void 0,"okAction"in n?n.okAction:"undefined"!=typeof okAction?okAction:void 0,"title"in n?n.title:"undefined"!=typeof title?title:void 0),a.join("")}},function(e,t,a){a(204);e.exports=function(e){var t,a=[],i=e||{};return function(e){a.push('<!--文件夹模板--><div class="whole-row"></div><div class="folder-info"><span class="little-folder-icon"></span><span class="folder-name">'+(null==(t=e.fname)?"":t)+"</span></div>")}.call(this,"item"in i?i.item:"undefined"!=typeof item?item:void 0),a.join("")}},,,,,,,,,,,function(e){e.exports=function(e,t,a,i){function n(e){return o[e]||e}i=i||function(e,t,a,i){var n=t.split("\n"),o=Math.max(i-3,0),r=Math.min(n.length,i+3),l=n.slice(o,r).map(function(e,t){var a=t+o+1;return(a==i?" >> ":"    ")+a+"| "+e}).join("\n");throw e.path=a,e.message=(a||"ejs")+":"+i+"\n"+l+"\n\n"+e.message,e},t=t||function(e){return void 0==e?"":String(e).replace(r,n)};var o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},r=/[&<>'"]/g,l=1,s='  <div class="panel-con jubao-panel" id="jubaoDom">\r\n    <iframe class="frame-jubao" id="jubaoIframe" frameborder="0" scrolling="no"></iframe>\r\n  </div>',d="D:\\qun\\clt_filetab\\src\\tpl\\jubao.ejs";try{var c=[],f=c.push.bind(c);return f('  <div class="panel-con jubao-panel" id="jubaoDom">\r\n    <iframe class="frame-jubao" id="jubaoIframe" frameborder="0" scrolling="no"></iframe>\r\n  </div>'),l=3,c.join("")}catch(u){i(u,s,d,l)}}},function(e){e.exports=function(e,t,a,i){function n(e){return o[e]||e}i=i||function(e,t,a,i){var n=t.split("\n"),o=Math.max(i-3,0),r=Math.min(n.length,i+3),l=n.slice(o,r).map(function(e,t){var a=t+o+1;return(a==i?" >> ":"    ")+a+"| "+e}).join("\n");throw e.path=a,e.message=(a||"ejs")+":"+i+"\n"+l+"\n\n"+e.message,e},t=t||function(e){return void 0==e?"":String(e).replace(r,n)};var o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},r=/[&<>'"]/g,l=1,s='		<li class="item with-icon-item disable" id="filePreview" data-action="file.menupreview" aria-label="预览"><span class="icons-preview"></span><span class="menu-item-label">预览</span></li>\n		<%if(!G.mac){%>\n			<li class="item" id="fileFoward" data-action="file.forward" aria-label="转发">转发</li>\n			<li class="item" id="fileFowardTo" data-action="file.forwardMobile" aria-label="转发到手机" tabindex="1">转发到手机</li>\n		<%}%>\n		<li class="item save-as open-folder with-icon-item" id="fileOpenFolder" data-action="file.openFolderInBox" aria-label="在文件夹中显示" tabindex="1"><span class="icons-menu-save-as"></span><span class="menu-item-label">在文件夹中显示</span></li>\n		<li class="gap" tabindex="1"></li>\n		<li class="item rename" id="renameFile" data-action="file.showRename" aria-label="重命名" tabindex="1">重命名</li>\n		<li class="item forever disable" id="foreverFile" data-action="file.permanent" aria-label="转存为永久文件" tabindex="-1">转存为永久文件</li>\n		<%if(G.info.isAdmin){%>\n		<li class="item " id="fileMove" data-action="file.showMove" aria-label="移动" tabindex="-1">移动</li>\n		<%}%>\n		<li class="item jubao" id="fileJubao" data-action="file.jubao" aria-label="举报" tabindex="1">举报</li>\n		<li class="gap" tabindex="1"></li>\n		<li class="item delete with-icon-item" data-action="file.delete" id="fileDelete" aria-label="删除" tabindex="1"><span class="icons-trash"></span><span class="menu-item-label">删除</span></li>\n',d="D:\\qun\\clt_filetab\\src\\tpl\\fileMenu.ejs";try{var c=[],f=c.push.bind(c);return f('		<li class="item with-icon-item disable" id="filePreview" data-action="file.menupreview" aria-label="预览"><span class="icons-preview"></span><span class="menu-item-label">预览</span></li>\n		'),l=2,G.mac||(f('\n			<li class="item" id="fileFoward" data-action="file.forward" aria-label="转发">转发</li>\n			<li class="item" id="fileFowardTo" data-action="file.forwardMobile" aria-label="转发到手机" tabindex="1">转发到手机</li>\n		'),l=5),f('\n		<li class="item save-as open-folder with-icon-item" id="fileOpenFolder" data-action="file.openFolderInBox" aria-label="在文件夹中显示" tabindex="1"><span class="icons-menu-save-as"></span><span class="menu-item-label">在文件夹中显示</span></li>\n		<li class="gap" tabindex="1"></li>\n		<li class="item rename" id="renameFile" data-action="file.showRename" aria-label="重命名" tabindex="1">重命名</li>\n		<li class="item forever disable" id="foreverFile" data-action="file.permanent" aria-label="转存为永久文件" tabindex="-1">转存为永久文件</li>\n		'),l=10,G.info.isAdmin&&(f('\n		<li class="item " id="fileMove" data-action="file.showMove" aria-label="移动" tabindex="-1">移动</li>\n		'),l=12),f('\n		<li class="item jubao" id="fileJubao" data-action="file.jubao" aria-label="举报" tabindex="1">举报</li>\n		<li class="gap" tabindex="1"></li>\n		<li class="item delete with-icon-item" data-action="file.delete" id="fileDelete" aria-label="删除" tabindex="1"><span class="icons-trash"></span><span class="menu-item-label">删除</span></li>\n'),l=16,c.join("")}catch(u){i(u,s,d,l)}}},function(e){e.exports=function(e,t,a,i){function n(e){return o[e]||e}i=i||function(e,t,a,i){var n=t.split("\n"),o=Math.max(i-3,0),r=Math.min(n.length,i+3),l=n.slice(o,r).map(function(e,t){var a=t+o+1;return(a==i?" >> ":"    ")+a+"| "+e}).join("\n");throw e.path=a,e.message=(a||"ejs")+":"+i+"\n"+l+"\n\n"+e.message,e},t=t||function(e){return void 0==e?"":String(e).replace(r,n)};var o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},r=/[&<>'"]/g,l=1,s='		<li class="download-item with-icon-item download-folder" id="folderDownloadLink" data-action="folder.download"><span class="icons-download"></span><span class="menu-item-label">下载</span></li>\n		<li class="with-icon-item open-in-folder disable" id="showInFolderLink" data-action="folder.openfolder"><span class="icons-menu-save-as"></span><span class="menu-item-label">在文件夹中显示</span></li>\n		<%if(locals.isAdmin){%>\n		<li class="rename-item" id="folderRenameLink" data-action="folder.showRenameFolder">重命名</li>\n		<%}%>\n		<li class="property-item" id="folderPropLink" data-action="folder.property">文件夹属性</li>\n		<li class="gap"></li>\n		<%if(locals.isAdmin){%>\n		<li class="delete-item with-icon-item" id="folderDeleteLink" data-action="folder.showDeleteFolder"><span class="icons-trash"></span><span class="menu-item-label">删除</span></li>\n		<%}else{%>\n		<li class="item jubao" data-action="file.jubao" id="folderJubaoLink" aria-label="举报" tabindex="1">举报</li>\n		<%}%>\n',d="D:\\qun\\clt_filetab\\src\\tpl\\folderMenu.ejs";try{var c=[],f=c.push.bind(c);return f('		<li class="download-item with-icon-item download-folder" id="folderDownloadLink" data-action="folder.download"><span class="icons-download"></span><span class="menu-item-label">下载</span></li>\n		<li class="with-icon-item open-in-folder disable" id="showInFolderLink" data-action="folder.openfolder"><span class="icons-menu-save-as"></span><span class="menu-item-label">在文件夹中显示</span></li>\n		'),l=3,e.isAdmin&&(f('\n		<li class="rename-item" id="folderRenameLink" data-action="folder.showRenameFolder">重命名</li>\n		'),l=5),f('\n		<li class="property-item" id="folderPropLink" data-action="folder.property">文件夹属性</li>\n		<li class="gap"></li>\n		'),l=8,e.isAdmin?(f('\n		<li class="delete-item with-icon-item" id="folderDeleteLink" data-action="folder.showDeleteFolder"><span class="icons-trash"></span><span class="menu-item-label">删除</span></li>\n		'),l=10):(f('\n		<li class="item jubao" data-action="file.jubao" id="folderJubaoLink" aria-label="举报" tabindex="1">举报</li>\n		'),l=12),f("\n"),l=13,c.join("")}catch(u){i(u,s,d,l)}}},,,,,,,function(e,t,a){var i=a(204);e.exports=function(e){var t,a=[],n=e||{};return function(e,n){a.push('<!--文件夹树模板--><ul data-action="file_active" role="tree" class="primary-folder-list"><li'+i.attr("data-id",""+n.id,!0,!1)+' data-action="folderTree.select" class="folder-list-item"><div class="whole-row"> </div><div class="folder-info"><span class="little-folder-icon"></span><span class="folder-name">'+(null==(t=n.fname)?"":t)+'</span><a href="javascript:void(0)"'+i.attr("data-id",""+n.id,!0,!1)+' data-action="folderTree.select" role="treeitem" tabindex="3"'+i.attr("aria-label","选择文件夹:"+n.fname,!0,!1)+' class="aria-hide"></a></div><ul class="secondary-folder-list">'),function(){var n=e;if("number"==typeof n.length)for(var o=0,r=n.length;r>o;o++){var l=n[o];a.push("<li"+i.attr("data-id",""+(l&&l.id),!0,!1)+' data-action="folderTree.select" class="folder-list-item"><div class="whole-row"></div><div class="folder-info"><div class="little-folder-icon"></div><div class="folder-name">'+(null==(t=l&&l.fname)?"":t)+'</div><a href="javascript:void(0)"'+i.attr("data-id",""+(l&&l.id),!0,!1)+' data-action="folderTree.select" role="treeitem" tabindex="3"'+i.attr("aria-label","选择文件夹:"+(l&&l.fname),!0,!1)+' class="aria-hide"></a></div></li>')}else{var r=0;for(var o in n){r++;var l=n[o];a.push("<li"+i.attr("data-id",""+(l&&l.id),!0,!1)+' data-action="folderTree.select" class="folder-list-item"><div class="whole-row"></div><div class="folder-info"><div class="little-folder-icon"></div><div class="folder-name">'+(null==(t=l&&l.fname)?"":t)+'</div><a href="javascript:void(0)"'+i.attr("data-id",""+(l&&l.id),!0,!1)+' data-action="folderTree.select" role="treeitem" tabindex="3"'+i.attr("aria-label","选择文件夹:"+(l&&l.fname),!0,!1)+' class="aria-hide"></a></div></li>')}}}.call(this),a.push("</ul></li></ul>")}.call(this,"items"in n?n.items:"undefined"!=typeof items?items:void 0,"topFolder"in n?n.topFolder:"undefined"!=typeof topFolder?topFolder:void 0,"undefined"in n?n.undefined:void 0),a.join("")}},function(e,t,a){a(204);e.exports=function(){var e=[];return e.push('<li data-id="new" data-action="folderTree.select" class="folder-list-item"><div class="whole-row"></div><div class="folder-info"><span class="little-folder-icon"></span><input id="inputFolderNameInFolderTree" value="新建文件夹" data-blur="createInputBlur" data-keyup="folderTree.create" autofocus="true" class="folder-name"/><div class="bubble"><span class="bot"></span><span class="top"></span>文件夹名称中含有违禁词</div></div></li>'),e.join("")}},function(e,t,a){"use strict";function i(){report("clkTask"),d?o():(n(),r.removePoint())}function n(){report("showTask"),c||r.firstRender(),c=!0,d=!0,l.addClass("open"),$("#boxTitle a").focus()}function o(){d=!1,l.removeClass("open"),G.activeElement&&G.activeElement.focus()}var r=a(86),l=$("#box"),s=$(G.handler),d=!1,c=!1;s.bind("box.hide",o),e.exports={toggle:i}},function(e,t,a){"use strict";function i(){var e=$(this.parentNode.parentNode),t=e.data("path"),a=o.getTask(t);t=a.filepath;var i=a.remoteType,r=a.localpath,l=a.fnameEsc||a.fname;console.log("调用续传接口:",a,t);var s=n.addContinueUploadTask(t,r,l,i);$("#boxTitle a").focus(),console.log("continueUpload ret:",s)}var n=a(64),o=a(77);e.exports={continueUpload:i}},function(e,t,a){"use strict";function i(){{var e=$(this.parentNode.parentNode),t=e.data("path");r.getFile(t)}r.clearComplete(),o.clearComplete(),n.clearClist(),l.clearClist()}var n=a(64),o=a(86),r=a(77),l=a(15);e.exports={clear:i}},function(e,t,a){"use strict";function i(){{var e=$(this.parentNode.parentNode),t=e.data("path"),a=e.data("id"),i=o.getTask(a,t);n.pauseTask(a)}$("#boxTitle a").focus(),report("clkTaskPause","undefined"==typeof i.downloadtasktype?0:1)}var n=a(64),o=a(77);e.exports={pause:i}},function(e,t,a){"use strict";function i(){var e=$(this.parentNode.parentNode),t=e.data("id"),a=e.data("path"),i=l.getTask(t);i||(i=l.getTask(a)),c(i)}function n(e,t){var a=l.getTask(e);a||(a=l.getTask(t)),c(a)}var o=a(64),r=(a(18),a(92)),l=a(77),s=(a(86),a(25)),d=$(G.handler),c=function(e){var t=e.type,a=!0,i=e.filepath;if(report("clkTaskDelete"),$("#boxTitle a").focus(),e.id){{o.removeTask(e.id)}a=!0}if(a){if(e.id&&l.remove(e.id),"download"!==e.type&&l.remove(e.filepath),e.status="remove",d.trigger("client.updateTask",e),t&&t.indexOf("upload")>=0){if(i){var n={app_id:G.appid,bus_id:e.busid,file_id:e.fp,parent_folder_id:G.nowFolder};r.deleteFile(n).done(function(t){console.log(t),l.remove(e)}).fail(function(e){e.fc&&1===e.fc})}}else"download"===t&&(o.removeTask(e.id),o.removeCompleteTask(e.id));o.clearClist();var c=l.getData(i);c&&(c.isDowning=!1),s.updateRow(c)}};G.removeTaskInDownLoad=n,d.bind("task.removeOne",function(e,t){var a=o.removeTask(t);console.log(a,t)}),e.exports={remove:i,removeByDownLoad:n}},function(e,t,a){"use strict";function i(){{var e=$(this.parentNode.parentNode),t=e.data("path"),a=o.getTask(t),i=a.id;n.resumeTask(i)}report("clkTaskPause"),$("#boxTitle a").focus()}var n=a(64),o=a(77);e.exports={resume:i}},function(e,t,a){"use strict";function i(){c&&(clearTimeout(c),c=0)}function n(){c||o()}function o(){var e=r.getTaskListAdv(),t=!1;if(e.empty&&"ok"===e.status)i();else for(var a=/progress|ready|scan|geturl/gi,n=s.cleanMap(e.map),f=0,u=n.length;u>f;f++){var p=n[f];d.trigger("client.updateTask",p),a.test(p.status)&&(t=!0)}t?c=setTimeout(o,l):(console.log("do stop refresh!"),i())}var r=a(64),l=a(158).refreshTime,s=a(91),d=$(G.handler),c=0;$(G.handler).bind("task.startRefresh",n),$(G.handler).bind("task.stopRefresh",i)},function(e){"use strict";function t(){this.classList.contains("open")?this.classList.remove("open"):(report("clkTaskExp"),this.classList.add("open"))}e.exports={toggle:t}},function(e,t,a){"use strict";var i=a(92),n=(a(64),a(77),{});e.exports=n,n.closeTips=function(){},n.refeshVip=function(){i.checkVip().done(function(e){console.log(e)}).fail(function(){})},n.conVip=function(){window.open("http://pay.qq.com/ipay/index.shtml?c=cjclub&aid=vip.gongneng.client.qunwenjian_openvip&ADTAG=CLIENT.QQ.GroupFile_OpenSVIP")},n.vipTipsOk=function(){window.open("http://pay.qq.com/ipay/index.shtml?c=cjclub&aid=vip.gongneng.client.qunwenjian_openvip&ADTAG=CLIENT.QQ.GroupFile_OpenSVIP")},n.vipTipsCancel=function(){},n.openVip=function(){}},function(e,t,a){"use strict";var i=a(92),n=(a(77),{});e.exports=n,n.createFolder=function(e,t){i.createFolder(e).done(function(e){t(e)}).fail(function(){})},n.renameFolder=function(){},n.deleteFolder=function(){}},function(e){e.exports=function(e,t,a,i){function n(e){return o[e]||e}i=i||function(e,t,a,i){var n=t.split("\n"),o=Math.max(i-3,0),r=Math.min(n.length,i+3),l=n.slice(o,r).map(function(e,t){var a=t+o+1;return(a==i?" >> ":"    ")+a+"| "+e}).join("\n");throw e.path=a,e.message=(a||"ejs")+":"+i+"\n"+l+"\n\n"+e.message,e},t=t||function(e){return void 0==e?"":String(e).replace(r,n)};var o={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&#34;","'":"&#39;"},r=/[&<>'"]/g,l=1,s='<ul>\r\n<%\r\n	//todo 文件打开需要加个接口.\r\n	var data = locals.data,\r\n		list = locals.list;\r\n	if(!data && !list){\r\n%>\r\n	<li data-action="file.upload">上传</li>\r\n	<%if(G.canCreateFolder && G.nowFolder === \'/\'){%>\r\n	<li data-action="folder.create" title="新建文件夹">新建文件夹</li>\r\n	<%}%>\r\n	<li data-action="menu.refresh" onclick="window.location.reload();">刷新</li>\r\n<%}else if(data){%>\r\n	<%if(typeof data.othergroup !== \'undefined\'){%>\r\n		<li data-action="openGroupFile" data-uin="<%-data.gc%>">打开所在群</li>\r\n	<%}else{%>\r\n		<%if(data.orcType === 1){%>\r\n			<%if(data.icon !== \'pic\'){%>\r\n				<li <%if(data.safeType){%>class="disabled"<%}else{%>data-action="file.downloadByMenu"<%}%> aria-label="打开" data-path="<%=data.filepath%>">打开</li>\r\n			<%}else{%>\r\n				<li <%if(data.safeType){%>class="disabled"<%}else{%>data-action="file.menupreview"<%}%> aria-label="预览">预览</li>\r\n			<%}%>\r\n			\r\n			<li <%if(data.safeType){%>class="disabled"<%}else{%>data-action="file.saveAs"<%}%> title="另存为" tabindex="3" aria-label="下载文件">另存为</li>\r\n			<li <%if(data.safeType || !data.isDown){%>class="disabled"<%}else{%>data-action="file.openFolderInBox"<%}%> title="在文件夹中显示" tabindex="3" aria-label="在文件夹中显示">在文件夹中显示</li>\r\n			<%if(!G.mac){%>\r\n			  <li <%if(data.safeType){%>class="disabled"<%}else{%>data-action="file.forward"<%}%> aria-label="转发">转发</li>\r\n			  <li class="line <%if(data.safeType){%>disabled<%}%>" <%if(!data.safeType){%>data-action="file.forwardMobile"<%}%> aria-label="转发到手机">发送到手机</li>\r\n			<%}%>\r\n			<%if(G.info.isAdmin && typeof data.issearch === \'undefined\'){%>\r\n				<li <%if(data.safeType){%>class="disabled"<%}else{%>data-action="file.showMove"<%}%> aria-label="移动">移动到</li>\r\n			<%}%>\r\n			<%if(G.info.isAdmin && data.temp){%>\r\n				<li <%if(data.safeType){%>class="disabled"<%}else{%>data-action="file.permanent"<%}%> aria-label="转存为永久文件" tabindex="-1">转存为永久文件</li>\r\n			<%}%>\r\n			<li <%if(data.safeType || (!G.info.isAdmin && G.info.uin !== data.uin)){%>class="disabled"<%}else{%>data-action="file.showRename"<%}%> aria-label="重命名" >重命名</li>\r\n			<li <%if(!G.info.isAdmin && G.info.uin !== data.uin){%>class="disabled"<%}else{%>data-action="file.delete"<%}%> id="fileDelete" aria-label="删除">删除</li>	\r\n			<li data-action="file.jubao" aria-label="举报">举报</li>\r\n		<%}else if(data.orcType === 2){%>\r\n			<li class="line" data-action="folder.open" data-path="<%=data.id%>">打开</li>\r\n			<li <%if(!G.info.isAdmin){%>class="disabled"<%}else{%>data-action="folder.showRenameFolder"<%}%>>重命名</li>\r\n			<li class="line" data-action="folder.property">文件夹属性</li>\r\n			<li <%if(!G.info.isAdmin){%>class="disabled"<%}else{%>data-action="folder.showDeleteFolder"<%}%>>删除</li>\r\n		<%}%>\r\n	<%}%>\r\n<%}else if(list){%>\r\n	<li class="line" data-action="file.batchSaveAs">另存为</li>\r\n	<li class="line" data-action="file.batchMove">移动到</li>\r\n	<li <%if(!G.info.isAdmin && G.info.uin !== data.uin){%>class="disabled"<%}else{%>data-action="file.batchDelete"<%}%>>删除</li>\r\n<%}%>\r\n</ul>',d="D:\\qun\\clt_filetab\\src\\tpl\\customMenu.ejs";try{var c=[],f=c.push.bind(c);f("<ul>\r\n"),l=2;var u=e.data,p=e.list;return u||p?u?(f("\r\n	"),l=14,"undefined"!=typeof u.othergroup?(f('\r\n		<li data-action="openGroupFile" data-uin="'),l=15,f(u.gc),f('">打开所在群</li>\r\n	'),l=16):(f("\r\n		"),l=17,1===u.orcType?(f("\r\n			"),l=18,"pic"!==u.icon?(f("\r\n				<li "),l=19,u.safeType?f('class="disabled"'):f('data-action="file.downloadByMenu"'),f(' aria-label="打开" data-path="'),f(t(u.filepath)),f('">打开</li>\r\n			'),l=20):(f("\r\n				<li "),l=21,u.safeType?f('class="disabled"'):f('data-action="file.menupreview"'),f(' aria-label="预览">预览</li>\r\n			'),l=22),f("\r\n			\r\n			<li "),l=24,u.safeType?f('class="disabled"'):f('data-action="file.saveAs"'),f(' title="另存为" tabindex="3" aria-label="下载文件">另存为</li>\r\n			<li '),l=25,u.safeType||!u.isDown?f('class="disabled"'):f('data-action="file.openFolderInBox"'),f(' title="在文件夹中显示" tabindex="3" aria-label="在文件夹中显示">在文件夹中显示</li>\r\n			'),l=26,G.mac||(f("\r\n			  <li "),l=27,u.safeType?f('class="disabled"'):f('data-action="file.forward"'),f(' aria-label="转发">转发</li>\r\n			  <li class="line '),l=28,u.safeType&&f("disabled"),f('" '),u.safeType||f('data-action="file.forwardMobile"'),f(' aria-label="转发到手机">发送到手机</li>\r\n			'),l=29),f("\r\n			"),l=30,G.info.isAdmin&&"undefined"==typeof u.issearch&&(f("\r\n				<li "),l=31,u.safeType?f('class="disabled"'):f('data-action="file.showMove"'),f(' aria-label="移动">移动到</li>\r\n			'),l=32),f("\r\n			"),l=33,G.info.isAdmin&&u.temp&&(f("\r\n				<li "),l=34,u.safeType?f('class="disabled"'):f('data-action="file.permanent"'),f(' aria-label="转存为永久文件" tabindex="-1">转存为永久文件</li>\r\n			'),l=35),f("\r\n			<li "),l=36,u.safeType||!G.info.isAdmin&&G.info.uin!==u.uin?f('class="disabled"'):f('data-action="file.showRename"'),f(' aria-label="重命名" >重命名</li>\r\n			<li '),l=37,G.info.isAdmin||G.info.uin===u.uin?f('data-action="file.delete"'):f('class="disabled"'),f(' id="fileDelete" aria-label="删除">删除</li>	\r\n			<li data-action="file.jubao" aria-label="举报">举报</li>\r\n		'),l=39):2===u.orcType&&(f('\r\n			<li class="line" data-action="folder.open" data-path="'),l=40,f(t(u.id)),f('">打开</li>\r\n			<li '),l=41,G.info.isAdmin?f('data-action="folder.showRenameFolder"'):f('class="disabled"'),f('>重命名</li>\r\n			<li class="line" data-action="folder.property">文件夹属性</li>\r\n			<li '),l=43,G.info.isAdmin?f('data-action="folder.showDeleteFolder"'):f('class="disabled"'),f(">删除</li>\r\n		"),l=44),f("\r\n	"),l=45),f("\r\n"),l=46):p&&(f('\r\n	<li class="line" data-action="file.batchSaveAs">另存为</li>\r\n	<li class="line" data-action="file.batchMove">移动到</li>\r\n	<li '),l=49,G.info.isAdmin||G.info.uin===u.uin?f('data-action="file.batchDelete"'):f('class="disabled"'),f(">删除</li>\r\n"),l=50):(l=7,f('\r\n	<li data-action="file.upload">上传</li>\r\n	'),l=9,G.canCreateFolder&&"/"===G.nowFolder&&(f('\r\n	<li data-action="folder.create" title="新建文件夹">新建文件夹</li>\r\n	'),l=11),f('\r\n	<li data-action="menu.refresh" onclick="window.location.reload();">刷新</li>\r\n'),l=13),f("\r\n</ul>"),l=51,c.join("")}catch(m){i(m,s,d,l)}}},function(e,t,a){"use strict";function i(e){if(console.debug("------新任务"+e.type+"---------",e),e.taskStarttime=parseInt((new Date).getTime()/1e3,10),"download"!==e.type||2!==e.downloadtasktype)1===e.onlineedit&&(console.debug("start edit file"),r.fileInEditRow(e)),$(G.handler).trigger("client.addTask",e);else{var t=e.foldertaskid,a=o.getOneTask(t);a&&(a.fileTaskList||(a.fileTaskList=[]),a.fileTaskList.push(e.id))}QReport.monitor(n[e.type])}var n={upload:2186487,continueupload:2186489,download:2186490},o=a(91),r=a(25);e.exports=i},function(e,t,a){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t.default=e,t}function n(e){var t=l.task2file(e);if(G.file||(G.file={}),G.file&&"undefined"==typeof G.file.cu&&(G.file.cu=0),"downloadcomplete"===e.status){if(2!==e.downloadtasktype&&(s.updateRow(t),G.saveasList[t.filepath]?delete G.saveasList[t.filepath]:G.version<m?p.openByPath(t):r.edit(t)),t.parentId&&"/"!==t.parentId){var a=l.getData(t.parentId);a&&(a.downNum++,a.downNum===a.filenum&&(a.isDown=!0,a.succ=!0,s.updateRow(a)))}}else{if(G.file.cu+=t.size,G.file.capacityused=u.getSize(G.file.cu),s.renderSpace(),t.folderpath!==G.nowFolder&&t.folderpath){var a=l.getData(e.folderpath);a.filenum++;var i=parseInt((new Date).getTime()/1e3,10);a.mt=i,a.mtStr=f.dayStr(i),a.toFirst=!0,s.updateRow(a)}else if(1===e.onlineedit){var n=l.getData(t.oldfilepath);console.debug("upload complete and update old file:",e,t,n),t.md5=t.newMd5,t.localpath=n.localpath,s.updateEditFileRow(t)}else s.appendFile(t);l.updateAllNum({files:[t],action:"add"})}d.set(t),console.log("task complate and set local"),report("showTaskShow"),c.trigger("client.updateTask",e)}var o=a(160),r=i(o),l=a(77),s=a(25),d=a(15),c=$(G.handler),f=a(139),u=a(140),p=a(75),m=5485;e.exports=n},function(e){"use strict";function t(e){a.trigger("client.updateTask",e)}var a=$(G.handler);e.exports=t},function(e){"use strict";function t(e){a.trigger("client.updateTask",e)}var a=$(G.handler);e.exports=t},function(e){"use strict";function t(e){e.createtime=parseInt((new Date).getTime()/1e3,10),"uploadprogress"===e.status&&setTimeout(function(){$(G.handler).trigger("box.show",e)},20),1===e.remotetype,"download"===e.type,a.trigger("client.updateTask",e)}var a=$(G.handler);e.exports=t},function(e,t,a){"use strict";function i(e){var t=e.filepath,a=e.localpath,i=e.filename_esc||e.filename,n=e.remotetype;o.addContinueUploadTask(t,a,i,n)}function n(e){r.trigger("client.updateTask",e),1===e.onlineedit;var t=l[e.type],a=t[e.status];if(a&&QReport.monitor(a),e.errorcode||e.securityattri){var n=e.errorcode;if(32221991===n)return i(e),void 0}}var o=a(64),r=$(G.handler),l={upload:{cancel:2186633,remove:2186634,scanfail:2186635,uploadsecurityfail:2186636,uploadgeturlfail:2186637,uploadfail:2186491,_default:2186638},continueupload:{cancel:2186639,remove:2186640,scanfail:2186641,uploadsecurityfail:2186642,uploadgeturlfail:2186643,uploadfail:2186491,_default:2186644},download:{cancel:2186645,remove:2186646,downloadgeturlfail:2186647,downloadfail:386331,_default:2186648}};e.exports=n},function(e,t,a){"use strict";function i(e){return null!=e&&""!==e}function n(e){return(Array.isArray(e)?e.map(n):e&&"object"==typeof e?Object.keys(e).filter(function(t){return e[t]}):[e]).filter(i).join(" ")}t.merge=function o(e,t){if(1===arguments.length){for(var a=e[0],n=1;n<e.length;n++)a=o(a,e[n]);return a}var r=e["class"],l=t["class"];(r||l)&&(r=r||[],l=l||[],Array.isArray(r)||(r=[r]),Array.isArray(l)||(l=[l]),e["class"]=r.concat(l).filter(i));for(var s in t)"class"!=s&&(e[s]=t[s]);return e},t.joinClasses=n,t.cls=function(e,a){for(var i=[],o=0;o<e.length;o++)a&&a[o]?i.push(t.escape(n([e[o]]))):i.push(n(e[o]));var r=n(i);return r.length?' class="'+r+'"':""},t.style=function(e){return e&&"object"==typeof e?Object.keys(e).map(function(t){return t+":"+e[t]}).join(";"):e},t.attr=function(e,a,i,n){return"style"===e&&(a=t.style(a)),"boolean"==typeof a||null==a?a?" "+(n?e:e+'="'+e+'"'):"":0==e.indexOf("data")&&"string"!=typeof a?(-1!==JSON.stringify(a).indexOf("&")&&console.warn("Since Jade 2.0.0, ampersands (`&`) in data attributes will be escaped to `&amp;`"),a&&"function"==typeof a.toISOString&&console.warn("Jade will eliminate the double quotes around dates in ISO form after 2.0.0")," "+e+"='"+JSON.stringify(a).replace(/'/g,"&apos;")+"'"):i?(a&&"function"==typeof a.toISOString&&console.warn("Jade will stringify dates in ISO form after 2.0.0")," "+e+'="'+t.escape(a)+'"'):(a&&"function"==typeof a.toISOString&&console.warn("Jade will stringify dates in ISO form after 2.0.0")," "+e+'="'+a+'"')},t.attrs=function(e,a){var i=[],o=Object.keys(e);if(o.length)for(var r=0;r<o.length;++r){var l=o[r],s=e[l];"class"==l?(s=n(s))&&i.push(" "+l+'="'+s+'"'):i.push(t.attr(l,s,!1,a))}return i.join("")},t.escape=function(e){var t=String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");return t===""+e?e:t},t.rethrow=function r(e,t,i,n){if(!(e instanceof Error))throw e;if(!("undefined"==typeof window&&t||n))throw e.message+=" on line "+i,e;try{n=n||a(205).readFileSync(t,"utf8")}catch(o){r(e,null,i)}var l=3,s=n.split("\n"),d=Math.max(i-l,0),c=Math.min(s.length,i+l),l=s.slice(d,c).map(function(e,t){var a=t+d+1;return(a==i?"  > ":"    ")+a+"| "+e}).join("\n");throw e.path=t,e.message=(t||"Jade")+":"+i+"\n"+l+"\n\n"+e.message,e}},function(){}]);